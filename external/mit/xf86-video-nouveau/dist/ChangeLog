commit e6479845ec0db20dc733c621b7967b751840a552
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Tue Sep 20 00:31:06 2016 -0400

    Bump version to 1.0.13
    
     - Fixes for reverse prime offload
     - ABI 23 support for Xorg 1.19
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu

commit 6473b68762b0dca2dfccfdfc74100398b7459296
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 19 08:29:40 2016 -0700

    Use NotifyFd for drm and udev fds
    
    NotifyFd is available after API 22, and must be used after API 23.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a964931e8dc4e06c27749edb4993a656dc261d75
Author: Adam Jackson <ajax@redhat.com>
Date:   Tue Jul 19 10:03:56 2016 -0400

    Adapt Block/WakeupHandler signature for ABI 23
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit 12f77348e7a9579b167b41228dec9e6f97b74de8
Author: Hans de Goede <hdegoede@redhat.com>
Date:   Fri Jun 3 14:46:10 2016 +0200

    Properly cleanup fb for reverse-prime-offload
    
    drmmode_set_scanout_pixmap(pix) adds drmmod->fb_id through a call
    to drmmode_xf86crtc_resize(), but on a subsequent
    drmmode_set_scanout_pixmap(NULL) it would not remove the fb.
    
    This keeps the crtc marked as busy, which causes the dgpu to not
    being able to runtime suspend, after an output attached to the dgpu
    has been used once. Which causes burning through an additional 10W
    of power and the laptop to run quite hot.
    
    This commit adds the missing remove fb call, allowing the dgpu to runtime
    suspend after an external monitor has been plugged into the laptop.
    
    Signed-off-by: Hans de Goede <hdegoede@redhat.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 1da8a937be19e41c51a3d516bd98cee988bca44b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 2 11:23:53 2016 +1000

    exa/nv50-: fix some potential incomplete pushes
    
    I don't think these should actually be able to happen, given that we
    already reject the unknown formats in the Check() functions.  But,
    just in case...
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit bb57f9af9d179af0962456dca369953521ea8c2c
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 2 10:17:58 2016 +1000

    fix use of out-of-scope data
    
    Reported by Coverity.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit b824d36c28124955eda4aced5e637aa75eea4d6c
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Wed Jan 13 11:55:06 2016 -0500

    HAS_DIRTYTRACKING_ROTATION also supports multiple CRTCs
    
    A port of commit ff9a6b6f from xf86-video-ati.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=93670
    Reported-by: Thomas D. <thfrdue@gmx.de>
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit b18bc036bf9997ea65f5cbd824fd057931e604fe
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Dec 8 15:52:25 2015 +1000

    Bump version to 1.0.12
    
    Various random fixes have been pending for a long while now...
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 6e6d8ac1c7b4ee047a7b40b95dea1e65a7c3211a
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Sun Jun 28 02:33:49 2015 +0200

    Take shift in crtc positions for ZaphodHeads configs into account.
    
    In multi-x-screen ZaphodHeads configurations, there isn't a
    one-to-one mapping of kernel provided drmmode crtc index
    to the index of the corresponding xf86Crtc inside the
    xf86CrtcConfig crtc array anymore, ie. for kernel provided
    drmmode->mode_res->crtcs[i], the i'th crtc won't correspond
    to the xf86Crtc in the i'th slot of the x-screens xf86CrtcConfig
    anymore, once ZaphodHeads has only selected a subset of all crtcs
    of a graphics card for a given x-screen, instead of all crtcs.
    
    This breaks the mapping of bit positions in the bit masks returned
    in kencoder->possible_crtcs and kencoder->possible_clones. A 1 bit
    in position i of those masks allows use of the kernels i'th crtc for
    the given kencoder. The X-Servers dix code checks those bit masks
    for valid xf86Output -> xf86Crtc assignments, assuming that the i'th
    slot xf86CrtcConfigPtr config->crtc[i] corresponds to bit i in the
    xf86Output->possibe_crtcs bitmask, and bails if the bitmask doesn't
    allow the specified assignment of crtc to output. If ZaphodHeads
    breaks the assumption of bit i <-> crtc slot i this ends in failure.
    
    Take this shift of crtc index positions wrt. encoder bitmask bit
    positions into account by bit-shifting positions accordingly when
    assigning encoder->possible_crtcs to output->possible_crtcs, so
    the proper indices match up again for validation by the dix.
    
    This problem wasn't apparent last year when testing the ZaphodHeads
    support on some Kepler cards, as apparently the encoder->possible_crtcs
    bitmasks returned for those cards by the kernel just had all 4
    lsb bits set for all tested encoders/output, so each of the cards 4
    crtcs could go with each output and things worked by chance.
    
    The current code breaks, e.g., on 2010 MacBookPro with nv50, where
    one crtc is hardwired to the internal lvds panel, and one crtc
    is hardwired to the external DP connector, resulting in a failure
    where dual-display on single-x-screen works fine, but assigning
    each output to a separate x-screen via ZaphodHeads fails due to
    the mismatched encoder->possible_crtcs bitmasks.
    
    This patch fixes the problem.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 1ff13a922535924681b91452235b017e43a4c6f6
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Sun Sep 13 15:29:15 2015 -0400

    fix build after glamor removal
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit 3bb943b33bbe8e593afc00d13fe867dd7a708c3c
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Thu Aug 21 20:36:41 2014 -0400

    xv: use correct max width/height settings
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=70931
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit 3e2e0faa2ee1cce9c1bb5c7ad80d0592460f3edc
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Sat Jul 11 17:16:27 2015 -0400

    remove maxwell GM10x support for now
    
    There is no EXA acceleration, and now no GLAMOR either.
    User is better off with modesetting until EXA makes an appearance.
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit 1f8b2b348526d94e9bde4a285f331a4934c11078
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Sat Jul 11 17:08:52 2015 -0400

    glamor: remove
    
    If you want glamor, just use modesetting instead. It's hooked up
    incorrectly in nouveau, and there doesn't seem to be any point in fixing
    it when the modesetting driver does it all properly.
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit 6296145654b78518f3299bb5887f224f0d3810fd
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Wed Jul 29 14:39:02 2015 +0200

    Add Option "DRI" to allow selection of maximum DRI level. (v2)
    
    Allow user to select the maximum level of DRI implementation
    to use, DRI2 or DRI3.
    
    exa accel supports both DRI2 and, if the kernel supports
    rendernodes, also DRI3. However, DRI3 still seems to have
    some bugs on current implementations, and additionally it
    doesn't work well at all for X-Servers older than 1.16.3
    due to X-Server bugs. Therefore we default to DRI2 on exa,
    but allow the user to enable DRI3 with this new option.
    
    nouveau's glamor accel backend currently doesn't work under
    DRI2 at all, so we continue to use DRI3 whenever it is
    supported and ignore this new option for now.
    
    Also add a bit more output about status of Present and
    DRI3 to aid debugging.
    
    Note: This was originally meant to be a boolean parameter,
          to just select between DRI3 on and off, but changed
          here to a DRI level to make it consistent with the
          same option in the released Intel-ddx.
    
    v2: Use fixed up Bool return type of nouveau_present_init().
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Cc: Ilia Mirkin <imirkin@alum.mit.edu>
    Cc: Emil Velikov <emil.l.velikov@gmail.com>
    Cc: Martin Peres <martin.peres@free.fr>
    Cc: Ben Skeggs <bskeggs@redhat.com>
    Reviewed-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit 0deb1fcc6d1099db698ff8c512a4884708a458ec
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Wed Jul 29 14:39:01 2015 +0200

    present: Fixup return type of nouveau_present_init()
    
    Make it a Bool consistently, as declared in header.
    
    Reported-by: Ilia Mirkin <imirkin@alum.mit.edu>
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Reviewed-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit 5212dbd7e5eba35fdd6578b30f5b0c8c8543081b
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Tue Jul 14 19:23:01 2015 -0400

    Avoid build fail without COMPOSITE
    
    Reviewed-by: Dave Airlie <airlied@redhat.com>

commit fdc528306e4018b314f2efcb2be4e37672bddd75
Author: Vadim Rutkovsky <vrutkovs@redhat.com>
Date:   Thu Jul 9 23:23:37 2015 +0200

    Adapt to new dirty tracking api
    
    Mirrors commit b6d871bf2 (radeon: adopt for new X server dirty tracking
    APIs.) in xf86-video-ati.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=91284

commit dfd827cefb940f46b18dc77c129f0a603c7c95fa
Author: Samuel Pitoiset <samuel.pitoiset@gmail.com>
Date:   Wed May 20 17:08:58 2015 +0200

    fix a wrong use of a logical operator in drmmode_output_dpms()
    
    This is probably a typo error which has been introduced in 2009...
    This fixes the following warning detected by Clang :
    
    drmmode_display.c:907:30: warning: use of logical '&&' with constant operand [-Wconstant-logical-operand]
        if (props && (props->flags && DRM_MODE_PROP_ENUM)) {
    
    Signed-off-by: Samuel Pitoiset <samuel.pitoiset@gmail.com>
    Reviewed-by: Dave Airlie <airlied@redhat.com>

commit 27234dbe00caf6dfd4efb24fc7bbc026fa0134fc
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Wed May 27 20:26:42 2015 -0400

    nv50/exa: add comments showing the code that makes up the programs
    
    As decoded by envydis. Perhaps these should move into separate files
    similar to nvc0, but this seems like a simple intermediate solution.
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit 08ef36dc6766080f173ae2b7e660b3182cab9f2d
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Wed May 20 18:36:17 2015 -0400

    older hardware prefers copy to clear, so use that
    
    Doing a solid copy of 0, or a clear, has the same effect. This is a
    partial revert of commit 5439a9905eab8c. Pre-nv50 hardware succeeds with
    copies more often.
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit 278ad73475bd137eac8a49ec7a22406bfc2867e7
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Tue May 19 16:26:16 2015 -0400

    nv04-nv40: don't attempt to do 32-bit shifts
    
    A 32-bit shift is a no-op, which will also make the new planemask get
    or'd with ~0, thus negating the usefulness of the subsequent
    planemask != ~0 check. Only do this if it's a less-than-32-bit per pixel
    format, in which case it will have the desired effect of setting the
    high bits.
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>
    Reviewed-by: Martin Peres <martin.peres@free.fr>

commit 7583471e1fe181dc7c26b7d0a0d16f70eb10dd21
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Tue May 19 16:11:17 2015 -0400

    Check before trying a solid fill
    
    Pre-nv50 has all sorts of funny requirements for non-copy alu
    operations, and will bail out of solid fills left and right. Account for
    that case and fall back to the memset.
    
    Reported-by: Andrew Randrianasulu <randrianasulu@gmail.com>
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>
    Reviewed-by: Martin Peres <martin.peres@free.fr>

commit 212fc5354ed60ba282d5eabf468c0e2dd0d0afe6
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Mon Mar 23 20:05:23 2015 -0400

    nv50: explicitly disable ZETA buffer
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit 734b8404c0a1fa9ce8ee62a0d4cc5baae7c8fcdf
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Sat Mar 21 11:46:35 2015 -0400

    use defined method names where available
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit 5439a9905eab8c8d0f86e9963df6c893633bdbfd
Author: Maarten Lankhorst <dev@mblankhorst.nl>
Date:   Mon Mar 23 19:41:38 2015 +0100

    Actually do a clear instead of doing a bogus copy.
    
    Oops!

commit f0fdc156039eaa79fb1ad82fcc6437f2432306c6
Author: Maarten Lankhorst <dev@mblankhorst.nl>
Date:   Sat Mar 21 22:30:10 2015 +0100

    Try using EXA ops harder in drmmode_fbcon_copy fallback
    
    The memcpy in the fallback path fails with SIGBUS on GK20A because
    this memory is not coherent, try to use a solid fill instead.

commit 7319b54291d59e1cd3cbe4f39ea8cc6dc8bf45bc
Author: Maarten Lankhorst <dev@mblankhorst.nl>
Date:   Fri Mar 20 23:24:50 2015 +0100

    Simplify nouveau_allocate_surface's pitch calculation.
    
    Judging from previous commits all linear buffers should have a 256 byte alignment.

commit 91e51a7571e6e8cb9338fc168f817f56438b1901
Author: Maarten Lankhorst <dev@mblankhorst.nl>
Date:   Fri Mar 20 23:17:13 2015 +0100

    Use drmGetRenderDeviceNameFromFd to obtain the dri3 node.

commit d29d8baad4d845ec9d3d1d1bc8d1c1e1f6f6f086
Author: Maarten Lankhorst <dev@mblankhorst.nl>
Date:   Sat Mar 14 18:00:00 2015 +0100

    Use the correct class and shader ops for GK20A.
    
    Signed-off-by: Maarten Lankhorst <dev@mblankhorst.nl>

commit 6829d4c672fc05f4d3d993ac1bfde21d4b6c1200
Author: Maarten Lankhorst <dev@mblankhorst.nl>
Date:   Sat Mar 14 11:58:12 2015 +0100

    Make the ddx load with platform devices
    
    Signed-off-by: Maarten Lankhorst <dev@mblankhorst.nl>

commit 3fb97d78202213c1221a1d3ad8a5cebda78fdf44
Author: Maarten Lankhorst <maarten.lankhorst@ubuntu.com>
Date:   Thu Oct 23 09:29:14 2014 +0200

    fix null pointer deref

commit 90ba0bb6a371a5beebdf6d363bcd73659b7c9f1f
Author: Maarten Lankhorst <maarten.lankhorst@ubuntu.com>
Date:   Thu Oct 23 08:25:01 2014 +0200

    check memory allocation in nouveau_glamor_set_shared_pixmap_backing
    
    As reported by Roy Spliet.

commit 4dfa13c77a1f6cee1affea05b5f3a0b26827d366
Author: Maarten Lankhorst <maarten.lankhorst@ubuntu.com>
Date:   Thu Oct 23 08:21:55 2014 +0200

    rework initialization to prevent some crashes

commit 485902e61b18aff864226db62ba10399aab40128
Author: Maarten Lankhorst <maarten.lankhorst@ubuntu.com>
Date:   Wed Oct 22 15:52:22 2014 +0200

    fix !DRI3 case

commit 79d438ec4d23280a242d36c2d81f2f43f6e90ada
Author: Maarten Lankhorst <maarten.lankhorst@ubuntu.com>
Date:   Wed Oct 22 15:42:55 2014 +0200

    fix crash in nouveau_glamor_set_shared_pixmap_backing

commit 217f6577afe44b10f7f8e066eaf55419fb0f5ee1
Author: Maarten Lankhorst <maarten.lankhorst@ubuntu.com>
Date:   Wed Oct 22 13:16:33 2014 +0200

    move down call to nouveau_present_init until after fb init.

commit 241e7289f25a342a457952b9b0e539c2f0b81d99
Author: Maarten Lankhorst <maarten.lankhorst@ubuntu.com>
Date:   Wed Oct 22 11:04:16 2014 +0200

    enable dri3 support without glamor

commit 762b22f5a2b9deed1c6b18d7098f8fddf2f4b759
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Tue Sep 23 21:44:12 2014 -0400

    kepler: remove unnecessary texbars, add live-only tex for nvf0
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit ce9d6e165cd810f06d158e3cfbb4b9f14b060ded
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Tue Sep 23 21:37:46 2014 -0400

    allow path to envyas binary to be specified
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit 02c1aee91ae22b58e777716ffd38397f9df0a087
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Thu Sep 4 15:27:53 2014 -0400

    copy: don't bother trying to create copy on pre-nva3
    
    Only the NVA3/5/8/F tesla chips have a copy engine. Don't bother trying
    to create one on earlier tesla chips (and thus printing an error on
    failure).
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>

commit 3cd4c8494c296c7583dfa7f0823a272c9e932e03
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Thu Aug 28 03:57:48 2014 +0200

    Bump version to 1.0.11 for release.
    
    Highlights:
    
    - Support for server managed fd's.
    - Glamor support.
    - Maxwell support.
    - DRI3 and initial Present support.
    - vsync'ed kms pageflip performance fixes when running on Linux 3.13+
    - Multi-display vsync, vblank, swap scheduling, timestamping fixes.
    - Multi x-screen support fixes.
    - ZaphodHead support on for multiple outputs per x-screen.
    - EXA nv-10 fixes.
    - Enable sync of swaps to vblank by default (Option GLXVblank "on").
    - Disable pseudo-triplebuffering by default (Option SwapLimit "1").
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 6d49f3f7aaaec872b6f9841f744a0bf09cc98492
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Thu Aug 28 03:49:55 2014 +0200

    dri2: Set default SwapLimit to 1 for double-buffering.
    
    This used to be 2 for pseudo-triplebuffering on XOrg 1.12+.
    
    However, it caused problems like unthrottled swapping
    at up to twice the video refresh rate for redirected
    windows under desktop composition, which can't be easily
    fixed under dri2.
    
    Default to double-buffering. Users can override this, but
    dri3 provides better solutions for this.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 10729a442be3cf018c5806c95ec4218977917ef3
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Mon Aug 18 09:53:27 2014 +0200

    xv/dri2/dri3: Switch to optimized crtc selection for drawables.
    
    Make crtc selection consistent with ati and intel ddx.
    
    Pick the crtc to use for vblank events, swap scheduling and
    kms-pageflip completion events as the one with maximum pixel area
    intersection between its viewport and the drawable. If multiple
    crtc's viewports display the same amount of area of a drawable,
    select the crtc whose output is the designated "primary output"
    for the x-screen. The latter allows, e.g., in a clone display
    setup, to select the important output on which tearing should be
    minimized. The former makes sure to minimize or avoid tearing on
    the display which shows the largest part of the drawable.
    
    This method is transplanted from the ati ddx.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit be96a5a62df5e1f286690311a6bc4df4f2a99e57
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Sun Aug 17 02:30:36 2014 +0200

    Add file "compile" to .gitignore
    
    Some auto-generated file by new make systems to deal with some
    old compilers.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 16c885ce9c7bebcfa1252a5d500956dd5f551043
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Tue Aug 12 11:08:24 2014 +0200

    Fix event handling on multi-x-screen configs.
    
    Only register the wakeup handler and event socket
    once per card fd and server generation, as the fd
    and device file is shared between all x-screens for
    a given card during a given server generation.
    
    Without this fix, vblank and kms-pageflip completion
    event processing don't work properly, as the server
    doesn't kick the wakeup handler for gpu events, and
    therefore the desktop will freeze, unless the user
    manually kicks the wakeup handler by moving the mouse
    or hitting the keyboard.
    
    Add proper reference counting and checks to make it so.
    This fix is derived from a similar and proven fix in
    the ati ddx for the same problem.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 7eab6806927ea8938b9bd143d1702e87fde2f2cc
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Wed Aug 13 06:48:10 2014 +0200

    Make new ZaphodHeads work across server regenerations.
    
    Reset the mask of already assigned crtc's at start
    of each new server generation.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 6ad053788e804f3a8bd36ee3653ec95e7df62623
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Wed Aug 6 07:37:32 2014 +0200

    dri2 and xv: Fix NVxxSyncToVBlank() for multi-x-screen's.
    
    Use helper function drmmode_head() to choose proper hw-crtc
    to sync to. Fixes xv blits, and dri2 Copy-Swaps.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 17de663a71bcad6f69414eb6bc6bf9b76a6bf5f4
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Aug 11 09:48:42 2014 +1000

    fix glamor header check
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 64ca88570b71289a019a2d130b1a30dc474ef52d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Aug 11 08:59:30 2014 +1000

    present: use drmmode_head() where it's appropriate
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 6e71bdf5a9da15c60694fa8543243e37a32c5faf
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Mon Jun 23 11:25:41 2014 +0200

    Allow/Fix use of multiple ZaphodHead outputs per x-screen.
    
    Defining multiple ZaphodHead outputs per x-screen in a
    multiple x-screen's per gpu configuration caused all
    outputs except one per x-screen to go dark, because
    there was a fixed mapping x-screen number -> crtc number,
    limiting the number of crtc's per x-screen to one.
    
    On a ZaphodHead's setup, be more clever and assign
    as many crtc's to a given x-screen as there are
    ZaphodHeads defined for that screen, assuming
    there are enough unused crtc's available.
    
    Tested on a triple display setup with different combos
    of one, two or three ZaphodHeads per one, two or three
    x-screens.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit fcf91a275e96f14e49a93dc3f8dd6798cf7d98f3
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Mon Jun 23 11:13:57 2014 +0200

    dri2: Fix drmWaitVblank on multi-x-screen configs.
    
    Old mapping of xf86Crtc -> display head index was
    too simple and only worked on a single x-screen config.
    
    Introduce a new helper function drmmode_hw_head_index()
    which returns proper mapping also for multi x-screens per
    gpu and ZaphodHeads setups and other non-standard multi-
    display configurations.
    
    Tested on triple-head setup with various ZaphodHead and
    server layout combos.
    
    This helper will be also needed for dri3/present code.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>

commit 29572e44c24613be9dec0c98ff2731e46ce6203b
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Sun Aug 10 02:25:15 2014 -0400

    exa/nv10: src ops should use the SF macro
    
    Doesn't actually end up mattering.
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 35e17905e1c54558059f6b72b8594a3377f1a57c
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Sun Aug 10 02:25:14 2014 -0400

    exa/nv10: fix blend function setup to check the correct mask
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit dfac18c67a17782a0263daf8cb4ee487374abd2c
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Sun Aug 10 02:25:13 2014 -0400

    exa/nv10: use color 0 when the pict format has no RGB component
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit ff7010e06b6da0fe27143b47b8a4ffd2f12894b7
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Sun Aug 10 02:25:12 2014 -0400

    exa/nv10: use same clip settings as mesa driver
    
    The higher 0x800 was getting overwritten by the 0x7ff anyways, so it
    wasn't doing any good. The mesa driver just uses 0x800 for the low
    portion and doesn't set the 8 bit in the higher portion, so do the same
    thing here.
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit edd1608c397ebcf487b84948031f7807178e5e4d
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Tue Jul 1 22:31:47 2014 +0100

    xorg_list: define the xorg_list* symbols
    
    ...when building against pre 1.12 x.
    The build will fail as earlier versions of X were missing the xorg_
    prefix of the symbols - struct and util functions.
    
    Reported-by: Pali Rohár <pali.rohar@gmail.com>
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit f6c1c755d8230494c8115e2c7899a85663f5c176
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jul 1 12:56:49 2014 +1000

    fix a harmless typo
    
    fdo#80738
    
    Reported-by: Paulo Sérgio Travaglia <pstglia@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 096fb1ebc10b14ba1b747832efe378369bcf44e6
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Mon May 26 05:39:50 2014 +0200

    dri2: Add support for handling more than 2 crtc's
    
    Need to use the DRM_VBLANK_HIGH_CRTC bits to allow
    selecting crtc's with id > 1 on latest gpu's with
    up to four display engines.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 4771ff5c668047a2dc56e4c6131175eed837e757
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Sun Jun 22 01:32:42 2014 +0200

    present: build only when glamor is enabled
    
    nouveau_present_flip_exec references glamor_fd_from_pixmap,
    which do not exist when glamor is disabled
    
    Signed-off-by: Marcin Slusarz <marcin.slusarz@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 41c1c4ee867753422d6486f13bf20b45905a5dd5
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Sun Jun 22 01:31:46 2014 +0200

    glamor: fix build without glamor.h
    
    xorg-server can be built without glamor, which leads to:
    
      CC       nouveau_xv.lo
    In file included from nouveau_xv.c:41:0:
    nouveau_glamor.h:12:20: fatal error: glamor.h: No such file or directory
    compilation terminated.
    
    Signed-off-by: Marcin Slusarz <marcin.slusarz@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit f0fa8313714c2a5b16e784b257b5ff79da3a443b
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Thu Jun 19 17:11:34 2014 +0200

    dri2: Enable sync of bufferswaps to Vblank by default.
    
    Make this consistent with other drivers default behaviour.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 02d7e647ce3a4a5d48c4ee94c94bebcac2d4827d
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Sat Jun 21 01:26:16 2014 +0200

    dri2: Fix kms pageflip completion timestamping.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 4d92001ebe6bec8c5eaab8156421e62a7e4dedc8
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Fri Mar 14 18:27:53 2014 +0100

    Add kernel async_flip cap detection. Part II of double-sync fix.
    
    Query if kernel supports the async_flip cap, thereby needs the
    new sync behavior. Linux 3.13+ nouveau-kms have this cap and
    need this fix.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 54dfbb2fed393b65d846e6ed9672acb47e0f19de
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Fri Mar 14 18:23:04 2014 +0100

    dri2: Fix double-sync of pageflips on Linux 3.13+ - Part I
    
    Linux 3.13 and later sync kms pageflips to vblank in the kms
    driver, so we must not emit a sync to vblank pushbuf in the ddx
    on such kernels, or maximum framerate will be cut into half!
    
    A sync-to-vblank-pushbuf is emitted for copyswaps as in the past,
    also for older kernels which don't support async_pageflip's and
    don't sync by themselves.
    
    This adds the implementation, but not the detection logic for
    async_pageflip support in the kernel.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 303402e00d55b5296311738184cd61f4aadab74d
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Sat Jun 21 00:09:39 2014 +0200

    Fix nouveau_copy_init()
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 65a70c4edd1f0df808a3a4dea6e8c9846cc7c920
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jun 20 16:57:18 2014 +1000

    another build fix...

commit 882ebb4000803f6025e1bb3213a31b19f6d1a2c6
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Nov 18 14:42:02 2013 +1000

    present: initial support
    
    Until glamor grows its own implementation.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 0d94f32fce2759c4b0f4d22b99f3ced09c2aa5a0
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jun 20 09:47:39 2014 +1000

    kms: implement a more generic event mechanism
    
    Present wants to use this too.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 97feb3b2104287eb385ffba8329f304e2808d808
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jun 20 09:29:08 2014 +1000

    dri2: move page flip handling out of drmmode
    
    Nothing to see here... This is to (hopefully) avoid busting DRI2 while
    implementing Present support.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 60b876eab3708f1c277027addb5514974452644c
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jun 20 09:20:37 2014 +1000

    dri2: move away from directly touching drmmode on page flips
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 36dda1341008dd87a6b5459f0616776097d11d9f
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jun 20 09:04:30 2014 +1000

    dri2: shuffle some functions around
    
    Nothing to see here...
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 8bdec8ebd68ba5eaa696d8a666e18774bff3b2ad
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jun 20 12:37:33 2014 +1000

    glamor: fix randr resize
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 3c45b590a31157abca140096b141aa83fecb671f
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jun 20 08:28:30 2014 +1000

    sync: fix build against DRI3-less server
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 88ae58d786b0c41148e692dbfe8e2646e7533d9e
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Thu Jun 19 02:37:45 2014 -0400

    update man page with new chips, AccelMethod option
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 5cb36ba57493bf7edf560bf370c87eff79f1d1a6
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 19 14:54:20 2014 +1000

    default to glamor on maxwell
    
    We have no RENDER/Xv acceleration in EXA for Maxwell.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 81148bb1dbc7007c021c59411d56cb31cfc74ef2
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 19 14:54:20 2014 +1000

    glamor: provide dri3 support when enabled
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 86024ceef015ffe31a204cc5bc6c326a19363ff1
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 19 14:54:20 2014 +1000

    glamor: initial support (no dri)
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit fd0ce8839f307693d86c7602dd926ce79e6b777d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 19 14:54:20 2014 +1000

    add support for maxwell, minus Xv/renderaccel
    
    More extensive acceleration will be via glamor, at least to begin with.  It
    seems to make sense to jump on the bandwagon now, and deal with any issues
    that arise before it it becomes the standard for XWayland.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 8ad0465e15bfc502abc259e886d6dcb448e0141a
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 19 14:54:20 2014 +1000

    50/c0/e0 -> tesla/fermi/kepler
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 4b138ab18f58c6d459e21dc319615f536c8e69c8
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 19 14:54:20 2014 +1000

    merge nv_dma.c into nv_accel_common.c
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 5c44e6b86195c22e092db5dae06e70208e8b66a0
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 19 14:54:20 2014 +1000

    pull copy engine handling into one place, a place that isn't also exa
    
    As a side-effect, we now allow Kepler to use async copies too.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit c375bacbdaeabd0288855c13b4717d0694be9e56
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 19 14:54:20 2014 +1000

    exa: move module load into nouveau_exa_init
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit b24cae0bf5db6ece21439d4c6ff3668aed4c78d6
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 19 14:54:20 2014 +1000

    dri2: move "is supported" checks out of nv_driver.c
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 07c26a0670dd2558acf8e1159f2f68989a7f753d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 19 14:54:20 2014 +1000

    replace NoAccel with AccelMethod in preparation for glamor support
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit e7cf48d9529160f7add2fef72d2e42be9370594a
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 19 14:54:20 2014 +1000

    silence a warning
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 4a18dd74c0cc6e75937eb78347e8ea6c81d1373a
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon May 26 17:30:24 2014 +1000

    autogen: add support for gnome autobuilder
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 8604a741baa5360164a882bd9f3c8474840744db
Author: Hans de Goede <hdegoede@redhat.com>
Date:   Fri Apr 11 14:20:43 2014 +0200

    Fix building on older servers without xf86platformBus.h
    
    Signed-off-by: Hans de Goede <hdegoede@redhat.com>

commit 0c13843e300d1a9db2bfed18dc1b5df38c5adfdf
Author: Hans de Goede <hdegoede@redhat.com>
Date:   Mon Mar 17 17:37:31 2014 +0100

    Add support for server managed fds
    
    v2 (Martin Peres):
    	- Do not define "NVEntPtr pNVEnt" if not needed to avoid some warnings
    
    Signed-off-by: Hans de Goede <hdegoede@redhat.com>
    Signed-off-by: Martin Peres <martin.peres@free.fr>

commit 47f08aa6d713da4e6ae9c35ce691e790ffaed09d
Author: Hans de Goede <hdegoede@redhat.com>
Date:   Mon Mar 17 17:37:30 2014 +0100

    Add a NVOpenNouveauDevice helper function
    
    This is a preparation patch for adding support for server managed fds
    
    Signed-off-by: Hans de Goede <hdegoede@redhat.com>
    Signed-off-by: Martin Peres <martin.peres@free.fr>

commit 480f0998ffed6d9a5c6656dba75182f00fd88a1b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Nov 7 14:56:48 2013 +1000

    bump to 1.0.10 for release
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 59395c738ebdc21087109075ada67ea8d7783141
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Nov 7 14:56:06 2013 +1000

    recognise GK208 as a Kepler board
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 03642323a954d0adb11662a98e92dfa20bee9728
Author: Dave Airlie <airlied@gmail.com>
Date:   Wed Jul 31 11:19:50 2013 +1000

    nouveau: fix build against older servers.
    
    Older servers had no GPU support.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 27323ce68d58fcb82a648ab14abbc99acdc36f44
Author: Dave Airlie <airlied@gmail.com>
Date:   Wed Jul 31 11:01:15 2013 +1000

    nouveau: add gpu identifier to connector names for secondary gpus
    
    this avoids clashes with identifiers from other GPUs.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 1df177f35a05db505577cdc929e63fde906a704b
Author: Dave Airlie <airlied@gmail.com>
Date:   Wed Jul 31 10:51:03 2013 +1000

    nouveau: fix build on ppc by wrapping immintrin include.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 300c5a32d79cf507b5fede96710335bcd316eccb
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Jul 30 15:28:06 2013 +1000

    bump to 1.0.9 for release
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit be44e7804862b4c276ed4d4717b1212920f428e6
Author: Dave Airlie <airlied@gmail.com>
Date:   Tue Jul 30 15:26:46 2013 +1000

    nouveau: fix crash when xinerama is enabled.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 588252556d1c84bf6793bc22edd48e6650a0f1b9
Author: Dave Airlie <airlied@gmail.com>
Date:   Tue Jul 30 15:14:22 2013 +1000

    fix make distcheck.
    
    add all the nvf0 stuff.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 29aecda1b5bdb95700894083874492a6d5dfc08a
Author: Dave Airlie <airlied@gmail.com>
Date:   Tue Jul 30 14:10:51 2013 +1000

    drmmode: add support for multi-screen reverse optimus
    
    Initial reverse optimus didn't consider multiple screens, so
    this overhauls the code to use the new X server interface,
    and allows for multiple outputs on the nvidia to be used with
    the intel doing the rendering.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit d7ae886260b480da0ea4cad22eb6f7b7d12f07b0
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Mon Jul 29 21:03:54 2013 -0400

    nouveau: use uppercase for chipset name
    
    Right now the log will output e.g. NVaa instead of NVAA, which is how we
    usually talk about it.
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 4492cf90c2a7fe27badf6f3f0f296755a65e1e83
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Mon Jul 29 02:40:39 2013 -0400

    xv: speed up YV12 -> NV12 conversion using SSE2 if available
    
    memcpy() goes from taking 45% to 66% of total function time, which
    translates to a 30% decrease in NVPutImage runtime.
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 08c667b06d28756d0d32f82bd736b0bdf2b4448e
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Mon Jul 29 02:40:38 2013 -0400

    xv: fix last pixel for big-endian machines in YV12 -> NV12 conversion
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 8c1c5d4f212958559132506d51dcfeeb17f60371
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed May 15 21:34:13 2013 +1000

    nvf0: implement EXA and XVideo acceleration
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 779b8d44b5ff84b87b52600a2f010ac19cd396ad
Author: Sven Joachim <svenjoac@gmx.de>
Date:   Thu Jun 13 20:41:53 2013 +0200

    Link against libdrm
    
    The DDX uses symbols from libdrm but currently does not link against
    it, but rather relies on indirect linkage from libdrm_nouveau.  This
    could lead to insufficient dependencies in distribution packages, seen
    in http://bugs.debian.org/633786.
    
    Signed-off-by: Sven Joachim <svenjoac@gmx.de>

commit e96ae2b129df2a50d1d3839084df4fb1868d914d
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Jun 12 11:05:23 2013 +0200

    fixup the dri2 check
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 7f20a6af25ae28452ec9c971bfa2227857e6ee93
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Jun 12 10:46:39 2013 +0200

    bump to 1.0.8

commit 1fda669c0e5a25eac7f9f1e9a743120cae50ff51
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Sat Feb 16 20:48:47 2013 +0000

    configure: printout the configuration info
    
    Let the bikeshedding begin
    
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>

commit 45dbcaac301efce04d0bb492337f4febf8129ed9
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Sat Feb 16 20:48:45 2013 +0000

    nouveau: mandate dri2 build
    
    Building nouveau without dri2 is just silly
    
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>

commit ea8d225fe100ecabb72e3cc0a92372f16afb10b3
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Sat Feb 16 20:48:44 2013 +0000

    dri1: purge the final references
    
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>

commit b5d1a9bd269c9d2758fee37492cdcccc976fcc3b
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Sat Feb 16 20:48:43 2013 +0000

    nouveau: Do not load dri {sub,}module
    
    Nouveau does not use dri1, thus loading XFree86-DRI is not needed
    On the other hand, we do use dri2
    
    As a side effect, purge the 'set-but-unused' variable pLibDRMVersion
    
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>

commit 7c3f6cd8d6b14aea561fb877f6006d339d156f35
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Sat Feb 16 20:48:42 2013 +0000

    nouveau: stop using dri1 function DRICreatePCIBusID
    
    Step 1 to completely rip out dri1 out of nouveau
    
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>

commit 3b1a45325d5fd46f0e7fad17168742b4c9a2465a
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Jun 12 10:30:32 2013 +0200

    update makefiles for make distcheck

commit b82aacd3e72b52240181569c8b0abb55c1f716d5
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Sat Feb 16 12:48:46 2013 -0800

    configure: require xorg-macros 1.8
    
    Explicitly check for xorg-macros 1.8, as a subtle hint
    to update your build deps if building your own ddx
    
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>

commit 4f667b40f41e311fbe302237efe173bcc24fb8bb
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Mon Jun 10 14:29:59 2013 +0200

    fix a xfree from previous patch
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 2e34d11541e1f987c7ca0556592cb16f4d232299
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Mon Jun 10 13:06:35 2013 +0200

    nouveau: enable support for normal optimus configuration
    
    nvd7 has no display engine, only enable sink output capability
    if there is a crtc.
    
    drmmode doesn't work without crtc's, so prevent crashes by skipping
    the drmmode code in that case.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit bf72ae1f6574c540f0afc2d7845d41df43507a8f
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed May 15 22:05:01 2013 +1000

    nve0: envyas isn't overly clever.. avoid short-form instructions
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 41cc2f24c43d2656ac722f594aaebad93e37dfec
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed May 15 21:13:11 2013 +1000

    nvc0-nve0: decompile shaders into their source, add basic build system
    
    Far, far easier to maintain this way...
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 1edb5d7ae450a32fe6607d536653cf733444e7e2
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed May 15 20:47:44 2013 +1000

    nvc0-nve0: split shader code from their headers
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit c18439f759bec267a3b67d375dcbfeb8a6fd7b6a
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon May 13 13:55:51 2013 +1000

    nouveau: clean up nv entity index declarations.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit d3b52efe959f255784f5ead16d7276ca0fb4cdb1
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon May 13 13:35:12 2013 +1000

    nouveau: attempt to fix zaphod since dri1 code removal
    
    j_v on #nouveau bisected b1a630b48210d6a3c44994fce1b73273000ace5c has
    breaking zaphod, on review it was trying to open the drm fd a second time
    which was unnecessary.
    
    Avoid the problem by storing the nv fd in an entity and have share it between
    the two scrn info recs.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 50426ac83f9f077791e4df8c04fc0ecefc06e8ab
Author: Marek Vasut <marex@denx.de>
Date:   Fri May 3 15:48:55 2013 +0200

    nouveau: Allow 3D accelerators with output ports
    
    This patch let's cards with PCI class 0x30200 (3D controller) be
    operated by the nouveau driver as well. The nv Quadro NVS 450 is
    one such card, where the first GPU has PCI class 0x30000 and the
    other GPU has PCI class 0x30200. By ignoring the 1 << 9 bit in
    the PCI class mask, displays attached to the other GPU can also
    be used now.
    
    Signed-off-by: Marek Vasut <marex@denx.de>
    Cc: Dave Airlie <airlied@redhat.com>
    Cc: Ben Skeggs <skeggsb@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 2fa3397e348161a3394e2b456f065921272a056a
Author: Ilia Mirkin <imirkin@alum.mit.edu>
Date:   Fri May 3 09:59:39 2013 -0400

    nouveau_xv: Avoid reading off the end of the source image on NV50+
    
    The 'w' argument to NVCopyNV12ColorPlanes is used to index into the
    source image. line_len is rounded up to 8 on NV50+, so if the source
    image (+ left offset) is not rounded to 8, NVCopyNV12ColorPlanes could
    read past the end of the array and crash X. This change can cause the
    last few horizontal pixels of dst to not be initialized, but they
    should be truncated by the renderer anyways.
    
    See https://bugs.freedesktop.org/show_bug.cgi?id=63263
    
    Signed-off-by: Ilia Mirkin <imirkin@alum.mit.edu>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 81f9ab38f0a5de7217227dd17a4d0e50dffd0d28
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu May 2 11:38:07 2013 +1000

    nvf0: recognise as supported chipset
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 653c95d60af0f7c19a1d2f3b76dd17bb169d9c9b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Apr 29 10:07:59 2013 +1000

    nve0: explicitly ask kernel for copy2 object
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 6771424d79e541d2fa7253a582db3dc9108fd97d
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Mar 27 09:50:03 2013 +0100

    bump to 1.0.7
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 84998320162a74a0861b7be1fcc230e50f08424a
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Mon Mar 25 13:55:37 2013 +0100

    Clean up some errors on closing.
    
    If forced close happens, all ioctl's will fail. Some of the handlers
    also need to be unregistered before the module is unloaded entirely.

commit a80785f79268ed3701fc69cbd9194ad12822c82c
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Feb 11 09:56:25 2013 +1000

    nouveau: fix build against old servers (part 2)
    
    Should fix next bit of
    https://bugs.freedesktop.org/show_bug.cgi?id=60369
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 05dc9b57896689a3dbd9e6aeb16d57c49515b02e
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Sun Feb 3 21:12:46 2013 +0100

    nv30/exa: fix shaders on big-endian machines
    
    Direct port of commit d1bc38b6673c54af61196056c489383fba8dced8
    "nv40/exa: fix shaders on big-endian machines" to nv30.
    
    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=60050
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 61a277488f7195914cbdda10355db0d758fc801c
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Feb 7 10:47:20 2013 +1000

    nouveau: fix build on older X servers
    
    should fix https://bugs.freedesktop.org/show_bug.cgi?id=60369
    
    Reported-by: fabio.ped@libero.it
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit e8f222fd10e21f39488d3d8c697e4948cd787cd0
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Feb 6 16:21:50 2013 +1000

    nouveau: make prime regression fix more robust.
    
    This makes this fix more robust and less crashy.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit d762631c9306b6580b34db1e7eb57bbcac901390
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Feb 6 15:52:33 2013 +1000

    nouveau: align shared buffers to 256
    
    We were getting 0xa5 error code on 2D transfers from tiled VRAM to untiled
    GART when using USB offload devices, this fixes this by upping the alignment
    on the 2D engine for shared buffers.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit c6980b2add5752a7c285a846b2c9353c9d18afd4
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Feb 6 15:24:09 2013 +1000

    nouveau: fix regression in PRIME since 58284cf32778d54cde139423450bc33360784503
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 59fb3f0252e9b769c5877cfe83d8dbc51cdff232
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Feb 6 14:58:08 2013 +1000

    nouveau: create shared pixmaps in GART
    
    this creates the shared pixmaps in GART, and makes sure they are untiled.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 1fdd7db94b55c65ea62cc9eaefff620b20e9e4ea
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jan 7 15:28:53 2013 +1000

    nouveau: add reverse prime support
    
    This allows the nvidia card to scanout Intel cards rendering.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 58284cf32778d54cde139423450bc33360784503
Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
Date:   Tue Jan 29 16:38:21 2013 +1000

    dri2: fix missing frame throttle on copy_region buffer swaps
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 912d418fdfd2e99eef1e5c631c76dda1d82cf451
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Mon Jan 21 00:15:38 2013 +0100

    nouveau: put cursor BO in GART
    
    Keeping it in VRAM wastes CPU time, because cursor_set ioctl reads
    handed BO back to RAM, just to write it to actual cursor BO.
    
    Here (nv92/core i7), this patch decreases overall cpu usage of
    drmmode_load_cursor_argb from 4.6ms to ~90us and lets nv50_crtc_cursor_set
    disappear from perf traces.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 8f934fad5d4934936b3265f272ca81e73c60d7dc
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jan 7 14:13:10 2013 +1000

    bump to 1.0.6
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 00834273e22f7234a3755269100ea3f10b521e35
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jan 7 14:04:40 2013 +1000

    nouveau: fix dirty redisplay damage handling
    
    This processes the damage in the correct order.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 389b8a8dd91a48dee524eac96e60813c507f1a82
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jan 7 14:05:06 2013 +1000

    bump to 1.0.5
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit efe9c57af6ff4c12936e49ac3e188c54b8b2d5bd
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jan 7 11:35:56 2013 +1000

    nvc0-/exa: fix typo which caused breakage in rendercheck tmcoords test
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 5cd86445272818ec2f598f4685a5d7f24e403d07
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Sun Nov 25 22:59:49 2012 +0100

    add some missing newlines in error messages
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 3b33a0b426b8915f302247dcd40c64fb1a6dcdd2
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Sun Nov 4 18:06:18 2012 +0000

    kms: Let the server know if we got more than 1 EDID block
    
    Verbatim copy from xf86-video-radeon commit 809cacb
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=32341
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 018ab2d4634f3c8923038337ce9600973e2f0002
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Nov 9 12:16:00 2012 +1000

    bump version to 1.0.4
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 0d32d964dbba3864af0946aa8894cef858eb1319
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 7 14:49:03 2012 +1000

    nouveau: drop unused nv private members.
    
    these are no longer needed.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit b1a630b48210d6a3c44994fce1b73273000ace5c
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 7 14:45:14 2012 +1000

    nouveau: drop DRI1 device open interface.
    
    this is a DRI1 left over, the driver is meant to open the device itself now.
    
    this old interface did crazy stuff like drmAddMap.
    
    Reviewed-by: Ben Skeggs <bskeggs@redhat.com>
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 27a1a0616304e9b9f0ae842899b7d614f1026578
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Fri Nov 2 03:57:42 2012 +0000

    nouveau: NVPlatformProbe, handle shareable entities
    
    During NVPciProbe, xf86ConfigPciEntity() implicitly calls checks and sets
    the entity as shared
    Here we are only allocating the screen, thus need to explicitly call the
    functions
    
    ZaphodHead and Xinerama should finally work
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=56347
    
    Reported-By: Vladimir Chebotarev <exc@rbcmail.ru>
    Reported-By: Damian Nowak <nowaker@geozone.pl>
    Tested-By: Damian Nowak <nowaker@geozone.pl>
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit e34cfbd5bd23f7f15372af52d8a39a5715ce7310
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Fri Nov 2 03:57:41 2012 +0000

    nouveau: Factor out common code to NVHasKMS()
    
    As the name suggests checks if it has kernel mode setting,
    prints out the interface version and checkes if the chipset
    is supported
    
    Function is used in NVPciProbe and NVPlatformProbe
    
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 78f24dc3798d635fca2e20856a09012c28bbbb8b
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Fri Nov 2 03:57:40 2012 +0000

    nouveau: introduce NVInitScrn()
    
    Common/helper function for NV{Pci,Platform}Probe()
    
    This introduces some the following functions to the
    NVPlatformProbe codepath
    * xf86SetEntitySharable()
    * xf86SetEntityInstanceForScreen()
    
    Necessary for dualhead, xinerama and/or zaphodhead
    
    v2: Rename nouveau_init_scrn() to NVInitScrn()
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 47457fbd5006070ea9a06238a5a69ca8167dac77
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Fri Nov 2 03:57:39 2012 +0000

    nouveau: Remove unneeded xf86GetEntityInfo()
    
    Retrieving the whole entity information is not needed as we only
    use the index - stored already in entity_num
    
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 20995bb5920021668b8b607f886201c643ee0e9a
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 2 09:04:43 2012 +1000

    nouveau: fix regression in virtualbox drawing hopefully.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 8c3e1623b0be15f8cc590d893bfd19be87bd079a
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Oct 24 11:19:04 2012 +0200

    bump version to 1.0.3

commit 6644a3a724a11150eba0c0082c8d4fe167b1755e
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Tue Oct 23 20:17:29 2012 +0200

    exa: remove exaMarkSync from download/upload screen
    
    They're noops on nouveau since sync markers are unused and
    download/upload are always synchronous anyway from exa's POV.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 2a757b7dffa85c30879653a1e52e33b8f4fa8806
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Tue Oct 23 17:04:37 2012 +0200

    exa: fix comparison in download_from_screen
    
    Presumably a copy/paste error from upload_to_screen.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 72230cd5a7846f7a26f929262a745dc0bdc34a3d
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Tue Oct 23 10:37:27 2012 +0200

    exa: fix up download_from/upload_to screen
    
    Add a missing return TRUE to download_from_screen.
    Add a missing exaMarkSync to memcpy in upload_to_screen.
    Add a really loud warning to both if memcpy to/from tiled is done.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 1d7890ecb8b3188177ab85608ea232812672d923
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Tue Oct 23 09:53:39 2012 +0200

    remove unused members from nv_type.h

commit 0b2a548316b0ce88ba19d5e05fdca205fc139962
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Mon Oct 22 13:12:06 2012 +0200

    nvc0/exa: make solid fill actually work
    
    Some investigation showed that the code for accelerating solid fill
    didn't actually work because NVC0EXACheckTexture would fail.
    
    Making the check the same as in NV50EXACheckTexture fixes this, and
    seems to get acceleration for solid fills working right.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit b4231dd715a8a7f86b04519b5f4e8a8d93c2f561
Author: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
Date:   Tue Oct 9 09:06:59 2012 +0200

    dri2: Fix potential race and crash for swap at next vblank.
    
    This fixes a potential race + crash that wasn't properly
    handled by commit 248de8cdbd6d0bc062633b49896fa4791148cd3b
    and happened at least on one users machine.
    
    That commit wrongly assumed no special action would be needed
    for swaps at next vblank while triple-buffering is enabled on
    XOrg server 1.12 or later.
    
    Closer inspection of the x-server main dispatch loop shows
    it is possible that the client manages to get the server
    to dispatch a new DRI2GetBuffersWithFormat() call before
    the server calls the vblank event handler and executes
    the nouveau_dri2_finish_swap() routine. Such a race would
    cause a crash, as described in above commit.
    
    This commit handles the "swap at next vblank" case by
    calling nouveau_dri2_finish_swap() immediately without
    the roundtrip (queue vblank_event -> kernel -> deliver event
    -> x-server processes event -> nouveau vblank event handler),
    before control gets returned to the client.
    
    This avoids the race while retaining triple-buffering. As
    a bonus, time-critical swaps at next vblank get processed
    without roundtrip delay, increasing the chance of not
    skipping a frame due to vblank miss while sync to vblank is
    on.
    
    Thanks to Anssi for reporting this problem on the nouveau
    mailing list at 12th July 2012 and for testing this patch.
    
    Reported-by: Anssi Hannula <anssi.hannula@iki.fi>
    Tested-by: Anssi Hannula <anssi.hannula@iki.fi>
    Signed-off-by: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>

commit 01c9a9cff7d6232ca6eafa59dd60833a0d9cdc5b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Oct 18 18:38:21 2012 +1000

    shadowfb: fix segfault due to reading outside of shadow buffer
    
    Probably caused by the new libdrm port, the new libdrm sets the bo
    size field to the *allocated* size and not the *requested* size,
    making the max_height calculation here invalid.
    
    Switched to using virtualX/virtualY as the bounds, which should
    hopefully do the right thing..
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 297fd0d0755bda698be1d0b30cc60a41d7673c0b
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Oct 16 16:15:16 2012 +1000

    nouveau/dri2: fix pixmap/window offset calcs.
    
    This should fix prime rendering under kwin, and not break it under the
    others.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 5c9379b14cdabc81fd5d4c916dcd93dc77c4f683
Author: Sebastian Keller <sebastian-keller@gmx.de>
Date:   Tue Sep 25 11:35:35 2012 +0200

    exa: use CLAMP_TO_EDGE for RepeatPad
    
    This fixes border rendering in some gtk3 themes.
    https://bugs.freedesktop.org/show_bug.cgi?id=55310
    
    v2 (Ben Skeggs): implement same fix for fermi/kepler too
    
    Signed-off-by: Sebastian Keller <sebastian-keller@gmx.de>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 302b5da84b4890c067f5f7e8b0f4e689909bbb51
Author: Adam Jackson <ajax@redhat.com>
Date:   Tue Sep 25 10:44:32 2012 -0400

    Remove mibstore.h
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit 20f3830ddf868c0d1a46c18fa381585c076bfb8d
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Sep 12 13:42:43 2012 +0200

    bump version to 1.0.2

commit 239f39977ebb64c9d545c6f3c905de3c0ad840d0
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 19 13:46:44 2012 +1000

    nouveau: enable provider/capabilities
    
    this adds the provider object for nouveau and enables the capabilities
    on it.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 28abba276e36fd0176f416996d44297ddf13f5cd
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 19 13:46:12 2012 +1000

    nouveau/dri2: add support for DRI2 offload
    
    This adds the nouveau interfaces for DRI2 offload, this allows nouveau
    to act as an offload slave.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit b0be0ac86bae871c9f1724c40298d50d7f2b08e4
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 19 13:45:32 2012 +1000

    nouveau: add pixmap tracking/updating support.
    
    This should allow nouveau to act as an output master for driving output
    slaves.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit baf485b1d304d741073f058d524ca698af3c15cd
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 19 13:42:13 2012 +1000

    nouveau/exa: add support for shared pixmaps.
    
    This adds the pixmap export/import hooks, along with code for nv50/nvc0
    to validate shared buffers in GTT space.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 2f48b8f462a03cb92db9e9a7ae1957eb27473965
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 19 13:40:23 2012 +1000

    nouveau: add platform bus support
    
    This adds the ability to load nouveau via the new platform apis.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 3aa9a296f508089a247f92b829036ca6a55b7b42
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed Aug 15 13:26:51 2012 -0400

    Remove vbe and int10 includes
    
    This driver has never used int10 or vbe, presumably these were just
    copypasta from nv.
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit 9b9be11e99930136a591059db1bf4ceaca8806e7
Author: Adam Jackson <ajax@redhat.com>
Date:   Thu Jul 19 18:22:44 2012 -0400

    Implement ->driverFunc
    
    Copied from fbdev, makes it so we can run without iopl.
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit 6629066b87142cdd1d9e881b61ef55c97aedf949
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Aug 3 17:05:33 2012 +1000

    nvc0/nve0: support sync-to-vblank if kernel is new enough
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit d1bc38b6673c54af61196056c489383fba8dced8
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 6 16:23:50 2012 +1000

    nv40/exa: fix shaders on big-endian machines
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 0d2b414aff634c996e0468bb0df1894d6c28c09e
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jun 19 10:12:37 2012 +1000

    bump version to 1.0.1

commit f84c28c9e6a0079e527655994689cb9c2ba51999
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jun 19 09:49:02 2012 +1000

    exa: fix remaining signed datatype issues
    
    Wasn't expecting this situation, apparently it happens..
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 794141f22179a09ba6b2a094ba72316c298fee8b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jun 19 00:28:59 2012 +0200

    exa: fix various issues in transfer bo handling
    
    Thanks to "Christoph Bumiller <e0425955@student.tuwien.ac.at>" for hinting
    at the cause of the memory leak.
    
    Signed-off-by: Maarten Maathuis <madman2003@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 661d0cf42219a063f8faa0518f3490ddd38209ff
Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
Date:   Mon Jun 18 17:13:55 2012 +0200

    nve0: fix and improve NV12 shader
    
    Only the 1st set of coordinates is valid.
    NVC0 was fixed in 9a3e579f637267b32efc46cfce5d1a36a41323b1.

commit a907efe44177298cb1c42a236aab087c14b71657
Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
Date:   Mon Jun 18 13:50:27 2012 +0200

    nvc0/accel: oops fix method size in previous patch

commit 8805e20bb9c1cfb7477f3eb7def64c5711fc91ea
Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
Date:   Mon Jun 18 13:41:43 2012 +0200

    nvc0/accel: use correct (signed) vertex data type in PUSH_VTX1/2s
    
    Could have kept s16 but decided against mask and shift.

commit 6dbf4ea12600275775123f9f564469454415da55
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jun 18 13:28:07 2012 +1000

    bump version to 1.0.0
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 5e74cee90eeb4e8e638b371a5f1a2c6737be70ff
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jun 18 15:36:47 2012 +1000

    distcheck fixes

commit 383aef5a8882a65efdf34e8d2681cd5ccec51b22
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jun 18 13:31:37 2012 +1000

    exa: drop massive gart allocation in favour of smaller ones, as needed
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 52836c15b1c0e4f28d92ca9e6c76872481917fd4
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jun 18 13:20:18 2012 +1000

    nv50/exa: somehow fix firefox tabs not being drawn properly since vp xfrm
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 36d3f8c28c55c05ccf4efa985831d2d249bad2fe
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Jun 13 22:41:58 2012 +1000

    dri2: kill debug spam
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 4dbc132f22721e3da30eb2e7fc97dea5b8458df6
Author: Viktor Novotný <noviktor@seznam.cz>
Date:   Sat May 26 22:15:20 2012 +0200

    nv04/exa: Reset destination surface offset in the same call of NV04EXACopy
    
    Fixes FDO bug #48954.
    
    Signed-off-by: Viktor Novotný <noviktor@seznam.cz>
    Reviewed-by: Marcin Slusarz <marcin.slusarz@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit aab58ee9a8025422416458d637c203af5ba008fd
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Jun 5 12:34:06 2012 +0100

    nouveau: i is used inside the function
    
    fixes build, reported by tallica on irc.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 619e99731f772ff8d9d93cd1d6d83de5d450574b
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Jun 5 11:02:54 2012 +0100

    nouveau: port to compat server API.
    
    This ports to the new server API.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit d2e16c62b5054f34a439e504bfa261fb71f5d7de
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Jun 5 10:57:30 2012 +0100

    nouveau: drop flags arg to adjust frame
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit fadf83d7b373282ccbf0fa0c01928a35ff717a5e
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu May 31 15:46:57 2012 +1000

    nvc0/exa: add support for async UTS/DFS copies
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 1600f7f202721c4b29c29e94f7fb69dc313b99dc
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu May 31 15:40:45 2012 +1000

    nva3/exa: add support for async UTS/DFS copies
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit ace77b6b1304826f4004bde23809b55d476b0615
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue May 29 21:21:57 2012 +1000

    disable fermi accel on 0.0.16 interface
    
    Kepler accel support broke some assumption made by the older kernel
    interface, and Fermi shares the same code.  It can't work (without
    some annoying hacks anyway) with the 0.0.16 kernel anymore.

commit 7041e30ab8beb627bbf569367961a658e79c2bdc
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed May 23 14:18:24 2012 +0100

    vl_hwmc: add missing compat include.
    
    Reported-by: tallica on irc.
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 2abf8467cfb7a7648ce73ba5bcbbc62219d65d6d
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed May 23 11:29:05 2012 +0100

    nouveau: add compat-api.h to makefile.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 1d861ad716861c57b2b81531d21840d7c8de024b
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed May 23 11:15:06 2012 +0100

    nouveau: convert two more xf86Screens access to macros
    
    for some reason the script missed these two, just fix them manually.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 5625fb84efc699e65da0062ae101915a49f2969b
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed May 23 11:13:30 2012 +0100

    nouveau: convert scrn/screen to using new interfaces
    
    This commit was generated with the util/modular/x-driver-screen-scrn-conv.sh
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 9f037f7be516ebf8fa4a67a5c9ff258594ab353e
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed May 23 11:12:59 2012 +0100

    nouveau: add initial compat-api header
    
    This just provides the scrn conversion and picture stuff so far.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 581564466c47ab0435ecca3cf4d82c03e1b30259
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Tue May 8 14:02:44 2012 +0200

    dri2: Don't try to page-flip pixmaps (fdo bug 49351).
    
    Reported-by: Marcin Slusarz <marcin.slusarz@gmail.com>
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit b1efc807392d372e6a232aad9d16ae6e1b1c1916
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Sun Apr 15 13:46:42 2012 +0200

    nv50: add missing pushbuf space check in NV50SyncToVBlank
    
    Regression from "WIP: port to new libdrm".

commit 174f17072005971fee6e4eb76a273c3cc1aa10d3
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Apr 24 21:55:03 2012 +1000

    nv40/exa: return false from gradient picture setup
    
    Not implemented yet.  Shouldn't hit this anyway, fallback in check_composite,
    but, best be safe :)
    
    Reported-by: Maarten Maathuis <madman2003@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 60edf2a87b928f413385443335493cb27da30a48
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Apr 24 10:54:51 2012 +1000

    nv40/exa: support for solid pictures
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 067b8416ad1ab3e71ebbb8db8bfb82ff6041939b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Apr 23 17:49:57 2012 +1000

    nv30/exa: implement support for solid pictures using register combiners
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit b09a61780ea6710b679a6a099e35987e7a5f559f
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Apr 23 14:49:22 2012 +1000

    nv10/exa: implement support for solid pictures
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 9583753a205c585ec844dfb7168513a2c2a157ba
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Apr 20 20:52:01 2012 +1000

    nv10/exa: use fixed-function texture matrix for transforms
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit c21c0ae57717bfb0fceab82505009a5382d1428d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Apr 20 20:30:44 2012 +1000

    nv30/exa: use fixed-function texture matrix for src/mask transforms
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 24a5ca723539a940bc2dabcc50aa631f0d9d4219
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Apr 20 15:24:45 2012 +1000

    nv40/exa: do transforms in vertex program
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 9a3e579f637267b32efc46cfce5d1a36a41323b1
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Apr 19 16:58:52 2012 +1000

    nvc0/exa: port recent nv50 changes (vp transform, solid pictures, etc)
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 8ea09db1a1e8dff7c341dc3da17edefda7e56e6d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Apr 19 13:46:03 2012 +1000

    nv50/exa: support solid pictures
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit b48bcc094beecf521899dd63c8fdbccfd534e5cd
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Apr 19 13:21:27 2012 +1000

    nv50/exa: perform texcoord transformations in vertex program
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 5ac2ca8c56ec8b055878c8ac4cbc8ca74379abda
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Apr 19 09:52:24 2012 +1000

    nv50: implement and use PUSH_DATAu
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 6c41b3d7a8799daa9d0b34dcfbfc5c891c24fffa
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Apr 17 11:07:05 2012 +1000

    nv30/nv40: upload shaders directly from rankine/curie init
    
    Also removes A8 surface shader hack, and implements proper shaders for
    the specific purpose.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit ec019b3a50475b7ff1b5e0a5dbe14e5ef677bd9e
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Apr 17 09:30:49 2012 +1000

    Keep a single buffer for random accel data, rather than 3 different ones
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit fb3a36b1e5af0f81bb266da894d3442eed8e4e55
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Mar 28 16:38:30 2012 +1000

    nve0: initial exa/xv acceleration for kepler chipsets
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 95be16d8cd88db1ace0ac4568b4c67b51fd30fd9
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Mar 29 19:55:27 2012 +1000

    nvc0: create scratch buffer before initialising m2mf
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 4896c87484e1cf1e5421de377b6b83890948664d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Mar 29 19:47:21 2012 +1000

    nvc0: switch to kepler's subchannel assignments (see note)
    
    This will bust for kernels with nouveau ABI version < 1.0.0... It should
    be possible to add compat for 0.0.16 however...
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 4225b486cb8ab98d27ba23874096ff0879d45575
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Mar 29 15:56:02 2012 +1000

    nvc0: tidy and cull a heap of fermi init (stuff in default grctx)
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 007dd62a8c5244bc5e71fe8f32520fb35b67a237
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Mar 29 15:28:03 2012 +1000

    nvc0: punt shaders out to a header file
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 1c7651532975cf738b3aac4ec3c3b46187e24eea
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Mar 29 14:25:15 2012 +1000

    nvc0: do tic/tsc binding only once, at startup
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 180d8778764913ed061e68520603c0925477faba
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Mar 29 14:21:25 2012 +1000

    nvc0: replace direct inline m2mf with inline helper to do the same
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit e70d801ae9287eab5e82f4d467dc8cd4be1b31a8
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Dec 9 18:15:32 2011 +1000

    WIP: port to new libdrm
    
    calim: nv50,nvc0/xv: fix src_w/h width/height confusion

commit ab7291d368ddc66ad21c5ad5caa0faeee42ccaf1
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Mar 21 14:56:55 2012 +1000

    xv: don't try to init textured video without 3d engine object
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit fe7e0425a4a43b2a7d4743a0a90a86724c3b6775
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Mar 12 11:59:29 2012 +1000

    recognise kepler
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit f5d1cd2cb6808838ae1a188cef888eaa9582c76d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Mar 6 08:16:51 2012 +1000

    remove use of xf86PciInfo.h, deprecated now apparently
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 248de8cdbd6d0bc062633b49896fa4791148cd3b
Author: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
Date:   Thu Feb 16 00:45:24 2012 +0100

    dri2: Fix corner case crash for swaplimit > 1
    
    If a swaplimit > 1 is set on a server which
    supports the swaplimit api (XOrg 1.12.0+),
    the following can happen:
    
    1. Client calls glXSwapBuffersMscOML() with a
       swap target > 1 vblank in the future, or a
       client calls glXSwapbuffers() while the swap
       interval is set to > 1 (unusual but possible).
    
    2. nouveau_dri2_finish_swap() is therefore called
       only at the target vblank, instead of immediately.
    
    3. Because of the deferred execution of
       nouveu_dri2_finish_swap(), the OpenGL client
       can call x-servers DRI2GetBuffersWithFormat()
       before nouveau_dri2_finish_swap() executes and
       it deletes pixmaps that would be needed by
       nouveau_dri2_finish_swap() --> Segfault --> Crash.
    
    Prevent this: When a swap is scheduled into the
    future, we temporarily reduce the swaplimit to 1
    until nouveau_dri2_finish_swap() is done, then
    restore it to its original value. This throttles
    the client inside the server in DRI2ThrottleClient()
    before it can call the evil DRI2GetbuffersWithFormat().
    
    The client will still be released one video refresh
    interval before swap completion, so there is still
    some potential win.
    
    This doesn't affect the common case of swapping at
    the next vblank, where this throttling is not needed
    or done.
    
    Signed-off-by: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 247465ec5e21ce7151ef1e6a3e7644bc74d48a5b
Author: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
Date:   Thu Feb 16 00:45:23 2012 +0100

    dri2: Reimplement hack for triple-buffering on old X-Servers.
    
    X-Servers before 1.12.0 don't have the DRI2SwapLimit()
    API. On these, default to a swaplimit of 1 - double-buffering.
    
    This patch implements support for swap limit of 2,
    triple-buffering, on old x-servers via Francisco Jerez
    previous hack:
    
    Return DRI2SwapComplete() before the swap has completed,
    so clients don't get blocked on the pending swap. This
    allows for a "triple-buffering look-alike" behaviour, but
    breaks the swap scheduling and timestamping defined
    in the OML_sync_control spec, so applications which
    rely on conformant behaviour will break with a swap
    limit of 2 on pre 1.12.0 x-servers.
    
    Signed-off-by: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit a1902ffaab1f6807fdaac0fce49f784e7208d1a5
Author: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
Date:   Thu Feb 16 00:45:22 2012 +0100

    dri2: Allow vblank controlled swaps for redirected windows. Part II
    
    This part implements proper throttling for clients. For
    vblank synchronized blits, it defers DRI2SwapComplete()
    until 1 vblank after the framebuffer blit is submitted to
    the gpu.
    
    Rationale:
    
    For unredirected windows, this is the earliest time the
    "blit swap" can complete, as blits are submitted one vblank
    before the target vblank and synchronized with vblank in the
    gpu. This makes swap completion timestamps at least reasonable.
    
    For redirected windows, the compositor will probably pick
    up the "blit swapped" frontbuffer pixmap of the window quickly,
    but defer its own recomposition to the next vblank, at least
    if sync to vblank for the compositor is on.
    
    Signed-off-by: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit c8572d329014afc0c79b5765468dcdfb65be0868
Author: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
Date:   Thu Feb 16 00:45:21 2012 +0100

    dri2: Allow vblank controlled swaps for redirected windows. Part I
    
    Make sure that swaps for redirected windows under a
    compositor are still scheduled via vblank events, to
    avoid effects like 2900 fps swaps under a compositor.
    
    See discussion with Francisco Jerez at:
    
    http://lists.freedesktop.org/archives/nouveau/2011-September/009278.html
    http://lists.freedesktop.org/archives/nouveau/2011-September/009292.html
    
    This is part I of the agreed upon band-aid, in a separate patch.
    
    It allows to use vblank related functions on redirected
    windows and thereby fixes functions from sgi_sync_control
    and oml_sync_control extension, e.g., glXWaitForMscOML(),
    glXGetSyncValuesOML(), glXWaitVideoSyncSGI, ...
    
    Signed-off-by: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 919643888045b102f3e10dfdeb6210ab14b6ecab
Author: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
Date:   Thu Feb 16 00:45:20 2012 +0100

    dri2: Fixes to swap scheduling.
    
    Fix some small off-by-one errors and a mismatch
    between 32 bit kernel interfaces for vblank count
    and 64 bit dri2 interfaces for target_msc et al.
    
    Return corrected target_msc to swap scheduling in
    x-server.
    
    A revised version of the patch discussed here:
    http://lists.freedesktop.org/archives/nouveau/2011-September/009143.html
    
    Signed-off-by: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 5ede4538366a352aa9726560f8d42e85df4aec82
Author: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
Date:   Thu Feb 16 00:45:19 2012 +0100

    dri2: Update front buffer pixmap and name before exchanging buffers
    
    Buffer exchange assumes that the front buffer pixmap and name
    information is accurate. That may not be the case eg. if the window
    has been (un)redirected since the buffer was created.
    
    This is a translation to nouveau of a fix that was originally developed
    by Ville Syrjala <syrjala@sci.fi> for the ati/radeon ddx to fix the
    same bug there.
    
    See thread at:
    
    http://lists.x.org/archives/xorg-devel/2011-May/021908.html
    
    Fixes FDO bug #35452.
    
    Signed-off-by: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 6fdf60b7288d49f889c80705aabc1db3bc327ba3
Author: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
Date:   Thu Feb 16 00:45:18 2012 +0100

    dri2: Add support for DRI2SwapLimit() API.
    
    Uses the new DRI2SwapLimit() API of X-Server 1.12+
    to allow to change the maximum number of pending
    swaps on a drawable before the OpenGL client is
    throttled by the server.
    
    The new optional xorg.conf parameter "SwapLimit"
    allows to select a new swap limit >= 1. The default
    swap limit is 2 for triple-buffering on XOrg 1.12+,
    1 for double-buffering on older servers, as we can't
    change the swap limit there.
    
    Signed-off-by: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 820916e722db2997a53128f2f370d14a02d4401c
Author: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
Date:   Thu Feb 16 00:45:17 2012 +0100

    dri2: Implement handling of pageflip completion events.
    
    Requests pageflip completion events from the kernel.
    Implements pageflip completion handler to finalize
    and timestamp swaps.
    
    Completion handler includes a consistency check, and
    disambiguation if multiple crtc's are involved in a
    pageflip (e.g., clone mode, extendend desktop). Only
    the timestamp of the crtc whose vblank event initially
    triggered the swap is used, but handler waits for flip
    completion on all involved crtc's before completing the
    swap and releasing the old framebuffer.
    
    This code is almost identical to the code used in the
    ati/radeon ddx and intel ddx.
    
    Signed-off-by: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 4da68cedbefef4f72c00bb088e179071490882c8
Author: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
Date:   Thu Mar 1 19:11:14 2012 +0100

    dri2: Fix can_exchange() to allow page-flipping on more mesa versions.
    
    can_exchange() returns false and thereby prevents page
    flipping on some drawables where page flipping would
    work fine. This due to non-matching drawable depths values
    between front buffer pixmap and back buffer pixmap, because
    front buffer pixmaps inherit the depth of the screen, typically
    24 bits, whereas the depth value of back buffer pixmaps for a
    given RGB8 or RGBA8 visual depends on the mesa version in use,
    either 24 bits or 32 bits.
    
    Use bitsPerPixel instead of depth to decide if drawable
    is flippable. This will still catch really incompatible
    formats like 32 bpp vs. 16 bpp buffers.
    
    Tested for screen DefaultDepth 24 and also 30 bits
    (for RGB10 framebuffers) on NV-50.
    
    The problem was fixed in the same way in the ati & intel ddx.
    
    Signed-off-by: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit b0d7f4ddd94154491d04dcb9698d63d61e9240dc
Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
Date:   Mon Jan 9 15:17:27 2012 +0100

    dri2: CreateBuffer format may be 0, use depth in that case

commit 3d9f6b32e0ad72dc8c7db07d039d87e83d8fdb1d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Dec 9 17:45:31 2011 +1000

    nv50/xv: bump max dims to 8k
    
    Untested, but I don't see why this wouldn't work...

commit 57c62228e2e67370feeeb421c369fbf940d30ca4
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Dec 9 17:44:07 2011 +1000

    xv: stop using custom m2mf code

commit ad402333157c437ccd2c639f5b3f3bcb81e78d6c
Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
Date:   Sat Dec 10 13:32:24 2011 +0100

    dri2: fix allocation of Z16 depth attachments

commit 3d2a752ca8aafee5e1e94dabfd7deec439890e95
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Dec 1 11:31:49 2011 +1000

    move away from libdrm's BEGIN_RING (and variants) macros
    
    subchan auto-assignment is now gone.

commit b6cfdc01aeb5c2ab401ee81fff66bd0560abdfcc
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Dec 1 11:25:10 2011 +1000

    Append _CLASS to object class id definitions
    
    I want to be able to use ring macros of the same name

commit 1dadb5826363d0d8ed1a72209be18277550f8345
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Dec 1 09:06:24 2011 +1000

    exa: create general m2mf rect copy for each chipset, use for UTS/DFS
    
    No point having duplicated UTS/DFS logic in each implementation.  This also
    splits nv50 out into its own code, in preparation for it being made to not
    use relocs at all.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit b5534a15a5f5e1c3bd6c92e3ed8391ff628c09bb
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Wed Nov 30 18:56:54 2011 +0100

    fix typo in conversion to rnn headers

commit 5975ce34a12d1943b2852d0f5fbe09358754c2ad
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Nov 30 17:40:02 2011 +1000

    convert entire ddx to rnn headers

commit 9fa0c6c74d0b9f7d66ebe3c99184eaa13abeb1a0
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Sun Nov 6 20:32:10 2011 +0100

    Default to 16bpp for low memory cards.

commit 5aa30ae6554c957609929ef29d1b27c89e9a7f06
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Sun Nov 6 20:32:09 2011 +0100

    nv50/exa: wait for enough space for at least one composite operation

commit 3d54426c4833a7e058e50624452f89139921e64b
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Sun Nov 6 20:32:08 2011 +0100

    add missing return in nv50_accel_init failure path

commit d575a28a5020ff083836d3d1cf50018a99f49c9f
Author: Maarten Lankhorst <m.b.lankhorst@gmail.com>
Date:   Sat Oct 8 10:33:20 2011 +0200

    dri2: Add vdpau driver name entry
    
    libvdpau has a driver loading mechanism that looks for a dri2 driver
    first before falling back to nvidia, so lets use that.

commit 656cfe3bdb8b487827b710a0cea35ae1bcd5044e
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Sat Sep 10 23:14:53 2011 +0200

    xv: support AI44/IA44
    
    It's needed for osd in mplayer's xvmc output.

commit 169512fbe91f0671a90dfee5e280357f0a4ef701
Author: Maxim Levitsky <maximlevitsky@gmail.com>
Date:   Tue Aug 23 13:10:59 2011 +0200

    dri2: Disable the "exchange" swapbuffers path for the moment (bug 35930).
    
    Allow page flipping only for scanout buffer for now as simple swapping
    between off-screen pixmaps confuses compiz because there is no
    syncronization method to tell it about that swap
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit b806e3f97a73701f057c45b1f45233e69e19f113
Author: Bryan Cain <bryancain3@gmail.com>
Date:   Wed Jul 20 13:48:36 2011 -0500

    g3dvl: update for compatibility with latest pipe-video branch in Mesa
    
    Signed-off-by: Bryan Cain <bryancain3@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit de9d1ba7efeba64f319efa00df183d3cb78f24af
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Tue Jul 19 00:35:38 2011 +0100

    drmmode_display: Resolve missing brackets
    
    Correct some missing/misplaced brackets in drmmode_pre_init()
    The issue was exposed when trying a 4 monitor desktop using two
    cards/gpus
    
    Resolves https://bugs.freedesktop.org/show_bug.cgi?id=39099
    
    Reported-By: Damian Nowak <nowaker@geozone.pl>
    Tested-By: Damian Nowak <nowaker@geozone.pl>
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit ef4957492956df54fafa6c75d576a07ce678ea0a
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 11 12:48:34 2011 +1000

    kms: fix multiple rotations in noaccel mode

commit ab89aa022f0c78154e525b5f5787feee8024171f
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jun 17 10:10:09 2011 +1000

    nvc0: accept 0xdx chipsets
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 7dd8987b8b69f56d04a199207122d2e51b9caa6e
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jun 17 10:07:36 2011 +1000

    nvc0: assume 0x9097's presence on all chipsets
    
    This appears to be the case thus far, and is what the 3D driver does.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 98ee2105dbd8685e59c1967a587fccb6135743ac
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon May 30 10:10:58 2011 +1000

    kms: clear new fb to black on fb resize

commit 8378443bd3b26b57ef2ae424a700e01ead813d33
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Mar 24 02:13:12 2011 +1000

    nv50-nvc0/exa: fix bug causing surface state to not be reemitted after flush
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 92db2bc192a074d4b7fc3e9c16e9aa62a8deaeb6
Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
Date:   Thu Mar 3 22:17:23 2011 +0100

    nvc0/accel: allow nvc1,nvc3,nvc4 in 3D engine init and use 9097

commit ace98a492353e6de712f4f717e6d3f562e3591f0
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Mar 1 13:54:38 2011 +1000

    dri2: return an error rather than crashing if we can't allocate a buffer
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit bc5dec2ca7ca7edc340a99bd73946e228117dfd8
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Feb 24 15:15:00 2011 +1000

    dri2: disable page flipping if any crtc is rotated
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit c123618470b5ff32c6377a4cae0f148d4a518a5d
Author: Francesco Marella <francesco.marella@gmail.com>
Date:   Thu Feb 17 03:48:16 2011 +0100

    Fix gcc 4.6.0 set but unused variable warnings
    
    Signed-off-by: Francesco Marella <fmarl@paranoici.org>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 3531b2aa13e9c78288d96fe5e1492f0b6e899b00
Author: Francesco Marella <francesco.marella@gmail.com>
Date:   Thu Feb 17 03:47:46 2011 +0100

    Page flipping man page update
    
    Signed-off-by: Francesco Marella <fmarl@paranoici.org>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 85a706df6f7986158c964e3afd0aa8e352ff5cea
Author: Francesco Marella <francesco.marella@gmail.com>
Date:   Thu Feb 17 03:47:08 2011 +0100

    Update configure.ac with autoupdate
    
    Signed-off-by: Francesco Marella <fmarl@paranoici.org>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 42c16ff33dcca6cd9bae62fe0d71a40452e03581
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Feb 16 13:51:54 2011 +1000

    nv50: attempt to allocate compressed Z buffers
    
    This should automagically fallback to the non-compressed version on kernels
    that don't support compression.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 46acb7e095e9c0d55b90070b77c64679fcfb9d4e
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Sun Feb 13 20:46:42 2011 +0100

    fix drmSetMaster error reporting
    
    On error, drmSetMaster returns -1 and sets errno.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 54764980411b4b8124c36edb8730612b04f292a9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Feb 10 20:12:07 2011 +0100

    Also flush from the BlockHandler.
    
    - The fact that commit 02c50db307a4e4eeb87f7db5d401bc53cce3b21f
      fixed missing text for some people proves this is needed.
      That commit should have only improved latency a bit.
    - The FlushCallback is still needed for DRI2 texture_from_pixmap.
    - See bugs.fd.o #33977 for discussion.
    
    Signed-off-by: Maarten Maathuis <madman2003@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 02c50db307a4e4eeb87f7db5d401bc53cce3b21f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Feb 7 19:37:47 2011 +0100

    exa: Flush (S)IFC to the frontbuffer immediately.
    
    This avoids high latency while typing with core fonts for example.
    
    Signed-off-by: Maarten Maathuis <madman2003@gmail.com>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit e4fb9fd2f790ed66e4be61ca00d55522525619f4
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Feb 9 13:46:32 2011 +1000

    dri2: allow page flipping to be disabled in xorg.conf
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 38e8809bb415bae5c182fc79c8fc62992c5e4ed0
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jan 17 09:14:31 2011 +1000

    nvc0: merge initial acceleration support
    
    Squashed commit of the following:
    
    commit e8ce1ef351ee51bec51211dca6fda88fdbfbefee
    Author: Ben Skeggs <bskeggs@redhat.com>
    Date:   Mon Jan 17 08:55:04 2011 +1000
    
        fix hardcoding of nvc0 wfb path
    
    commit b414b1f948da18d96309bad84c54948d877efaa6
    Author: Ben Skeggs <bskeggs@redhat.com>
    Date:   Mon Jan 17 08:52:53 2011 +1000
    
        general tidy-ups in preparation for merge to master
    
    commit 73bf71d5de0cb990178a1d2a31e0ea1717c214a4
    Merge: fb499a4 b795ca6
    Author: Ben Skeggs <bskeggs@redhat.com>
    Date:   Mon Jan 17 08:47:40 2011 +1000
    
        Merge branch 'master' into nvc0
    
    commit fb499a4e9d95650dc89f4c1820b94d01344733f6
    Author: Ben Skeggs <bskeggs@redhat.com>
    Date:   Mon Dec 20 12:54:43 2010 +1000
    
        nvc0: switch to "standard" RING macros
    
    commit 64f0e1d0e9e29c5437ad4e52d01ccfb0b03a2ae9
    Merge: eba7e17 c2092a4
    Author: Ben Skeggs <bskeggs@redhat.com>
    Date:   Mon Dec 20 11:58:42 2010 +1000
    
        Merge branch 'master' into nvc0
    
        Conflicts:
        	src/nv_dma.c
    
    commit eba7e173a5006ff50b950d0e8b8154564471a9ce
    Author: Ben Skeggs <bskeggs@redhat.com>
    Date:   Fri Dec 17 11:04:40 2010 +1000
    
        nvc0/xv: use mad in nv12 shader, rather than mul+add
    
        Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
    
    commit b025ceb40a5e94a3657f3c7f76044c49a1a05e8d
    Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
    Date:   Thu Dec 16 23:34:29 2010 +0100
    
        nvc0: fix offset of 17bc buffer
    
        I had messed it up in 5e4da3451c3c0f645f98fea7fb0ce2629b1bfd2f.
    
    commit 6ff5a9a7f3411ef218f17fa481c583596ffde2cc
    Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
    Date:   Thu Dec 16 01:07:25 2010 +0100
    
        nvc0/xv: bind textures for the FP, not the TEP
    
    commit 5e4da3451c3c0f645f98fea7fb0ce2629b1bfd2f
    Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
    Date:   Thu Dec 16 01:02:58 2010 +0100
    
        nvc0: switch to rnn headers
    
    commit 0839041e79dbb0e629326d0f240220b33921db1a
    Author: Ben Skeggs <bskeggs@redhat.com>
    Date:   Wed Dec 15 16:42:41 2010 +1000
    
        nvc0/exa: fix m2mf dfs
    
    commit 88c1c43302331e1cb8b7035bfb4677a5e7da3090
    Author: Ben Skeggs <bskeggs@redhat.com>
    Date:   Mon Dec 13 12:00:23 2010 +1000
    
        nvc0: add Xv implementation
    
    commit ad5b4cfe388a102a0c93f7281cb4bba532b1796b
    Merge: 1942a81 b6cb21b
    Author: Ben Skeggs <bskeggs@redhat.com>
    Date:   Wed Dec 15 14:57:04 2010 +1000
    
        Merge branch 'master' into nvc0
    
    commit 1942a81c0eb592972d4a3e8c46b80192ae8d1a59
    Author: Ben Skeggs <bskeggs@redhat.com>
    Date:   Thu Dec 9 12:48:27 2010 +1000
    
        nvc0: call grobj_alloc for all used object classes
    
        Though the hardware has no concept of object handles any more, the nouveau
        DRM still uses this call to know what engines are in use.
    
    commit 0c670a6d406fe0a57373fa9e03005be6f28ecc3e
    Author: Ben Skeggs <bskeggs@redhat.com>
    Date:   Thu Dec 9 12:44:41 2010 +1000
    
        nvc0: don't try and create DmaNotifier0
    
    commit 5d3d20d908a50ad7742567d58969c7f12dd944f7
    Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
    Date:   Thu Dec 9 01:36:32 2010 +0100
    
        nvc0: change tile_mode to contain 0xZYX instead of 0xZY
    
        Warning: the kernel will not like that (EVO)
    
    commit dd7fd8263e0e9f92412fb20086e4c8acf8cab099
    Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
    Date:   Thu Dec 9 00:29:58 2010 +0100
    
        exa: don't fall back to nv04 m2mf if nvc0 m2mf fails
    
    commit b4cf5a8f2276392945c2530f0d6fe96b5ab4b5da
    Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
    Date:   Thu Dec 9 00:07:59 2010 +0100
    
        nvc0/exa: remove noisy debug messages
    
    commit 5419ef6d2cfabb7329982cb8dbdb5bbc8e973fe3
    Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
    Date:   Wed Dec 8 23:55:51 2010 +0100
    
        nvc0/accel: remove unneeded scratch method 0x3420 init
    
        It was intended be read by a MACRO method to get the address for
        constants upload.
    
    commit 178356391ff6831599eba257a5912079894641a1
    Merge: 8573280 8bb8231
    Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
    Date:   Thu Dec 9 01:31:40 2010 +0100
    
        Merge remote branch 'origin/master' into nvc0
    
        Conflicts:
        	src/drmmode_display.c
        	src/nouveau_exa.c
        	src/nv_driver.c
        	src/nv_type.h
    
    commit 8573280871401e29f27fa24d0b7c6ac5e35b2cc1
    Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
    Date:   Sat Jul 3 14:27:36 2010 +0200
    
        nvc0: initial implementation
    
        EXA should work, Xv not yet done.

commit b795ca6e97fae9735843748585401098dae1c3e1
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jan 7 13:33:36 2011 +1000

    nv50: fix pitch of linear scanout buffers
    
    Un-breaks NoAccel on these chipsets.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit dc89dac734167bcbc667b39ca6ee2043871a60bf
Author: Xavier Chantry <chantry.xavier@gmail.com>
Date:   Sun Dec 19 23:17:34 2010 +0100

    nv04/exa: kill useless WAIT_RING
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit b76b43928bf4dcf5ce3a4b58c7fefe780070c0d3
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Dec 21 16:25:23 2010 +1000

    add back generic include of nouveau_pushbuf.h
    
    So places that FIRE_RING() still work.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit c2092a458401377f421d9bdfe1d97ce580b99508
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Dec 20 11:50:57 2010 +1000

    include nv04_pushbuf.h for ring macros, rather than nouveau_pushbuf.h
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit aa2821a42706ac7b69703d1869e2d00a4ced9f4b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Dec 20 11:53:53 2010 +1000

    kill NVSync(), it's rather useless
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 1fc564fe3494cf0abcc848d0e90bf2232f8fd272
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Dec 16 09:49:09 2010 +1000

    nv50/xv: use mad in nv12 shader, rather than mul+add
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit b6cb21b91f7d0409794a14ddbdd606728d4d49e3
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Feb 8 12:51:47 2010 +1000

    set canDoBGNoneRoot if building against new enough server

commit 11510f9ce8c9eab15e7f6d5962b83fc0052c8619
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Dec 14 15:39:01 2010 +1000

    nv50/xv: implement brightness/contrast/saturation/hue controls
    
    Adapted from the code in xf86-video-ati.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 214ea264cdb386520a1308a29f204e441f349cb1
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Dec 14 14:42:24 2010 +1000

    nv50/xv: kick csc parameters out into a constant buffer
    
    These were previously inlined into the shader, which is simple, but makes
    implementing brightness/contrast adjustments impossible.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 8bb8231236a6b877895663aeaa9cef731d67fe68
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Nov 30 15:27:36 2010 +1000

    dri2: fix certain clients blocking forever when sync-to-vblank unavailable
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit f29afe65b67c9b89ceba421d9b3aee590f7ded20
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Nov 29 09:23:35 2010 +1000

    dri2: don't return failure from get_msc if sync-to-vblank isn't available
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 4b1d26578116f4d1745dd92a7c99413972a2bedf
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Nov 25 21:33:46 2010 +0100

    dri2: Don't return failure from schedule_wait if sync-to-vblank is unavailable.
    
    Reported-by: Ben Skeggs <bskeggs@redhat.com>
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 1143e7a97dce1b741376e178b73b8b766e03849a
Author: Jesse Adkins <jesserayadkins@gmail.com>
Date:   Tue Oct 26 16:05:32 2010 -0700

    Purge cvs tags.
    
    Signed-off-by: Jesse Adkins <jesserayadkins@gmail.com>
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 22020457f43eceaf26532ecb50e46d743f4a691f
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Tue Oct 26 00:24:06 2010 +0200

    dri2: Fix throttling on occluded drawables.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 9737a812aacbc544b93eeaa031cf1c2e8adbd661
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Oct 25 10:37:08 2010 +1000

    kms: initial pass at supporting zaphod-mode
    
    This works ok from some simple testing, there's undoubtedly things that
    will need polishing still however.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit d40c16f5497739c0215f37566db1651a74cb20ba
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sat Oct 23 02:20:30 2010 +0200

    dri2: Fix build on X server 1.8.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit a4d580bf05d7aac1d486e5d1ba9a2201c026e5f5
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Fri Oct 22 23:09:30 2010 +0200

    Bump the required X server version to 1.8.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit d0f2e16bc35660d01d3cd20a770cf8e613ab5323
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Fri Oct 22 23:06:28 2010 +0200

    dri2: Report damage on page-flipped drawables.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit c61e8d03161adcfbba4162172153814accf9e86b
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Fri Oct 22 23:05:24 2010 +0200

    Make the sync-to-vblank helpers take a box as argument.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit a685a5c3be12f3e95a6ec1140af115e7ef28fcaa
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Wed Oct 13 18:45:04 2010 +0200

    dri2: Implement the ScheduleWaitMSC/GetMSC hooks.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit eb83c830c87bce345748edef3b50660246143db7
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Oct 21 22:57:08 2010 +0200

    dri2: Add pageflip/exchange support.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit c88f13e25b0040c1dd0f93e0ac40f62a6005ce59
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Oct 14 22:25:50 2010 +0200

    Allocate a tiled scanout on pre-nv50 too.
    
    Pageflip between tiled and non-tiled surfaces isn't such a good idea.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 4642d71bdffc04ce0dd458225541940c65f5443d
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Oct 14 22:17:58 2010 +0200

    dri2: Give out buffers ready for scanout.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 75daada678d03d2e162f8003a6f2edcbe0525f92
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Oct 14 22:32:54 2010 +0200

    Restructure tiled pixmap allocation in a single place.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 70f0d2c886ceaa965ca4864788f4dd8e8f757a92
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Oct 21 22:55:02 2010 +0200

    dri2: Add sync-to-vblank support.
    
    Note that you need a recent enough kernel for it to work. Use the
    "GLXVBlank" option to enable it (it defaults to disabled for now).
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 72dd4899ff036b09e3680ed2e09b3dbae3a7ba71
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Oct 21 22:31:45 2010 +0200

    nv04-nv40/exa: Make the copy hook blit downwards for non-overlapping regions.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 21ed642d3f76f286f23cd64ca817038ec94a1bf6
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Wed Oct 13 18:22:22 2010 +0200

    Make the sync-to-vblank helpers more consistent.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 258e483d47f0f63155be18981c1118261f7675a8
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Oct 21 22:41:24 2010 +0200

    kms: Register a wakeup handler to poll vblank/pageflip/udev events.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 4f42708c26fa57bac7854701a6e757958c8d0654
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Oct 10 04:39:27 2010 +0200

    Update to the last libdrm API.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 8c8f15c9d3a31c35bf2ef20faf8c4133295a678f
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Oct 10 04:36:17 2010 +0200

    nv10-nv40/exa: Fix tiled pixmap pitch alignment calculation.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit a47c274f329b3b8bfbdcf155d6d832599d823dc8
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Oct 10 04:43:25 2010 +0200

    Fix for the last xserver ABI.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 9a5142fae6e1a0a470352f511427916e6fa01b9c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Aug 27 21:11:59 2010 +0200

    nv50/exa: Stop using wfb by default, but add an option to enable it.
    
    - Some scenarios, such as those heavy in core font rendering might prefer wfb.
    - Other (modern) situations are better of with wfb disabled.
    
    Signed-off-by: Maarten Maathuis <madman2003@gmail.com>

commit d5a6f103113985c50bbe749ed341de34af1b47a5
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Tue Sep 28 21:49:48 2010 +0200

    dri2: Throttle frontbuffer flushes.
    
    There was no need for throttling until the hardware interchannel sync
    kernel changes because the pushbuf IOCTL blocked to sync the GL and X
    channels anyway.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit f1ac413d1d3dec2ccf63d4a8c79b9bd9ea578dcf
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Sep 20 08:05:00 2010 +1000

    nv50: use 0x8697 on NVAF
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 14c93acfc3fde04415e1c6a2a056465d15c86315
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Sep 17 13:17:37 2010 +1000

    noaccel: fix rotation, as well as an assert during server shutdown
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 065576d5df0df4da61050d789f548801656b62d5
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Aug 26 13:22:33 2010 +1000

    dri2: remove explit flush from copy_region()
    
    Unnecessary now that we kickoff from within the flush callback chain.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 34025f0dc9284873d4bf7e4f547ed69fc562a3c9
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Aug 26 13:19:39 2010 +1000

    kickoff from the flush callback chain
    
    This is a port of intel commit: 69d65f9184006eac790efcff78a0e425160e95aa
    
        Submit batch buffers from flush callback chain
    
        There are a few cases where the server will flush client output buffers
        but our block handler only catches the most common (before going into select
        If the server flushes client buffers before we submit our batch buffer,
        the client may receive a damage event for rendering that hasn't happened yet
    
        Instead, we can hook into the flush callback chain, which the server will
        invoke just before flushing output.  This lets us submit batch buffers
        before sending out events, preserving ordering.
    
        Fixes 28438: [bisected] incorrect character in gnome-terminal under compiz
        https://bugs.freedesktop.org/show_bug.cgi?id=28438
    
        Signed-off-by: Kristian Høgsberg <krh@bitplanet.net>
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 390f1c86d9583f4ceabd407ee47410073c2a1b55
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Aug 20 09:48:32 2010 +1000

    nv50/xv: support UYVY
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 00d390952c912d4e9fc2c962caaeb90bf563d5b1
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Aug 13 22:24:26 2010 +0200

    nv50/xv: Fix the uncommon codepath to use width/height variable.
    
    - The common codepath should be the correct one, because that is
      triggered often, while the other is rare.
    - This isn't neccesarily a problem, but let's be on the safe side.
    
    Signed-off-by: Maarten Maathuis <madman2003@gmail.com>

commit f5b486dd237679aec1987985f9ecffc6a4fd3105
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Aug 13 22:16:51 2010 +0200

    nv50/xv: We have 18 relocs, not 16, adjust MARK_RING.
    
    Signed-off-by: Maarten Maathuis <madman2003@gmail.com>

commit 1cb6c91a9afe88d73f8a1180b00f56a9150a16ed
Author: Roy Spliet <r.spliet@student.tudelft.nl>
Date:   Sat Aug 7 20:59:06 2010 +0200

    nouveau_exa.c: move line_count logic out of UTS/DFS loop
    
    Signed-off-by: Roy Spliet <r.spliet@student.tudelft.nl>
    Signed-off-by: Maarten Maathuis <madman2003@gmail.com>

commit 9f50b62229d5984ee5c16bc54953c7f8e2d5e575
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Aug 6 08:28:34 2010 +1000

    nvc0: recognise these chipsets, and allow NoAccel mode on them
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit b96170a4e51c1d3167601210ca31e98283c02885
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Aug 5 00:40:40 2010 +0200

    nv10/exa: Bump maxX/maxY to 4096/4096.
    
    This way we can do accelerated 2D on larger pixmaps, it will still
    fall back to software when we hit the 2048x2048 texturing limit in a
    composite operation.

commit 321eb2df5c8b1da4d6469037dd1d8888b508fabd
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Wed Aug 4 13:11:24 2010 +0200

    Revert "nv04-nv40/exa: Match the blob behavior more closely on PrepareCopy."
    
    This reverts commit 9de0d97bd2fc2ee8800d48b5340a3d495525ad3e. Unnecessary
    after kernel commit "drm/nouveau: Ack the context switch interrupt before
    switching contexts.".

commit db98ad23633958e52f84501c5a2061d42d346b64
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Tue Jun 15 15:32:36 2010 +0200

    dri2: Fix for the last DRI2InfoRec ABI.
    
    Just pre-fill the whole structure with zeros to avoid future
    segfaults.

commit 9a3d0ab43f6335ab6cd48be4aa2f4f728386b386
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jun 11 21:58:38 2010 +1000

    call NVEnterVT from CreateScreenResources
    
    We need to grab DRM master here for things to work, so we may as well call
    NVEnterVT as we used to in NVScreenInit up until the previous commit.
    
    Fixes server regeneration.

commit 964eeac6dc2209da6aa8861aa8b0bc028700ab3d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 10 09:38:19 2010 +1000

    fix for server 1.9

commit c079408e287ad09e954fa3985f95912c02cf06bc
Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
Date:   Thu Jun 10 01:07:49 2010 +0200

    nv50/accel: fix perspective interps in YUV to RGB shader

commit 65153490f7d74d45a92adbd9c5e2bbe11c884b00
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Jun 9 16:12:28 2010 +1000

    use libc directly for [cm]alloc/free

commit 2958cf464dca9761f0fa21c8dd2d8fa8c8a96791
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu May 27 10:06:47 2010 +1000

    nv50/exa: rip out compat defines, we depend on 1.7 anyway

commit af40bf0af47ebcb7de2dc418429f0b56f8c04d15
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed May 26 16:11:01 2010 +1000

    nv50/exa: new nouveau_class.h has correct blend func defines

commit 8950c5b2a0d318e2568bec38a39d744b968c9b85
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed May 26 16:09:48 2010 +1000

    update nouveau_class.h

commit 4b8f1a082069a17555d4142003213cf83d4e5464
Author: Lubomir Rintel <lkundrak@v3.sk>
Date:   Mon May 10 09:25:55 2010 +0200

    Handle startup without monitor attached more gracefully
    
    Refuse to configure a screen which has no valid modes. Otherwise X server
    would crash attempting to dereference to modes list later on.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit ac8f8d14a82ae8ba5b41fa88903edcad67f339c2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri May 7 20:51:43 2010 +0200

    wfb: use 28 bits instead of 32 bits for multiply_factor optimisation
    
    - Avoiding division in a hot code path is noticable even on an otherwise idle
    computer, but it's subject to rounding errors. If anyone knows a corner case
    and has better ideas, don't hesitate to contact me. For the moment this should
    make the problem less likely to trigger.
    
    Signed-off-by: Maarten Maathuis <madman2003@gmail.com>

commit 13c10430ba8f7b0edff3ad8aae4a97672eea4a8f
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Apr 23 14:09:35 2010 +1000

    Bump version number to 0.0.16
    
    Forgotten when the ABI broke a while back..

commit 6ff8ade0c7cd835b4172257ea310a8d88f28e757
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Apr 16 16:09:51 2010 +1000

    Add uevent support
    
    When a hotplug event is received from the kernel we should notify the
    client side to reconfigure the display.
    
    Ported to nouveau from radeon driver, based on work by ajax in intel driver.

commit 4063616938f76af8028491276039d422c0782b1b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Apr 9 20:43:51 2010 +1000

    Import latest nouveau_class.h from renouveau

commit bfb95cc0ca600135474ff02a99889b09d41b3c80
Author: Rico Tzschichholz <ricotz@t-online.de>
Date:   Thu Apr 1 20:39:23 2010 +0200

    Fix "make dist".
    
     - remove README.NV1 reference from Makefile.am
     - add nv_rop.h to src/Makefile.am
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 2462b417fc550b71f021ca9736808f8f2d1cb6f0
Author: Ben Skeggs <skeggsb@beleth.localdomain>
Date:   Mon May 4 17:04:34 2009 +1000

    xv: only use bicubic filtering when scaling >=2x

commit e2146d3b29a4bea3d584c145e3190c3313692ed9
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Mar 18 14:32:54 2010 +0100

    Fix for the latest nouveau_class.h.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 7858345b6b384e88902ccc516715156401edec04
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Mar 16 13:08:37 2010 +1000

    nv50: fix texturing from >=4GiB mark

commit 6b8b15731b7610c9d8fb3625861797a0c9fd9546
Author: Xavier Chantry <chantry.xavier@gmail.com>
Date:   Fri Mar 5 00:53:47 2010 +0100

    Remove leftover in man page and nv_const.h
    
    Signed-off-by: Xavier Chantry <chantry.xavier@gmail.com>
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit c642b9f7a13bdeecd0a83ddcbf6d6d4f2c287501
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Fri Mar 5 14:27:08 2010 +0100

    kms: Don't try to copy fbcon contents when there's no framebuffer bound.
    
    drmModeGetFB complains loudly when it's given an invalid framebuffer
    id, bail out earlier if that's the case.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit efd7a526ca1cbac10b33b9d5d4cf3e542bc9b73b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Feb 25 09:32:49 2010 +1000

    fix typo

commit 70d0a48b6c3f1a817bf850acd3bae48d063e56b9
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Feb 23 15:08:13 2010 +1000

    Protect against potential crash for unknown connector types

commit 83bbeea0d842094dd647e754608420a404eef6e3
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Feb 23 15:03:38 2010 +1000

    Add connector name for eDP

commit 29647021044463768cbfa3eead1416ef1cf27fa1
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Feb 18 14:17:57 2010 +1000

    remove drm patchlevel check, libdrm checks this for us

commit 9b4118d6d1fa488db86cd7d2875beea9cdefb096
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Wed Feb 10 18:43:39 2010 +0100

    Revert "kms: work around some bong hits with dpms"
    
    This reverts commit 98c9e4edb58374f18249e5c9c53b392fb8b4a1d1. AFAIK
    it's no longer needed.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit f7deabfec0dcec4f203f85cd8494a70fe8fa6ebb
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Feb 11 08:39:49 2010 +1000

    Pass pScreen to drmmode_fbcon_copy()

commit 43524fcbb786c5b9e9ec25776560790aec208719
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Wed Feb 10 17:58:24 2010 +0100

    dri2: Fix crashes on server regeneration.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit f50577c117c82eea05e750fecd1ff5653105c648
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Wed Feb 10 13:23:46 2010 +0100

    kms: Clean up the set_mode_major hook.
    
    The X server already takes care of restoring the previous CRTC
    parameters after a failed mode set. As a bonus this patch fixes
    RandR13 projective transforms.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit b16792b553dee41fc81d74c6e453832807e36368
Author: Marcin Kościelnicki <koriakin@0x04.net>
Date:   Tue Feb 9 20:51:17 2010 +0000

    Remove some UMS leftovers.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit c56bce93f120d0ff18895149d1984896372cdd60
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Wed Feb 10 12:31:54 2010 +0100

    kms: Don't pretend it works on xserver-1.5.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 0917665d1f2f1e76b6a0e7a4c027512f9f45f41b
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Wed Feb 10 11:48:47 2010 +0100

    kms: Kill nv_cursor_convert_cursor.
    
    Well, mostly, the remaining pitch conversion will be unnecessary soon.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit e75dd23bd28f636b4c1759633d8dbc775e799add
Author: Marcin Kościelnicki <koriakin@0x04.net>
Date:   Fri Feb 5 18:09:55 2010 +0100

    nv50/accel: Fix mangled A8+A8 shader.
    
    Turns out we used a misaligned long instruction near the end, and the
    shader was getting killed after writing R, A components. This has gone
    unnoticed since the remaining G, B outputs aren't actually used.

commit 41fc1fdec47fa824c598e1f3d828f4c8c4a2cb71
Author: Marcin Kościelnicki <koriakin@0x04.net>
Date:   Sun Jan 31 19:29:32 2010 +0000

    Update to new nouveau_class.h
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit c94544c83ef84e96f8d132ac9ff9296c22c4468e
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Jan 31 18:26:03 2010 +0100

    nv10/exa: Fix up nv11 accel.
    
    Fixes an off-by-one error made when UMS was removed.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit a397b94e32e6b0109096aba09bbe7b5dcfdd8231
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Jan 31 18:11:06 2010 +0100

    dri2: Fix for the new DRI2InfoRec ABI.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 8b5c67145a9c29cd4c82f411f15e57723d76d0c0
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Jan 31 17:43:54 2010 +0100

    nv10/exa: Fix build after the last nouveau_class.h changes.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 2630a1553d560ce2c7391bc103d4a543f7d3d0da
Author: Marcin Kościelnicki <koriakin@0x04.net>
Date:   Wed Jan 20 07:46:32 2010 +0000

    Remove nv_dripriv.h, nv_local.h

commit 2d341f7e0a0dc70a28c6091ef6919fc6c0d60561
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jan 21 14:58:37 2010 +1000

    xv: use nouveau_bo_new_tile()

commit 2a76ff1106ee8c76bd2e16a4954b3c05714d1db3
Author: David Heidelberger <d.okias@gmail.com>
Date:   Mon Jan 18 11:50:19 2010 +0100

    Remove deprecated NV1 readme

commit fe484a9b635ad56afec7be086a56c692b00dd6d1
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Jan 13 16:14:41 2010 +1000

    exa: remove nouveau_pixmap_offset()
    
    Completely useless now we don't have to try and support non-driver pixmaps.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit bbf79469a878a8ab5b4c07faadcfdc8d85ceac83
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Jan 13 16:07:13 2010 +1000

    exa: remove nouveau_exa_pixmap_{map,unmap}
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 18e3a649f7df73bc1e6d199ecf7a62ddcfe37d6e
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Jan 13 14:26:04 2010 +1000

    Check for drm+kms availability in NVPciProbe()
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 6267b85460ef364aa51a7d33006940bb00a049d9
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Jan 13 12:03:14 2010 +1000

    bump xorg-server requirement to 1.7
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit da5c0dc6040096fd12ddb6a04a22fada89115ccb
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jan 11 13:23:06 2010 +1000

    remove more unused code
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 104b3ea842d4cebd993d3e7e9d55ebcadae0cf28
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jan 11 12:59:12 2010 +1000

    exa: Remove non-driver pixmaps path
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit e8798d91eedc5d8337223b2257ca607da8a197de
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jan 11 12:48:00 2010 +1000

    Remove pNv->NVArch
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 7a6f785de1732ec0af429a0b66d5d6ba45427dcb
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jan 11 12:00:19 2010 +1000

    Remove pNv->Chipset use
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 68c1f908be5739692c9f0bde9c23f3dc2a7210ea
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jan 11 11:56:19 2010 +1000

    remove pNv->VRAMPhysical
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 06499197d6eb07a272a1812e1c8bce886798a1d7
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jan 11 11:51:14 2010 +1000

    dri1: remove DRI1 support
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 6975651b0b74dca6edaee759fb1003f65189f1df
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jan 11 10:07:11 2010 +1000

    xv: ifdef out another problematic piece of overlay support for the moment

commit 17485c234ff191cee3dd19e3dd693a80b024e189
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Jan 6 14:58:15 2010 +1000

    Initial pass at removal of non-KMS support.
    
    It's likely there's a lot more that can be cleaned up/removed as a result
    of this, we can handle that as we come across it.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
    Acked-by: Maarten Maathuis <madman2003@gmail.com>

commit 061cb284b93612848296599759b915a4d66b6d01
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jan 3 02:14:36 2010 +0100

    exa: Some compat defines for new pixman formats.
    
    Signed-off-by: Maarten Maathuis <madman2003@gmail.com>

commit 8ca5a7383aad0e0557b3c9a1e9edd5431cd509fc
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Wed Dec 30 21:46:04 2009 +0100

    start using BEGIN_RING_NI

commit b259b7ce5e57e1d20111878318b4703a14ec27ec
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 1 20:16:13 2010 +0100

    nv50: always set semaphore handle and offset
    
    - This is in preperation of using semaphores for more than one thing.
    
    Signed-off-by: Maarten Maathuis <madman2003@gmail.com>

commit 8deeed25014b36f8d60f25c7ea2509d88fcb52ae
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Mon Dec 28 18:39:16 2009 +0100

    nv50: upgrade nv50_texture.h
    
    - copy changes from mesa/src/gallium/drivers/nv50/nv50_texture.h
    - remove 2 redefinitions
    - fix R<->B rename (see df189c9efc0fbcdce816af483f0147ab635280d1
      (nv50: TIC/TSC fixes and additions) in mesa repo)

commit 1877ee268774443a58a7bb73244bd70c82d67879
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Thu Dec 24 21:29:10 2009 +0100

    nv50/exa: add support for more color formats

commit 8b3753fc34e3557b91c3bdebe7c8addfb148b3bd
Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
Date:   Wed Dec 30 18:28:25 2009 +0100

    nv50: check drawable.bitsPerPixel instead of depth to get format

commit 920a346e14cdc40efe9e89c3583d8e573e7e2f87
Author: Marcin Kościelnicki <koriakin@0x04.net>
Date:   Mon Dec 28 16:11:51 2009 +0000

    nv50: Dehexify and bring up to date with new method defines.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 7c72ac1f47e19af97c997f57012e3af12f941894
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sat Dec 26 15:56:58 2009 +0100

    nv10/exa: Fix for the latest nouveau_class.h changes.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 6992d0e7a0cb3c32b16af0b724246e44f7a35d7e
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Dec 17 19:13:08 2009 +0100

    dri: Use classic mesa on the fixed pipe cards.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 87b9916dd4b471a9b8b02f166f6553f04f219769
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Dec 23 21:53:36 2009 +0100

    kms: Remove the one-off offset of connector names compared to the kernel.
    
    - Seeing DVI-I-0 in xrandr and DVI-I-1 in the kernel logs can be a source of
    confusion.
    
    Signed-off-by: Maarten Maathuis <madman2003@gmail.com>

commit bb1947831d9a4e080b8d1e9dba086af6527ef479
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Dec 17 13:08:34 2009 +1000

    Revert "exa: map the pixmap bo after creation to ensure a useable driver pixmap"
    
    This reverts commit 740c9f3e79729e4e06c693e66826afbad9bd1ce5.
    
    To get the same effect as this commit, update to latest libdrm git.

commit 03c7d675f6d12886b6bca8e0375888ecf1b393df
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Fri Dec 11 15:47:05 2009 +0100

    dri2: Make the render targets tiled for pre-G80 cards.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 963aaeff6b414f371eff3e8ce016f7707c60f7c0
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Fri Dec 11 15:44:47 2009 +0100

    exa: Pre-G80 tiling support.
    
    For now, pixmaps will only be tiled if driver pixmaps is being used
    and we're told to with the NOUVEAU_CREATE_PIXMAP_TILED usage hint.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 41d8d511124fcbe83a3cc68aaf22c3ce0fb4eb8a
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Mon Dec 14 00:51:17 2009 +0100

    kms: Allow interlaced/doublescan modes.
    
    After bcafdfbed6 (an X server commit) we have to explicitly state we
    can handle them.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 740c9f3e79729e4e06c693e66826afbad9bd1ce5
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 12 22:27:30 2009 +0100

    exa: map the pixmap bo after creation to ensure a useable driver pixmap
    
    - Large pixmaps (think of 8000x8000 pixmaps on NV50) will cause crashes
    otherwise because exa assumes driver pixmaps to be mappable. Handling this
    elsewhere is problematic.
    
    Signed-off-by: Maarten Maathuis <madman2003@gmail.com>

commit 0b5120cf8ef2528a15d88054afdc6fc33eb521f5
Author: Ben Skeggs <skeggsb@beleth.(none)>
Date:   Mon Dec 7 15:31:53 2009 +1000

    Allow texturing from GART
    
    Unfortunately NV_CONTEXT_SURFACES_2D on most cards (probably only PCIE cards
    work actually, but that's not confirmed) rejects a GART DMA object, so the
    usefulness is a bit more limited than I'd hoped.

commit 60a394222b410da8bb832935fc525132218b4d94
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Dec 3 21:14:00 2009 +1000

    nv50: avoid touching 0x16b0 on 0x8597, it causes a DATA_ERROR from the GPU
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 95fc663d5fb653fc0a50aa4d589bbf3b9c79e928
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Nov 26 13:10:45 2009 +1000

    shadowfb: fix segv on fb resize
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 1cf0cfa926dd78698ff8b8c2d776bcdaa6a867bd
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Nov 26 10:04:43 2009 +1000

    kms: zfill fb if we have no accel to do copy, better than random garbage

commit 92578fb4db0feb549bea82d0874ba0e39a2b1ae2
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Nov 5 18:30:28 2009 +0100

    nv10/exa: Rename VIEWPORT_SCALE to VIEWPORT_TRANSLATE.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 9de0d97bd2fc2ee8800d48b5340a3d495525ad3e
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Nov 5 13:29:09 2009 +0100

    nv04-nv40/exa: Match the blob behavior more closely on PrepareCopy.
    
    Fix a somewhat indeterministic corruption problem on nv17 when there
    is stuff going on the other fifos (e.g. gallium but I've also
    reproduced it with an app just SIFM-ing memory around): in some cases
    it made the blits the X server had scheduled fail corrupting the
    nearby screen areas.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
    Reviewed-by: Ben Skeggs <bskeggs@redhat.com>

commit 16ef9ff7e394a693fc74764d8bc2630e784947f3
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Nov 5 03:28:00 2009 +0100

    nv10/exa: Spring-cleaning
    
    * Kill the A8+A8 hack. Recent enough X servers (>=1.7) fall back to
      ARGB glyphs for drivers not supporting A8 render targets.
    
    * Kill all the global state. It doesn't matter a lot yet but it might
      if we get multicard working at some point.
    
    * Other random clean-ups with no functional changes.
    
    Some numbers from x11perf -aa10text -aa24text -comppixwin10 -comppixwin500:
    
    * Before, with A glyphs:
       12000000 trep @   0.0025 msec (394000.0/sec): Char in 80-char aa line (Charter 10)
        3200000 trep @   0.0119 msec ( 84300.0/sec): Char in 30-char aa line (Charter 24)
        8000000 trep @   0.0036 msec (280000.0/sec): Composite 10x10 from pixmap to window
          60000 trep @   0.4813 msec (  2080.0/sec): Composite 500x500 from pixmap to window
    
    * After, ARGB glyphs:
       20000000 trep @   0.0015 msec (649000.0/sec): Char in 80-char aa line (Charter 10)
        4800000 trep @   0.0057 msec (175000.0/sec): Char in 30-char aa line (Charter 24)
        8000000 trep @   0.0036 msec (280000.0/sec): Composite 10x10 from pixmap to window
          60000 trep @   0.4813 msec (  2080.0/sec): Composite 500x500 from pixmap to window
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
    Tested-by: Pekka Paalanen <pq@iki.fi>

commit e1c2efd7e7703f5860e5fe99e0413e3be10576d4
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Nov 5 13:04:17 2009 +1000

    kms: don't update drmmode_output->mode_output when vtSema is FALSE
    
    Fixes fast user switching issues.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit aed811e71b544dccfe84671f962503342acb75ab
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Nov 4 18:03:12 2009 +1000

    exa/nv10: handle reloc failures

commit 5315034b7d46980a3527c814526857aed3bc98f7
Author: Ben Skeggs <skeggsb@beleth.(none)>
Date:   Wed Nov 4 16:52:02 2009 +1000

    xv/nv04: handle reloc failures + fail on bad surface format

commit 99b1bf3d3e6b8c8ef2aa4aae3e33f3908cd00dab
Author: Ben Skeggs <skeggsb@beleth.(none)>
Date:   Wed Nov 4 16:46:35 2009 +1000

    xv/nv40: don't even try with unknown surface format

commit c1447574a025416f92f8dec2c361859c3945db92
Author: Ben Skeggs <skeggsb@beleth.(none)>
Date:   Wed Nov 4 16:46:18 2009 +1000

    xv/nv40: handle reloc failures

commit 6ca14ba77104542a2915af8dca56236646be139a
Author: Ben Skeggs <skeggsb@beleth.(none)>
Date:   Wed Nov 4 16:41:58 2009 +1000

    xv/nv30: don't even try with an unknown surface format..

commit 53ef7be58a2c46b2b5ffe912dcd408d74705ccbf
Author: Ben Skeggs <skeggsb@beleth.(none)>
Date:   Wed Nov 4 16:41:44 2009 +1000

    xv/nv30: handle reloc failures

commit 6facc0f765c1130aeb19ddfb76cbaaabaecf3f4a
Author: Ben Skeggs <skeggsb@beleth.(none)>
Date:   Wed Nov 4 16:36:09 2009 +1000

    exa/nv40: handle reloc failures

commit a97501a4e64d690be4232b01f9a3663fc2338c8a
Author: Ben Skeggs <skeggsb@beleth.(none)>
Date:   Wed Nov 4 16:31:56 2009 +1000

    exa/nv30: handle reloc failures

commit 222d13a03b41eb610a05063f81f0c47f57e6098e
Author: Ben Skeggs <skeggsb@beleth.(none)>
Date:   Wed Nov 4 16:02:50 2009 +1000

    exa/nv04: handle reloc failures

commit bd8aa7515f69c412e8f379777c49d59364df32fe
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Oct 28 12:59:59 2009 +1000

    xv: handle reloc failures

commit 0214cb8b25a6959573bfc183b259b435f0a728bd
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Oct 28 12:55:25 2009 +1000

    xv/nv50: handle reloc failures

commit e84e98d7f9260006a8b16a5785e4d2926d2370d4
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Oct 28 12:47:49 2009 +1000

    exa/nv50: handle reloc failures

commit 62c5c875e4c0812815be48f74bdef25d9f046515
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Oct 28 12:30:24 2009 +1000

    exa: handle reloc failures

commit c839f6098451aa59c7cb1fd7819e17a966e8ace7
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Sun Nov 1 22:16:50 2009 +0100

    nv30/exa: support more 16bpp formats
    
    Signed-off-by: Marcin Slusarz <marcin.slusarz@gmail.com>

commit 1d93e207db6e5a58b702c1812feaeb6b7252bc70
Author: Marcin Slusarz <marcin.slusarz@gmail.com>
Date:   Sat Oct 31 20:24:52 2009 +0100

    nv/exa: fix 15/16 bits solid fill
    
    after this change nouveau passes all fill and blend tests of rendercheck
    (before: fill - 108/120, blend - 3323868/3569150)
    tested on NV34
    
    Signed-off-by: Marcin Slusarz <marcin.slusarz@gmail.com>

commit df5f17e59a7f42781b388074798d26f7981b2296
Author: Arthur HUILLET <arthur.huillet@free.fr>
Date:   Mon Nov 2 15:56:56 2009 +0100

    nv10exa: improve codestyle
    
    Signed-off-by: Arthur HUILLET <arthur.huillet@free.fr>

commit 5587f40c1b8af7d178f9a68d0f1fecdfc0ca9749
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Oct 30 14:01:09 2009 +1000

    exa: force the use of sysmem pixmaps on low-mem cards
    
    Very similar effect to forcing MigrationHeuristic "greedy" on classic
    EXA.  Far better than the migration ping-pong that'd occur otherwise
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 718a41b9a2b5649ac37c18f456b94eaf99584598
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Oct 22 12:35:32 2009 +1000

    nv50: NVA8's 3D object class is 0x8597

commit 7494b18bf4061fb960a2126c745721161baddd01
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Oct 18 19:45:02 2009 +0200

    nv50/crtc: Don't perform the LUT expansion twice.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit b161a7f7fa81b6d499c91c17f988a38ed537ed35
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Oct 18 19:41:11 2009 +0200

    nv04-nv40/crtc: Don't perform the LUT expansion twice.
    
    Fixes bug 24595.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 9cbc139176ae991150bd9ddf66b61db471b391f2
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Oct 11 23:42:01 2009 +0200

    Partially revert "kms: always set gamma on modeset"
    
    6c8d3e39b72abe897b08d9e90cae85e121863d2c breaks gamma setting with
    servers older than 1.7. Keep the call to xf86HandleColormaps even with
    KMS enabled, as it's a no-op in the cases we don't need it.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit cef4b61b4d0cf096428d89eff65a78fd16f612d5
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Oct 11 20:23:45 2009 +0200

    Fix NVLoadPalette for 15/16 bit depth.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit cc4f7a733e3504260437d06091490fcb8a4c8063
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Oct 11 20:31:11 2009 +0200

    Remove an useless call to NVLeaveVT from NVCloseScreen.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 5a4afade51fe5fd149f8726fc243fbb69a660bf3
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Oct 8 03:33:34 2009 +0200

    nv10/exa: Replace "celcius" with "celsius".
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
    Tested-by: Pekka Paalanen <pq@iki.fi>

commit 2e744325827d702b564c5d6becaf65f3ad164761
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Oct 11 17:40:56 2009 +0200

    nv10/exa: Allow component-alpha masks.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
    Tested-by: Pekka Paalanen <pq@iki.fi>

commit c3bb746ab6b371e843e1754a919dd25fa7b96b19
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Oct 11 17:38:44 2009 +0200

    nv10/exa: Fix PictOpAtopReverse for destination pixmaps with no alpha channel.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
    Tested-by: Pekka Paalanen <pq@iki.fi>

commit f0a3d9f59817ebf2b9606097785f0ad1ae45da12
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Sun Oct 11 16:15:30 2009 +0200

    nv10/exa: Refactor the reg combiner/alpha blending code.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>
    Tested-by: Pekka Paalanen <pq@iki.fi>

commit 3f020b0bf2e8d2bc54eceda771829c4b2535688a
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Oct 8 16:19:16 2009 +1000

    kms: reload cursor on modeset, needed on rotation (rh#524632)

commit 38d7520986078fd01c19957a75ebfd9d91665225
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Oct 8 11:34:20 2009 +1000

    kms: switch to CP+MPH instead of GetScratchPixmapHeader

commit 6c8d3e39b72abe897b08d9e90cae85e121863d2c
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Oct 7 15:57:49 2009 +1000

    kms: always set gamma on modeset
    
    fixes issues vt-switching between console and X of different depths.

commit b13c0509be63f27a4a9c918112d0a0fc84ccce10
Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
Date:   Wed Sep 16 18:17:30 2009 +0200

    nv50/exa: use A8 RT format for PICT_a8
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 7a63e4c61cd5d082caf074702cde79e1a66354b0
Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
Date:   Tue Oct 6 11:58:39 2009 +0200

    nv50/exa: cleanup shader settings
    
    Since we only pass through 2D coordinates in the VP,
    no need to occupy extra output registers for HPOS z
    and, which can be coded as 0, 1 into VP_RESULT_MAP.
    
    We don't have to fetch all 4 attribute components if
    we only read 2 in the VPs.
    
    Using 0x1, 0x1 as terminator instructions looks odd,
    just make the last ones that do something long and
    set the exit bit.
    
    Setup VP_RESULT_MAP and INTERPOLANT_CTRL correctly.
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 60818bdeb975a9f469d3ae890932d4de1cbb59f9
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Oct 7 10:49:00 2009 +1000

    kms: don't copy fbcon if depths don't match

commit dd8339fc4e18fa4fd409f2997db741be209e852d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Sep 29 10:52:53 2009 +1000

    Pass NULL fb pointer to fbScreenInit when using EXA
    
    Fixes 1.7 xserver getting very confused...

commit 6dbdc80016c2a81c390d77db613833cd4d15c617
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Sep 29 09:00:59 2009 +1000

    exa: make tiled scanout a separate condition from wfb being used

commit 96d025232e292a8b1aebd54eaad3a21dbf6e2f77
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 25 19:50:11 2009 +0200

    nv40/exa: fallback on special case xrgb non-repeat textures

commit ed05bd6dab4fdd1289947154df02cd21c0839574
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 25 19:49:14 2009 +0200

    nv30/exa: fallback on special case xrgb non-repeat textures

commit dd7b86cb5351a60f21eee9cf81ae0ef61cf45f13
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 25 19:39:24 2009 +0200

    exa: fallback on src pictures without drawable

commit de0b095a1deaa1e53e1f555a6eb537482c488638
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Sep 24 19:21:59 2009 +0200

    nv50/exa: avoid fallback on xrgb repeat none when dst has no alpha
    
    - This should fix resizing slowness in evince amongst other things.

commit df94ebdbcd89c1678ac243217e7f5b20cbbe857c
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Sep 21 08:37:27 2009 +1000

    kms: use displayWidth for pitch calc in transition, not virtualX (rh#523281)

commit 5a6c3c427796f7f3dac0f597a320b09feb25ffc8
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Sep 16 15:13:08 2009 +1000

    dri2: call CreatePixmap rather than yet another custom-built one

commit 95086de507df7c5676c7ee712139ac4c91c9f6d2
Author: Pekka Paalanen <pq@iki.fi>
Date:   Tue Sep 15 20:31:33 2009 +0300

    Partially revert "kms: wait for fbcon to be copied before continuing"
    
    This partially reverts commit 6c045fc44783454180d7b3d00b5f25436bd5544e.
    
    The nv_driver.c hunk of the above patch breaks the build on at least git
    and 1.6.3.901 xorg-servers due to:
    nv_driver.c:745: error: 'struct _ScrnInfoRec' has no member named
    'canDoBGNoneRoot'
    
    Signed-off-by: Pekka Paalanen <pq@iki.fi>

commit 6c045fc44783454180d7b3d00b5f25436bd5544e
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Sep 14 13:04:12 2009 +1000

    kms: wait for fbcon to be copied before continuing

commit 22971d5545a2cd03e5c0b5d5d16fb85d7fff2aff
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Sep 10 16:05:15 2009 +1000

    dri2: switch to bo_new_tile()

commit 806eaf6b0b36cb05ca9d883ff4572629812a1d48
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Sep 10 12:00:44 2009 +1000

    kms: rework fbcon transition
    
    This does 2 things.  Most importantly, it avoids a situation where we get
    multiple GEM handles for a single object, making it possible to confuse
    the kernel if both appear in the same push buffer.
    
    Secondly, it moves the transition to only on X startup, and not on every
    modeset etc.

commit f90edc168c4a18b20750043d33c193bdc1b89156
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Sep 9 09:23:58 2009 +1000

    Revert "nv50: use 0x7000 everywhere for now, until we can fix mixed mode alignment"
    
    This reverts commit c80f125a97003c2d0db77f54e22d9de447a06f63.
    
    This was not supposed to sneak in..

commit ff6bdb14ac13168c1a4b7866784e4833a1162dbc
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Sep 9 09:19:42 2009 +1000

    Revert "kms: fetch active encoder during init if there is one"
    
    This reverts commit 4f66fc6e871969448eba25817bfb383f2fdd4b34.
    
    See reason in previous commit.

commit 9708e50e820970d526b084e0ab736c1c7a4f50c0
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Sep 9 09:18:48 2009 +1000

    Revert "kms: update encoder config during detect"
    
    This reverts commit 25610704d4b16293f5bc24d5ad18cc76e20896d2.
    
    Very bad thinko, drm_mode_get_connector.encoder_id is *not* the same thing
    as our DRM's nouveau_connector.detected_encoder.  Need to find a better
    way of achieving this.

commit c80f125a97003c2d0db77f54e22d9de447a06f63
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Sep 8 16:20:33 2009 +1000

    nv50: use 0x7000 everywhere for now, until we can fix mixed mode alignment

commit 25610704d4b16293f5bc24d5ad18cc76e20896d2
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Sep 8 11:33:51 2009 +1000

    kms: update encoder config during detect

commit 4f66fc6e871969448eba25817bfb383f2fdd4b34
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Sep 8 11:26:29 2009 +1000

    kms: fetch active encoder during init if there is one

commit 2b5ec6ad708164eb9b2df00f453ea84f4898153a
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Sep 4 10:35:57 2009 +1000

    kms: only call drmModeSetCursor when cursor is visible
    
    It seems we get load_cursor_argb() calls even when the cursor is hidden,
    and the drmModeSetCursor() call would then decide a cursor is available
    and show it on outputs where the cursor shouldn't have been actuve.

commit 569a17a98d03d965f9500c37c0cb14e0fb462311
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Aug 20 18:44:38 2009 +0200

    kms: No need to upload gamma on set_mode_major in older X servers.
    
    Fixes build for CRTC ABI < 3.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit 32fc8a9a3104b38fe89427ffa60d21dad1572c15
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Thu Aug 20 18:43:58 2009 +0200

    kms: Fix <nv11 hardware cursor.
    
    Signed-off-by: Francisco Jerez <currojerez@riseup.net>

commit e4e6f863b626d77934935e13714c6cbfd014d916
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Aug 20 12:04:26 2009 +0200

    kms: actually call kernel when loading cursor image
    
    - In the past we depended on getting a cursor show to call the kernel and actually make it visible.

commit 95f09df23efd0a36d29cb4810faa659f839194f0
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Aug 20 15:48:26 2009 +1000

    kms: prevent X from hiding cursor before updating image
    
    This wasn't noticeable when everything was being done in userspace.  However,
    with KMS there's more of a delay between the hide<->update<->show steps
    and this produces a noticeable flicker.
    
    If there's any good reason we shouldn't be updating the cursor image while
    it's being shown, we'll handle it transparently in the DRM as required.

commit fe2b5e6c6f81f4c4a76f5e4c5816812459872af3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Aug 19 22:06:42 2009 +0200

    kms: fix gamma
    
    - crtc->active is needed in order to set the gamma manually
    - the initial gamma must be set by us

commit 9d270f65ee85dedc6bf9cd9cf24e3d8df062f670
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Aug 18 21:59:10 2009 +0200

    exa: update to latest CreatePixmap2 + do not align width to 64
    
    - Only the pitch needs to be aligned to 64.

commit b50110d00e32396e186168271adbb88ace8ba986
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Mon Aug 17 16:54:48 2009 +0200

    kms: Some TV-out fixes.

commit 523feba8fdc6d285929ac72be0a6e037019f019e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Aug 17 00:09:42 2009 +0200

    wfb: more correct and more error tolerant
    
    - In a strange world it is possible that a high index is tiled, and a lower index empty.
    - This should avoid that loophole and also emit a warning when we run out of indices.

commit 3db3e5350e2f6dea50cd2bce0c5fb0437fe08dcf
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Wed Aug 12 02:18:27 2009 +0200

    kms: Implement output->get_property when RandR1.3 is available.
    
    This allows getting updated values when the kernel is modifying them
    behind our back.

commit ba9817b88d31364a5d43d945359e357535aeb09a
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Wed Aug 12 02:18:26 2009 +0200

    kms: Don't hardcode the output properties
    
    Replicate any properties the kernel exposes. Mostly taken from the
    intel DDX.

commit 92f271020a1b9486bd5890a00649aed3678ead62
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Aug 13 15:40:52 2009 +1000

    nv50/xv: provide SYNC_TO_VBLANK attribute

commit ada1d36d7097c389c8e21707d36b3cdd6378db94
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Aug 13 15:38:14 2009 +1000

    xv: disable overlay with kms for the moment

commit 85b1c86983a39cb921bd68a8601785975c948e2d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Aug 10 11:42:15 2009 +1000

    dri2: call exaMoveInPixmap() before accessing driver pixmap private

commit 292f46a0a0e031fc8a4256aa1eed91e3b2167acd
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Aug 10 11:36:56 2009 +1000

    xv: call exaMoveInPixmap() for driver pixmaps

commit 0210fbf01d61fb0541770d541b71396537bcb728
Author: Christoph Bumiller <e0425955@student.tuwien.ac.at>
Date:   Sun Aug 9 14:53:28 2009 +0200

    nv50/exa: fix pointer increment in UploadSIFC
    
    We always output 'size' dwords to the ring buffer, so the pointer
    should be advanced accordingly, independent of cpp.

commit 1ac7d83c1e46a164c4a3a3688de1bcde9e5a58e0
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Aug 8 19:41:02 2009 +0200

    wfb: don't default to linear when encountering a pixmap without bo
    
    - With exa "mixed" there are actually very valid cases where this happens.
    - This fixes certain types of corruptions, like the yellow and black in a gimp window.

commit 64790e950e7f46e6f4f5b8486f8d0bd929cb5504
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Aug 7 16:12:41 2009 +0200

    Revert "nv50: enforce certain allignments on a tiled frontbuffer, as well as overallocate it a bit"
    
    This reverts commit dd72640c8133ee78304f875023134f214d94a630.
    
    Moved to the kernel.

commit dd72640c8133ee78304f875023134f214d94a630
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Aug 7 11:56:29 2009 +0200

    nv50: enforce certain allignments on a tiled frontbuffer, as well as overallocate it a bit
    
    - There is reason to believe that with driver modifications (part of) this won't be needed.
    - Until then this should fix "tiles" appearing at the upper left or lower right corner.

commit bfbe4d33679cc25939db0da729d89ba2a4295764
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Aug 7 16:02:27 2009 +1000

    exa: default to enabling driver pixmaps if everything else is new enough

commit 30ddd08bb2739514edf6d6e137f533b34a4369d2
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Aug 7 16:01:27 2009 +1000

    exa: turn on new exa migration mode for driver pixmaps

commit 712064e6188d65e2c7d85078b95a0292edcad0e7
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Aug 5 14:00:51 2009 +1000

    nv04-nv40/exa: set cliprect to drawing area for IFC

commit 7f63da83d8622176114ecd55048736fecd703322
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Aug 5 12:04:46 2009 +1000

    dri: close before dropping master

commit 0cc44b713ec07dfb56a4b4a6d7ae1c1a75c74971
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Aug 5 11:57:01 2009 +1000

    Set/Drop master in Enter/LeaveVT

commit 087e9f61b81ea90a1591d8b43e29bda091156405
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Aug 5 11:51:54 2009 +1000

    dri: close before taking down accel
    
    Fixes "failed to destroy server context" errors on exit.

commit 96ac8c5a9473d81b737afa116f4fd388e3152f50
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Aug 5 11:36:39 2009 +1000

    nv04-nv40: deal with framebuffer resize in !kms_enable mode

commit b8ea3b41b0540635585bc68334691414f7cff53d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Aug 5 11:30:51 2009 +1000

    nv50: deal with framebuffer resize for !kms_enable

commit d0dcc89825acb4b480f3849d8896b17a80df02f4
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Aug 5 11:28:45 2009 +1000

    No wfb without KMS

commit 2c7502680e1ab3a4ea4869a78d0317746084dd92
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Aug 5 08:55:09 2009 +1000

    dri2: fix CopyRegion()

commit 2a4c93a064353cf61c30dd1e96f93203895beb15
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Aug 5 08:36:26 2009 +1000

    dri2: merge DRI2BufferRec and nouveau_dri2_buffer into a single struct

commit 4f386f983fde197e9136ffe6fbf941a343996897
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Aug 5 08:20:46 2009 +1000

    dri2: remove support for < version 3

commit 0f691257e6d2c3662f9c76adc3287f5320a8822d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Aug 3 11:30:46 2009 +1000

    zfill scanout buffer, not offscreen

commit d893600356b3480d3df536a04e9860bfada5a159
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Aug 2 19:43:58 2009 +0200

    kms: remove fb in NVCloseScreen otherwise server regeneration fails
    
    - The bo was deleted, but fb_id remained non-zero, so it never picked up the new one.

commit ac2a644773e5b160b6794a252b85c0bf8acc5169
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Sun Aug 2 20:10:35 2009 +1000

    xv: really fix offscreen pixmap calculation
    
    sleep.. good..

commit 60635e5073e69c6f690dc3c876772b5478013783
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Sun Aug 2 19:42:17 2009 +1000

    xv: fix check for offscreen pixmaps

commit 1ecd4358c851b3d7bebfb00f5f7ac3c7c151bc20
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 31 15:30:08 2009 +1000

    Recalculate displayWidth if we do a late NoAccel fallback
    
    Fixes G80, where we'd have calculated the pitch for tiled scanout.

commit 08ef8aaf2bd7b9565cc36679412b721499f9a367
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 31 15:23:49 2009 +1000

    Don't allocate offscreen memory or GART when using NoAccel

commit 64a1515fab9764d0ada304426e7f0d7ec995b84e
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 31 13:49:49 2009 +1000

    Fix NoAccel/ShadowFB with fb resize

commit e9034a2e8d8285cf45cd1410b9e8933991f82a2b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 31 13:29:11 2009 +1000

    NoAccel + wfb == bad idea

commit 69a40131b700a4fbc4de9432110045870de0806e
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 31 13:28:02 2009 +1000

    Fix up screen pixmap's devPrivate.ptr after resize

commit 4ea65c594a1f10f586da2ca32e499de2ea0a2605
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 31 13:25:45 2009 +1000

    Point fb at the correct buffer..

commit c6b98608daec4162a7d23ce8c1d50a4a9c3ca3dc
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 31 13:09:56 2009 +1000

    Switch on can_resize for non-kms

commit 4bb007ebb8e60c87c815f9c4ce63b8d1d46e8b75
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 31 13:03:45 2009 +1000

    Fall back to NoAccel if channel/object creation fails

commit 641fdacbd1aeb9882caa30da6d568ff9a0bd78f5
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 31 11:46:47 2009 +1000

    nv50/exa: use scissored triangle for composite too

commit c6c0ef1b5a837838a0fc2e8d1659b1b4d76d26b0
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 31 11:23:04 2009 +1000

    nv50/xv: enable sync-to-vblank

commit b3d6861fa482a92807aadd9222ca2c8c605beaeb
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Jul 30 17:23:25 2009 +0200

    nv50_xv: switch to a scissored triangle to avoid strange artifacts when vsync is enabled

commit 9b37bc96d86882b7f9c355e92cbeff517090a98d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jul 30 19:24:19 2009 +1000

    more cleanup

commit d8c10eb14f8d6b5cad88a39a5da7104a403060cd
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jul 30 10:17:38 2009 +1000

    non-kms fb resize

commit 3b1a861aa56f823e8d26f33b7139e290bf44b79d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jul 30 07:14:17 2009 +1000

    free scanout buffer in NVUnmapMem()

commit 4d20547df30d630b94b0cfc28dcf7ead564f7369
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jul 28 18:14:03 2009 +1000

    nv50: tile scanout buffer for "classic" exa if xserver new enough

commit 03bc3a604e5c12829f81f2582374d37012da7f36
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jul 28 11:45:51 2009 +1000

    kms: only use rounded height for allocation
    
    Fixes minor cursor corruption in some circumstances with driver pixmaps.

commit e4fb3e7064df14b21a6ea34b919ccf2bf9fa0ca2
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jul 28 11:27:09 2009 +1000

    More fixing of pitches + use 0x7000 tile_flags for tiled 16bpp on nv50

commit 97cca7630441876414da5dfabb9ad9f2b208e29d
Author: Ben Skeggs <skeggsb@beleth.keine.ath.cx>
Date:   Tue Jul 28 10:21:11 2009 +1000

    kms: implement rotation support without driver pixmaps

commit 786ff2994aa4f614b7cc9d466455eef183697d42
Author: Ben Skeggs <skeggsb@beleth.keine.ath.cx>
Date:   Tue Jul 28 09:43:00 2009 +1000

    kms: simplify drmmode_is_rotate_pixmaps args

commit ff62da668a468796e4001523958e73eb2060b7f2
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 22:07:38 2009 +1000

    dri1: dodgyness to "survive" a framebuffer resize (or rather, move)
    
    This can never work well without a lot of work, which I'm not willing to
    put in for DRI1.  This will at least let it keep sort-of working, any DRI1
    apps running when a resize event occurs will continue rendering into the
    old framebuffer.

commit b77d580ebcc9b371153774010d29038645effffb
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 21:43:25 2009 +1000

    We already map offscreen and store the virtual, no need to keep doing it

commit bdf2c9aee02a100b44c083347a2415c100bd2546
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 21:35:19 2009 +1000

    kms: implement framebuffer resize without driver pixmaps

commit 595b1c74e52f16ef482be6f14e4a33b4649b8bfd
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 07:44:41 2009 +1000

    Fix build with 0.0.15

commit 9b879b9b38809e7d206c9e78610836bdd9c2d09b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 21:09:42 2009 +1000

    Cleanup

commit 0336eb15ebc351ab6900b48972e12f5cc6abf1bb
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 17:52:15 2009 +1000

    Switch to using scanout buffer detached from EXA offscreen memory area

commit 0403cf3698ecb9a290bb4b7e24d0deedc957ad2a
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 17:45:29 2009 +1000

    Allocate scanout buffer independently of EXA offscreen area
    
    This is just wasted memory for the moment...

commit f8ac9e35bd20391f923c5c5ccc509251ea23a4c5
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 17:30:54 2009 +1000

    Remove NoDRM mode

commit e259925bbdcebe4c3d136f476fc54f426eea9261
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 17:14:00 2009 +1000

    xv: fix some badness in nv3x/nv4x textured video adaptors

commit 3a10daca16752b52ec3187deb8b1c25d6c6fd641
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 16:05:03 2009 +1000

    rename pNv->FB to pNv->offscreen
    
    Not strictly true right now, but it's about to be.

commit 91bfda81982a77a79c2baee39929711b38b1ae6a
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 11:46:51 2009 +1000

    exa: allow acceleration to rotation bo

commit d59aaa81590b52b6227b69028f08d8ab62505525
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 11:02:44 2009 +1000

    exa: use PixmapIsOffscreen hook for non-driver pixmaps path too

commit c442376d4e9a8296760c1171fee5ca155534d011
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 07:44:14 2009 +1000

    Fix typo exposed by removal of NV_* card type defines from DRM header

commit 15bfc676094d19e57711bbdff40edd5c8e8592d6
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 27 07:40:20 2009 +1000

    Warning fixes

commit 6eb790b6113a999727895694d01910b83348647a
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 24 13:54:49 2009 +1000

    kms: keep rotate buffer pitch in crtc struct, rather than recalculating

commit 25f29426293fcac2e7a17b986673b2874e7a7264
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 24 13:18:22 2009 +1000

    Wrap CreateScreenResources and set screen pixmap's BO there
    
    Avoids reallocating pNv->FB yet again when we hit the resize hook.

commit d1628dc9159343400f09f696b9c4ef9d0fe1acbf
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jul 28 10:08:40 2009 +0200

    nouveau: remove some more RAC bits
    
    - The assumption is that RAC is dead anyway on post-libpciaccess xservers.

commit 75fba5dfd2a00f3b8212d0e8af544273c14ee0c5
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Jul 28 13:53:06 2009 +1000

    nouveau: rip out resources code whats left at least

commit 094e4e075f8e48ace534a6f011f95b6ebf1abc3b
Author: Ben Skeggs <skeggsb@beleth.keine.ath.cx>
Date:   Thu Jul 23 11:25:22 2009 +1000

    kms: don't skip resize call if we don't have a backing bo for screen pixmap

commit bff801941e23dfe3fb7449af5780ee477b10d092
Author: Ben Skeggs <skeggsb@beleth.keine.ath.cx>
Date:   Thu Jul 23 11:23:15 2009 +1000

    Fix a DRM vs DDX confusion typo

commit e9ebddae840789535acf56ac2281b3fde3cfee96
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jul 22 12:51:08 2009 +0200

    Fix build without AM_SILENT_RULES.

commit f70287cf7cacc03d8390376519165d50a325cec5
Author: Peter Henriksson <peter.henriksson@gmail.com>
Date:   Mon Jul 20 23:56:13 2009 +0200

    Add support for AM_SILENT_RULES
    
    Make use of the AM_SILENT_RULES functionality in automake 1.11
    Defaults to quiet output. Verbose output can be enabled with
    "./configure --disable-silent-rules" or "make V=1"
    
    Signed-off-by: Ben Skeggs <bskeggs@redhat.com>

commit 69ba1095a9aef29ce8fdb71ecf48f15cb13202c2
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jul 21 16:29:13 2009 +1000

    nv50/xv: attempt sync-to-vblank if driver pixmaps are being used

commit 994c37927289de7a0ab6e951892f0d66880a6210
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jul 21 14:05:59 2009 +1000

    nv50: fix a number of tiled buffer sizing issues in kms paths

commit 9c1eefd221366b9f5efbd30e4a28fba244347d4f
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jul 21 13:43:14 2009 +1000

    Don't set driver pixmaps enabled with NoAccel

commit 52882e82708f79ef198dde51f9bbebee752154be
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jul 21 13:19:07 2009 +1000

    exa: fix nouveau_exa_pixmap_is_onscreen() for driver pixmaps

commit 9fb28d107ad9fcd6a4bbb0a35c1fc0f719d531ae
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jul 21 12:52:35 2009 +1000

    exa: remove ModifyPixmapHeader hook, it's not required

commit 574fa36c73a1b04b67289762a10b5bbda7be083f
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jul 21 12:51:26 2009 +1000

    exa: only support driver pixmaps on servers with CreatePixmap2

commit 365ab69499f466aeebac1437578609a7790f5dc4
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 17 13:41:07 2009 +1000

    remove explicit pin of pNv->FB on creation

commit a757db1aadfd7a7d206dfc7968da8647dd91e65f
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 17 13:38:52 2009 +1000

    no need to pin GART bo

commit 474ebdeea1266959fddeabf04b24e04aaab8449e
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 17 13:37:29 2009 +1000

    remove pinned creation from nodrm path

commit b9333d5d34386d88b58d2267b388bbcc89b73f47
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 17 13:35:20 2009 +1000

    nv04-nv40: explicitly pin scanout buffer when required

commit 53b5b68cd168b15c377f83e5e068cee92361f51d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 17 13:31:13 2009 +1000

    nv50: no need to pin rotate scanout buffers on creation now

commit a57a9bb825e04bbe4aa94d9ac1149e2fca6525a4
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 17 13:28:36 2009 +1000

    exa: only allow driver pixmaps when KMS enabled
    
    The pre-KMS code can't deal with driver pixmaps in some circumstances,
    and rather than leave it there for people to accidently trip on,
    remove support.
    
    The other option would have been to fix the UMS code, but, who really
    cares?

commit 5d7a0b954c0da879f81a6fa1a9dc8070c58a0fe6
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 17 13:25:31 2009 +1000

    remove remains of prehistoric NOUVEAU_EXA_PIXMAPS stuff

commit 784a0337c3165c8d8fb696e4fa30bbdc8cf01b98
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 17 13:18:06 2009 +1000

    nv50: explicitly pin scanout buffer in non-kms path

commit 09db6180e4205ef55516c24ac5dfc3bd861d9fd6
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 17 13:12:25 2009 +1000

    nv30: don't pin shader memory

commit 7da55d99e3c93cadda50dcad06b09c52daa0cc5b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 17 13:10:16 2009 +1000

    xv: don't pin buffer unless using the overlay

commit e8b9f689b778909e710fc5bd5616e6497b922a09
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 17 13:07:04 2009 +1000

    kms: don't pin scanout buffer, no need, kernel will do it

commit b1b233099853b56cfdcff9c4c31d3550b76b949e
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Fri Jul 17 08:22:02 2009 +1000

    Fix build with xextproto 7.1

commit c089a71a94e7887c405af7141e188302a5e2d393
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jul 16 09:32:59 2009 +1000

    dri2: fix for xserver abi change

commit ef3a386a6df4569343e63332eb798c1d722fe164
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 6 20:33:49 2009 +1000

    Update manpage + finish removing useless options

commit 4b6e0b96188e32cb2a13f8d2bd5973f0287c827b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 6 20:25:23 2009 +1000

    No need for pci access wrappers now..

commit 1e22673f43acd0f02ba36e189b39e28b635cd50c
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 6 20:16:02 2009 +1000

    Remove non-XSERVER_LIBPCIACCESS paths, we depend on a new xserver anyway

commit aafb62f86adebb3418876649e8bd189c1523e961
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 6 20:08:03 2009 +1000

    Some more bits of NVRec to go...

commit 0ba588cb75af67a644f51add35778925d4088cf9
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 6 19:58:15 2009 +1000

    Rip out vgaHW + more unused vars from NVRec

commit 3e22547b6826ae741b168c4b3391b6ade56b4829
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 6 19:46:26 2009 +1000

    Nuke nv_hw.c, and a heap of unused vars from NVRec

commit eea5259d951a5919fa7800877570347c14411a32
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 6 19:13:44 2009 +1000

    Remove nv_dac.c

commit a38b91a7a5c3337d405aa217830857832c5399e0
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 6 19:09:09 2009 +1000

    Cull everything in !pNv->randr12_enabled blocks

commit 4815d312911cb4cfad4b4a5b194fce41d82f4869
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jul 6 11:44:26 2009 +1000

    kms: fix CRTC offset when rotation enabled

commit 6d143272f497a61c5578752f58261befbfaf911a
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Jul 1 14:03:06 2009 +1000

    nv50: initial support for depth 30

commit 9b0919c3f3269b88fb338c043bbad34f20c22f41
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jun 30 13:20:15 2009 +1000

    kms: don't try transition when we don't have src+dst buffer ids

commit c0bf670ac6b58cff60a01ab6b174ece6b1b7d892
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 25 07:26:54 2009 +1000

    wfb: fix stupid thinko + more safety

commit a12cb5c8c0a85a601188178c5fc0d84a13abd87e
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 18 14:28:25 2009 +1000

    bios: oops

commit e66867e4cf9f0bc8a1971664ccc3d5c56b08b2fb
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jun 16 10:28:00 2009 +1000

    bios: use image from PRAMIN in preference to PROM on NV50
    
    There's at least one known case (rh#492658) where the DCB table present in
    the VBIOS image from PROM is not suitable for use.  It contained all 16
    entries filled, each entry valid in itself, but contradicting other entries.
    
    The VBIOS image in PRAMIN however, still has all 16 entries filled, but the
    first few entries now match what is present on the hardware, and the rest
    are set as type 0xf, which we ignore.

commit 42c5730a4f6c243b75fbd40f1dc26e8433191c7b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jun 16 09:48:39 2009 +1000

    wrap BlockHandler a little earlier

commit 09e663aea82403f69a0e44e3b7cd89dfe96970d5
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jun 15 16:09:27 2009 +1000

    kms: safer fb resize func

commit 90be5d5d6a696564bda23e9a2dad14a3a1808868
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jun 15 13:43:21 2009 +1000

    wfb: use straight memcpy hook if no tiled wraps present

commit 86d905d34a5693e3d9b986660d4a2bcd6f30a06a
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jun 15 13:41:21 2009 +1000

    wfb: be more cautious in a few places

commit 1bcbc4b26f71f90345bd82b836fc634e741aced8
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jun 15 10:19:53 2009 +1000

    kms: small cleanup

commit c2d3550aafeb3e7c4df3334f0ac3554a8aa15da3
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jun 15 09:16:10 2009 +1000

    kms: fix rotation buffer pitch

commit 6fd982979e03ce3eace7dc7523c428aca2c30b4a
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jun 15 09:00:02 2009 +1000

    kms: point rotation pixmap at correct buffer

commit 67f8ebe77f047c12d76e508b4d7f6384baed39ac
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon Jun 15 08:52:36 2009 +1000

    nv50: create non-linear scanout buffers for rotation

commit b7e3306ddc3693699f6f9de7b22913ee22ed31ed
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sun May 31 00:26:13 2009 +0100

    Add DVI-A output info for Mac card missing bios tables (#21273)
    
    The reporter indicates the card also has DVI-D and ADC, but those can't be
    tested to deduce the fake correct data at present

commit 01b19c9fc25b147596e1719008ed9d861246ced9
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Jun 10 18:00:05 2009 +1000

    nv50: sigh

commit 4d9e63baff079fad727430fc605cb1e43c4303a7
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Jun 10 11:38:43 2009 +1000

    wfb: "mode0" tiles have the same pitch as the others
    
    This appears to be the case now (as in: after making the GPU do some of the
    dirty work) even though it didn't in the previous wfb patches.

commit 02ed6b66e37e13ab4064974b89db2e73613108ef
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Jun 10 11:23:37 2009 +1000

    wfb: work-around wfb suckage
    
    wfb sucks far more than anticipated:
     - can only expose a single set of rd/wr hooks, not per-wrap as wfb doesn't
       treat the hooks as per-pixmap.
     - the hooks will get called on buffers that aren't even pixmaps

commit 669c59ecb69a6f84ef8b8714cda6e87eacb3de9f
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Wed Jun 10 09:15:37 2009 +1000

    wfb: need a 64-bit datatype for multiply_factor

commit 86dedb748cb6d047b195e50e921e840c1c403f6f
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jun 9 22:25:01 2009 +1000

    fix some pitch issues

commit 794a27724fb9ab173dc7ea8062730797e1b4de04
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jun 9 10:54:54 2009 +1000

    nv50: use libwfb for pixmap access when driver pixmaps enabled

commit 11d9690dd9e1190d1f6873bb9a5df8f98a39d4f5
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue Jun 9 09:10:57 2009 +1000

    exa: use the sane CreatePixmap hook, if available

commit 6ee453381f00063522187939cb54ab9447b73ec7
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 4 14:43:54 2009 +1000

    xv: fix some issues with driver pixmaps

commit 67c5287f31bf20ab3a38ffcdee410d9d49ce4d2b
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 4 14:19:14 2009 +1000

    exa: wait_marker becomes a NOP with driver pixmaps
    
    mapping/unmapping buffers will sync as necessary

commit f44e52852a199196f8428822bf9fb71711b9c4f9
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 4 14:08:10 2009 +1000

    nv50: make use of larger tile sizes

commit 30c44ce3142ba44fc7a6c95ceaa9bf028cc112c1
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 4 13:41:36 2009 +1000

    exa: create unacceleratable pixmaps (ie. 1bpp) in system memory

commit 1aa22d5894c4e4efe746592bf1c51cdaf0c31c24
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 4 13:20:37 2009 +1000

    nv50: use non-linear scanout buffer when driver pixmaps enabled

commit 13d8d49f74fb10f631bcd38b169068e691b9ca99
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 4 13:11:40 2009 +1000

    nv50: use tile_mode from bo
    
    should have no effect currently, but needed later

commit bd9f5f2cbe7687aba7bb3a7f397d9b1bf87a8ef3
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Jun 4 12:11:48 2009 +1000

    exa: fix compile against latest libdrm_nouveau

commit 5f97afe38095a274938b8c2e9c5ebd17b7733bb6
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Jun 3 12:16:23 2009 +0100

    randr12: split from pre-randr12 structs into new header, de-typedef
    
    New nv_crtc->state shortcut and some renaming included for convenience

commit 0c17b8790086a529ee9e4b5aca4b6f19f31900a9
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu May 28 22:40:30 2009 +0100

    Move head getting into nouveau_hw.c

commit 12314fa6abb2dd6d325a370724c7d16c371c229c
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu May 28 21:45:36 2009 +0100

    randr12: improve uniformity of props code

commit b541c1c4400942c59be37f62b7a25719dbdaa1a1
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu May 28 18:23:37 2009 +0100

    Remove "TMDS table script pointers not stubbed" bios warning
    
    Scripts appear to be init scripts (+7 one for 0x6808b?, +9 for 0x6828b?),
    which when the pointer is non-zero (and the script isn't 'q') get called
    at POST (at least on my nv4b).
    
    The warning, from a time when the scripts were thought to perhaps be needed
    for setting up outputs, seems redundant.

commit 8af50289136e562198b5acc851629606d9ce450f
Author: Adam Jackson <ajax@redhat.com>
Date:   Thu May 28 15:08:35 2009 -0400

    Remove useless loader symbol lists.

commit 317b58166bf9f3189f33e99493cf8a1b40e014b8
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed May 13 19:05:25 2009 +0100

    randr12: disable lvds (invalidate all modes) if bios lvds parsing fails

commit e897191c7bcf61193576ecf52d23fcddf5b70634
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu May 28 16:42:29 2009 +0100

    randr12: better behaviour (avoid crash) when fp native mode can't be found

commit 03167483b41f7205dd1efc5b571ec73ec4b3cdb5
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu May 28 02:18:52 2009 +0100

    randr12: line length improvements

commit b60c16cdcbeff2d02ea0866dfbb742c3880b7ae4
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed May 13 02:21:17 2009 +0100

    Simplify tests for digital fp outputs

commit 992d4b5d3aa04f88c22e52e25dc2e3e7d9bd776e
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu May 28 15:59:12 2009 +0100

    randr12: a bunch of trivial improvements and tidyups

commit 6f0a324a503431d757b2247e7232de2eb7c318a5
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed May 27 16:17:38 2009 +0100

    Fix oopsy from 81bbdd4e causing broken framebuffer

commit c5799186b1f70df0484c6cef63c8485ddf924733
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed May 27 16:01:42 2009 +0100

    randr12: fix two colour cursor on second head
    
    Colour caching was preventing cursor from being set correctly on second head

commit 81bbdd4ee2e942d91d056a10ef993a8f41651c64
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Tue May 26 15:48:25 2009 +1000

    explicitly mark buffers mappable

commit 6c09ad5296820a845571d07cbe42d88bb19560df
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed May 27 00:53:51 2009 +0100

    Tolerate missing fp bios table (rh#502371)
    
    Modern desktop IGPs frequently miss it out, and now it seems even some
    laptop parts (MXM style) do too

commit db9ff958291416dd5b72d20d32d7412ec45c1e60
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon May 25 08:31:07 2009 +1000

    kms: clip sw transition dims to smallest common area

commit 2688c97169d8ea579ba09b9db049e31704f96626
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Mon May 25 08:29:47 2009 +1000

    don't run vbios parser when kms enabled

commit 9656762ba186e91dd2b3b7f3f9427ba520982f9d
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu May 14 10:26:44 2009 +1000

    nv50: fix multiple-display hangs when encoders swap crtcs

commit d70eed91b2909ba0b20415ab1d5a099fb6b39b08
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue May 12 16:54:33 2009 +0100

    randr12: fix digital dpms regression
    
    introduced in 3971dda57004894d5d4fc9420aa00da400815af9
    
    setting two different "blank" DPMS modes (say Suspend, followed by Off)
    consecutively would lead to the saved fp control value getting overwritten
    with FP_TG_CONTROL_OFF flavoured state, so DPMS on would then never work
    
    also, an improvement to LVDS DPMS state caching

commit 10721038b854d9945ae551c6aa382b90f5d743e1
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu May 7 21:39:41 2009 +1000

    exa: use exaDriverAlloc() to prevent issues across exa changes

commit 8502a8024354b88a4f19c7ad355268bb20772356
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed May 6 18:01:54 2009 +0100

    Fix server regeneration again
    
    The DRM is now opened in PreInit, so it must not be closed in CloseScreen,
    as the DRM wouldn't then be open in the subsequent ScreenInit

commit 7a796a94d0c0e18a77c5c50a0f9ca9c218d7201f
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu Apr 30 16:04:59 2009 +0100

    randr12: off-chip lvds for nv28 (rh#487456)
    
    Quite how this possibly works with the off-chip DVI connector the laptop
    in question also claims to have is unclear: I suspect that (at least in
    nouveau's implementation) it doesn't.  Sadly we've no dvi-in-use reg dump
    to see what should be done.

commit 5959512ef5ce20aa52bbd41d5d987392f27b9e65
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed May 6 14:44:40 2009 +0100

    'drmCheckModesettingSupported' implicit function declaration fix

commit f62719e2ac8b04d4496dc56d5fa181934bcea9f7
Author: Peter Hjalmarsson <xake@rymdraket.net>
Date:   Wed May 6 14:43:22 2009 +0100

    Unused variable warning fixes

commit c8260ef52b58234335bdbfab31364d3d25840c21
Author: Pierre Pronchery <khorben@defora.org>
Date:   Wed May 6 14:32:34 2009 +0100

    Fix crash with Xinerama enabled
    
    From the mailing list, minor tweaks by Stuart Bennett

commit 1a478edbd58bb2eb1a41f22dea893c6d85902318
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed May 6 02:23:42 2009 +0100

    randr12: de-magic ramdac general control values

commit 6c209a87d2d90b39fddc446378b370bd7fb81f6b
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Apr 7 14:37:05 2009 +0100

    randr12: pre-nv17 load detection
    
    Sampling heuristic as close to nvidia's as mmiotrace-based inference admits
    
    Works on both nv05 and nv11

commit 3971dda57004894d5d4fc9420aa00da400815af9
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu Apr 30 19:31:27 2009 +0100

    randr12: fix fp_control again again again
    
    As prophesied, 9c991d3a84ad16f893b739282403eb01e02bb57f broke something:
    turning off a digital output, then turning on an analogue output on the
    same crtc as previously used by the digital output led to FP_TG_CONTROL
    being turned on again when the (unmodified by analogue mode_set) fp_control
    state was written out
    
    So, belt and braces attempt to get this right, one more time

commit 0ef16031c7e27ffabb0299e9463def125bd5e72c
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu Apr 30 15:27:33 2009 +0100

    randr12: solve off-chip encoder crtc exclusion in prepare, rather than dpms

commit 0447ce06989d5599e268fdb8a4ba7bebf72f5c95
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sat Apr 4 20:08:32 2009 +0100

    randr12: simplify nv11 digital encoder-crtc binding
    
    Always setting |0x10 on the appropriate crtc for nv11 digital is fine;
    it's what the proprietary driver does, even if the bios doesn't
    
    Fix some line lengths in nv_output_mode_set() too

commit f69b34aa92050987e8f3da07d92d5698e9333b75
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri May 1 09:07:55 2009 +1000

    nv50: return immediately in GetDDCModes if no DDC on connector...

commit 45e16187612bc09b234b598dff25bbcc8069fde1
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Apr 30 16:37:29 2009 +1000

    bios: use NV_ARCH_50 to match G8x chips
    
    There's at least a couple of chips where we get 0x77 for chip_version,
    and fail to match the chip_version >= 0x80 test..

commit 3d61697c477dd7358e5fd4e5bc608b4fe763b5d3
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Apr 30 10:23:11 2009 +1000

    nv50: remove reading back vbios-programmed lvds native mode

commit bade2499db8e02dd2904bc811399c891bf126208
Author: Ben Skeggs <bskeggs@redhat.com>
Date:   Thu Apr 30 09:33:21 2009 +1000

    nv50: group encoders into connectors by i2c port

commit 9ee2ac19d7adc067a5551e6d6853a19b89946d46
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Apr 29 16:26:41 2009 +1000

    bios: remove dodgy mode-table search for g80
    
    This appears to work in exactly the same way as on earlier chipsets, the
    strap value just moved slightly..

commit 6282574dbeeb7075a00ce03940c4f2a597a048b5
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Apr 29 16:25:43 2009 +1000

    bios: modify get_fp_strap() for g80

commit 09b832e24b9bd887275ba882beabe9bba56f0207
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Apr 28 09:46:55 2009 +1000

    nv50: merge NV50SorSetClockMode and NV50SorSetClockModeLVDS

commit ed2c185caeb75c595dfb2e814748a856a23b2b35
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Apr 28 08:44:01 2009 +1000

    bios/nv50: initial parsing of display script tables, not quite complete

commit 3fccc9e83a194fd58c333c6c4793a27cb05ce026
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Apr 28 09:38:21 2009 +1000

    bios: some nv50 init scripts have flags in reg values, deal with (1<<30)

commit 2b4b3da73babbe9ebf4acc26238a4b2b8a6e6ee8
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Apr 29 11:00:17 2009 +1000

    bios: dcb location is only 2 bits

commit 7b5bfff21916461ce7f6a2adb27dc443ad0b8201
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Apr 28 08:12:05 2009 +1000

    bios: parse BIT U table

commit e4260ec4f0303b286f16eab4fe5a1bb66ff89e3d
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Apr 1 02:56:05 2009 +0100

    randr12: more use of logging abstraction in modesetting code

commit 4d0fdba9abcd0af736821d54baca5f0c9a8d6ce1
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Mon Apr 6 01:14:04 2009 +0100

    randr12: fix for off-chip dual link digital (enable extra wide interface?)

commit bb246d72a01285299599cbf8ff82c67f14682a4f
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Mon Apr 6 01:00:41 2009 +0100

    Partial fix for nv28 lvds bios parsing (part of rh#487456)
    
    For rh#487456, though this is neither a complete fix for that bug, nor a
    complete fix for nv25/28 lvds (the EDID matching mentioned in the commit is
    omitted until someone appears with a laptop requiring it)

commit 2915926702b7ae9ccb1e900c07ca14a2f32e4512
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Apr 7 23:20:12 2008 +0100

    plls: max_log2p_bias is likely actually max_log2p
    
    As explained in nouveau_bios.h, a separate max_usable_log2p is needed
    (lack of change from 6 to 7 tested by setting a stable small mode, say
    400x300, then manually tweaking the multiplier up and post divider down).
    The max_usable_log2p values hardcoded here are unchanged from those
    previously taken from the bios pll calculation code
    
    For reference, the blob will quite happily attempt to set clocks using the
    raw parsed max_log2p values (and go up to 7 therefore) when setting modes
    around 200x200 (3MHz pxclk), but at such a low clock my monitor won't agree
    to give a sensible picture anyway.  Reg dumped data using "nvidia" below:
    
    nv40: log2P up to 7 (dual pll mode), at very low clocks driver gives up and sets 0x0006ff0d 0x80001f04
    nv43: log2P up to 7 (dual pll mode), at very low clocks driver gives up and sets 0x0006ff0d 0x80001f04
    nv11: single pll, therefore goes quite happily down to at least 0.25MHz
    nv31: log2P up to 7 (dual pll mode), at very low clocks card locks up
    nv34: log2P up to 5 (single pll), goes down to at least 2.25MHz
    nv4b: log2P up to 6 (single pll mode), at very low clocks driver gives up and sets 0x0006ff0d 0x80001f04

commit 47bb00fee8b9906adc03b372efa1ae813bc9ca9a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Apr 21 08:57:07 2009 +1000

    nv50: missed a WAIT_RING

commit 523ccecee26454fc43a65e9b33d91a7d0ff8487d
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Apr 17 14:18:54 2009 +1000

    nv50: use vbios-programmed lvds mode as native mode if no ddc
    
    Why was this even removed?  Its replacement (read VBIOS fp mode table) has
    proven useless in the majority of cases I've seen.

commit fa2f1115d5f7f3e3767d423a77c6d929a4ae8d0f
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Apr 17 10:25:57 2009 +1000

    Remove pNv->GART conditional for selecting CB_LOCATION in AGP/PCI
    
    Kinda useless, the DRM knows better whether GART is available.

commit 7100c06be099bacc0f8bb8898bbf7eb34ff1cc6e
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Apr 13 20:21:51 2009 +1000

    kms: fix displayWidth in resize

commit ef2de256dabfde2d619e4d451bd417973c919329
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Apr 13 19:09:32 2009 +1000

    do e-edid for legacy modesetting path

commit d8545e669aaa4362a236ba2e7231ca27ffdea1bd
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Apr 8 16:15:02 2009 +1000

    bios: logic typo from earlier commit

commit 960a5c82a80272a1577dede6a05ab7dc5db37cc3
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Apr 8 14:44:06 2009 +1000

    nv50: modify ddc<->nvreg assignments again..

commit 3a6c7091d9706778a2e3971b7f36601d79fe7a83
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Apr 8 14:34:20 2009 +1000

    kms: fix setting the randr edid property

commit a1194b3690ced5db552d63be118a605508a1b965
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Apr 7 19:24:25 2009 +1000

    bios: fix typo

commit 11451cabbd5357dd71ab65e6155d7ca7d9766db7
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Apr 7 18:34:57 2009 +1000

    bios: some G8x don't have PBUS at 0x1800, us 0x88000 unconditionally there

commit 62d69bdf807423a644d7c2c493f94948ea11e491
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Apr 4 01:41:47 2009 +1000

    bios: add exception for chipset 0x73 for lack of fp table

commit 620d519564fdc6b3a7d55184bd481fa69035371b
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Apr 3 23:07:56 2009 +1000

    consistent connector naming across <nv50, nv50 and kms

commit a5d45c80e85611c9e22d8eca27294eef5378a549
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Apr 7 00:40:31 2009 +0100

    randr12: set 1 on cr59 for off-chip digital, 0 otherwise (#21023, rh#492399)
    
    The ubiqitous setting of 1 on cr59 for <nv40 tmds was breaking the
    integrated dvi of nv34gl.
    Thanks to Bill Nottingham for isolating the problem.

commit d63c92435956b23351f1950563bbb92e24e60cea
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Apr 3 23:39:22 2009 +0100

    randr12: unlock CR21 *after* turning off digital output
    
    otherwise the analogue output still fails to come up.
    
    That'll teach me to rearrange things just before committing

commit 11be9a982073d66a68cd3db2bfc611eb58d3ea81
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Apr 3 12:22:04 2009 +1000

    nv50: fix i2c port addresses

commit e2aa03794420324ae5a682bbc415a79a4d830f7e
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Apr 3 00:57:19 2009 +0100

    randr12: fall back to standard timings when finding native mode (rh#492819)

commit 6965663ddcc8dd3330842d3c4c4eb4cbf4e4fc39
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Apr 1 05:38:29 2009 +0100

    randr12: fix hw cursor for fully transparent pixels
    
    ARGB8 pixels of 0x00000000 were getting bumped to 0x01000000, which was
    _just_ visible as a box around the cursor

commit d12f70cedb0ba598234bbfc26dd6beed23e3dfe7
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sun Mar 29 00:51:05 2009 +0000

    randr12: pre-nv17 digital fixes
    
    1) set panel regs better (don't do min_front_porch adjustment)
    2) scaler programming - nv11 and nv20 don't need / 2 for aspect scaling

commit ea567dbc7bc9c8d2ee5d7d9e0dcd33b03c638edb
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sat Mar 28 01:58:09 2009 +0000

    randr12: fix restore for cards where CR21 is not left unlocked at POST
    
    More nv11 inspired fun.  If CR21 is left without a 0xfa mask after boot,
    we'd restore the old CR21 value and the subsequent restoration of VGA
    CRTC values wouldn't get through.
    
    RE'd doc of CR21 behaviour included

commit bd263d83139fcc93b967c71c99fd5e63e1ba6315
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Mar 27 18:27:18 2009 +0000

    randr12: make nv11 dvi work for both crtcs

commit 52c287dc64a97a750eb953ac5f725d794cbf0c64
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Mar 27 00:23:04 2009 +0000

    Every card since nv5 can do panels
    
    We'll only try to do ones using scripts atm though
    
    Note that as we don't have a load detect function for pre-nv17 you'll
    likely get a 1024x768 mode set up on VGA-0 even if only the DVI output
    is plugged.  Unclear if this is a bug or feature :)

commit 3d371a78bc9522e9a1b2c967957a090bb527a30c
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu Mar 26 22:21:57 2009 +0000

    randr12: enable tmds reg access on pre-nv17
    
    I think this nv11 hates me

commit 1bb85c8020802719e82c1335a18df9367215a8ff
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Apr 1 04:09:09 2009 +0100

    randr12: reorder ramdac reg access

commit 4465fddb2467ad9d923120a2fd2c648222603771
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Apr 1 04:10:18 2009 +0100

    randr12: remove nv30 special case
    
    0x68?89? are just an alternative way to set scaling (set | 0x40 on 0x68.880,
    then horiz scaling in 0x68.898, vert in 0x68.89c) and afaict don't have any
    special significance on nv30

commit 72eced5eeeef438979dff06b6c1cbaa120738cfe
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Apr 1 03:12:30 2009 +0100

    randr12: fix/improve a load of version/feature tests
    
    Main improvement is introduction of flag for nv17+ display architecture
    
    Other version fixes include:
    * allow access of fp control regs on all cards (defined since nv4)
    * only read crtc_850 and gpio_ext on nv40+, since only written on nv40+
    * set dither state on all versions (only written out on relevant cards)
    * PRAMDAC_DACCLK is only defined/usable on nv17+
    * no point saving the lvds/tmds head for restore if there's only one head
    * fix a bunch of places the nforce (0x1a) case had been missed

commit 37c6916d3eac54cc13812276fca99662162c4bbc
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Apr 1 15:00:03 2009 +1000

    bios: fix chips with pll limits table version 0

commit 76c5a05603b0eaa0831e031268e48ab6ffdee3a9
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Apr 1 10:36:34 2009 +1000

    bios: xf86DrvMsg->NV_ERROR

commit b1b9bcb111f1f5ec15e19d5a84b7ca576983c4a1
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Mar 31 11:43:26 2009 +1000

    bios: support for pll limits table v3.0

commit 8c85b4b7451bd09b0607b1f4ef8ce4b833006328
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Mar 31 11:11:12 2009 +1000

    kms: CONNECTORn -> CONNECTOR-n

commit 4e1c3239648510a4024917289127ad1e982ed34d
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Mar 31 20:59:26 2009 +0100

    Restore call to NVDRIGetVersion, to ensure the dri module is loaded

commit c973f756cfdf36db3a5c7095f6e2c57ff5841388
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Mar 31 17:07:26 2009 +0100

    Abstract logging in nv_bios.c

commit b17bebd811316b5ccca21146b58f8fbf4773f0ad
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Mon Mar 30 20:52:29 2009 +0100

    nForce DIMM check is now in DRM
    
    Since it only at most suggests an optimization, there's no real need to
    wait for a DRM version bump

commit 9c991d3a84ad16f893b739282403eb01e02bb57f
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Mon Mar 30 03:31:01 2009 +0100

    randr12: FP_TG_CONTROL 2: dpms improvements
    
    For DPMS on digital outputs nvidia does not just OR the 0x68.848 value
    with 0x20000022, they mask off 0x10000011 too.
    To do the same thing here, don't change in-memory state of programmed reg
    value (hopefully nothing breaks)

commit 5fb2888d79d39a1c74ab005d8d518686ad823224
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Mar 27 18:27:18 2009 +0000

    randr12: FP_TG_CONTROL 1: turn off digital path when using VGA encoder
    
    On pre-nv17, having a CRTC's digital output path turned on when
    programming the CRTC for VGA confuses the chip and often results in the
    analogue output not working.  Indeed, having it turned on even just before
    programming the CRTC seems to break it.
    
    Nvidia solves this by turning off the digital path early in modesetting
    and then delaying for 50ms, so (if the digital path was on to start with)
    that's reproduced here.
    
    Although this problem has not been seen on nv17+, nvidia uses the same
    approach, so we may as well too.
    
    Some tidying of the output_prepare function thrown in as well.

commit 8023dc3e2dcfa8a4cc11a5a64750a7505e8aa704
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Mon Mar 30 02:27:50 2009 +0100

    Split DCB 1.5 parsing from 2.0+, get closer to 80 cols

commit ea027b35b28c0305aca03edc8c1ff5cd84bbf3ef
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Mar 27 00:03:38 2009 +0000

    The dcb prior to v1.5 is pretty hopeless, just add a crt.
    
    Also, we don't use dcb 1.2 i2c for modesetting due to cards with broken
    tables (ala #14821), and I've got an nv11 with duff entries (v1.4), so
    don't raise hopes of init_dcb_i2c_entry working on these versions either

commit 921fbccd53eae37ed86ecece6dc1fcae4b7bf3c4
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu Mar 26 16:41:02 2009 +0000

    randr12: avoid nv11 chip lockup when saving palette regs

commit 9d46930f0eec7b787666671681e9a93fc33dce62
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 30 20:11:03 2009 +1000

    xv: oops

commit 9213c39d3a8d9a7fc90a44f9427c1fb8218243e2
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 30 11:14:20 2009 +1000

    xv: post damage after we draw (rh#492239)

commit d68a0527aa2a3e93c3408526d4bbb93db89e9b3c
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 30 10:45:59 2009 +1000

    kms: small cleanup

commit c9cb6a6f7f79233bdab737fa6b6d0916dab45971
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Mar 27 16:43:27 2009 +0000

    rh#492511 has a CRTC_OWNER of 0x7 for some reason
    
    not that this probably affects the bug in any way

commit 95bff61597ddf21d6415b40759258802a5f42150
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Mar 25 02:40:17 2009 +0000

    randr12: fix LVDS legitimately disconnected case
    
    DPMS off still needs to work, but there's no native_mode for the pxclk.
    Fortunately LVDS_PANEL_OFF doesn't actually need a pxclk, so just use 0

commit f86e395231c97155c1a211010835fd02b8e4dc5f
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Mar 25 02:07:15 2009 +0000

    randr12: permit vga outputs to be force enabled in xorg.conf
    
    You need:
    Section "Monitor"
    	Identifier "VGA-0"
    	Option "Enable" "true"
    EndSection

commit 8427b39a2f6cb32496bbbe370b793d5ba78f6b6c
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Mar 24 03:32:24 2009 +0000

    randr12: move a load of hw mode programming into nouveau_hw.c
    
    Pull in pll setting (common, no reason to bloat nv_bios with it), state
    load/unload from nv_crtc, and useful bits of nv_hw.c (remnants in nv_hw.c
    are only used on the non-randr12 path)

commit 163bdce98c0f9ca5c1125e33a9a2bf2d2d9a1286
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Mar 24 03:19:38 2009 +0000

    Turn the smaller mmio wrappers into static inline

commit 21ee927f28d1ca8d3807acc767ef14783e43f057
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Mon Mar 23 21:34:26 2009 +0000

    Put arbitration and mnp calcs in separate file
    
    Make bios->chip_version public so the pll calcs can use it

commit 83dc890f0b1fc88d2fbc7559f5d4decf4c84f340
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Mar 28 01:25:32 2009 +0100

    nv50: use E-EDID when available + apply edid quirks

commit 2c130cf71587706a4f1dcd8f5db1de47a10522f5
Author: Pekka Paalanen <pq@iki.fi>
Date:   Fri Mar 27 23:16:59 2009 +0200

    nv50: fix xf86GetDefaultModes() call for older servers
    
    Thanks to stillunknown for this build fix.

commit f1907dcef8d06d7ee4ef10ba22bb7decef700110
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Mar 27 15:37:17 2009 +1000

    nv50: add default modes to mode pool for LVDS panel
    
    At some point X stopped doing this if the display doesn't support
    continuous timing.  For a lot of G80 LVDS panels, they only report
    their native mode via DDC.
    
    We'll add the default modes ourself, and use the GPU scalers.

commit 7da6fdb8b477d2007c83b47e9cbcc2476ae40f22
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Mar 27 14:17:29 2009 +1000

    kms: fix bug which prevented getting edid from the kernel

commit f431e204d3a9be92df5ca606e86ed7c6d82103f0
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Mar 27 11:50:22 2009 +1000

    randr: fix crash when rotation requested

commit 36dedd04da1b3c89be61a95270414477d284b2ef
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Mar 27 11:26:09 2009 +1000

    kms: check for mm_enabled as an additional test for kms presence

commit a923bc1e4840c0386301f8648add2ccbfbf79a88
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Mar 26 16:24:01 2009 +1000

    nv50/xv: correct rendering to partically obscured windows
    
    Won't be exposed by current git, due to lack of accelerated front-buffer
    rendering.  But should fix rh#492173, rh#492229.

commit 01cee2906686897c4b795d308270b3b69a3e286e
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Mar 26 11:43:09 2009 +1000

    nv50: call NVSync() in CloseScreen() before restoring video mode
    
    Without this, if accel is still being done to the front buffer (usually at
    offset 0), we'll restore the video mode and then the engine will clobber
    the text mode fonts right afterwards leaving a messed up console.

commit aa7c0375b51d813be54de5e19b96e958ac183f17
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Mar 26 06:36:17 2009 +1000

    kms: implement AdjustFrame, should fix crash in fdo#24236

commit 61879b8079bee1caeedc0bd9c11061423ff27b4a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 25 10:09:39 2009 +1000

    kms: drm_mode_modeinfo struct changed names at some point

commit 79306fc29f6b27fd61fe51855bad5489fc4fd986
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 25 08:15:41 2009 +1000

    dri: fail harder

commit da1ba93f1dc2b02615e4f0366450872659176799
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 25 08:12:26 2009 +1000

    device close doesn't belong in DRI close, can have DRM without DRI

commit 56b11c773ac9392069c6a589f4f87c5cc79e020e
Author: Younes Manton <younes.m@gmail.com>
Date:   Tue Mar 24 14:27:40 2009 -0400

    Fix mouse cursor disappearing when near top/left edge of screen.

commit 4067ab466fe3aa817e0323959f70c7dd3494de0a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 23 14:43:22 2009 +1000

    another ppc fix

commit 862dba8b6ca6354d915f2430826a5581f41d1002
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 23 14:22:15 2009 +1000

    more ppc..

commit 30634865617737171835f6ac9437df597e5a8951
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 23 13:57:52 2009 +1000

    fix ppc build

commit d80fe7878379aefd3345746a149f2b46d3a84805
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Mon Mar 23 03:27:16 2009 +0100

    Fix nouveau_hw_decode_pll on NV30/35.

commit 62aa81deca5c63d30407872c0e2b784f5084acb3
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sat Mar 21 01:43:14 2009 +0000

    Some laptop mode finding fixes resulting from rh#487456
    
    On closer inspection, it seems BMP laptops only depend on
    use_straps_for_mode to ban DDC.  Therefore use pxclk alone to determine
    EDID case in parse_lvds_table, and invert sense of fp ddc flag to get a
    default of "false"

commit aa6edfaf1c32432b07c298c42b68f2d93f3b337c
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sun Mar 15 15:18:16 2009 +0000

    randr12: name VGA CRTC fields
    
    Now with added consistent indentation
    Use fields in a couple of other cases while we're about it

commit 7b7c44c828eda2edfad2fa9bea95f70889c59453
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sun Mar 15 03:45:54 2009 +0000

    randr12: rename reg state members to follow reg names

commit 4ae6c22957a929760e583d5704e350adb4404c3d
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sun Mar 15 03:11:40 2009 +0000

    randr12: name some FP flags, move some unrelated stuff out from nvreg.h

commit b50b49f6f54148ee64ba7500e797f432b198a324
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sun Mar 15 04:21:40 2009 +0000

    pre-nv50: use nvidia's names for PRAMDAC regs where known
    
    Mostly adding 'P' to the previous NV_RAMDAC regs -- either when known
    correct, or when totally unknown (eg NV_PRAMDAC_580);  made-up names
    untouched.  Lack of code changes checked with cpp.
    
    Unused defines removed too.

commit a9df3049a7e38b3bf4478459e5f0736e10927247
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sun Mar 15 04:08:56 2009 +0000

    pre-nv50: use nvidia's names for PCRTC regs where known
    
    Mostly adding 'P' to the previous NV_CTRC regs -- either when known
    correct, or when totally unknown (eg NV_PCRTC_850);  made-up names
    untouched.  Lack of code changes checked with cpp.
    
    Unused defines removed too.

commit 2c0710d334e3e1dcb04cc4fc0b46ec4c8cdb9ba6
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Mar 17 18:50:18 2009 +0000

    Separate maximum limits for encoder devices and i2c records, DCB_ prefixes
    
    From the comment with pNv->connector in nv_type.h I've assumed nv50 was
    using the previous define as an I2C limit, rather than encoder limit

commit 0db27a6f1aee023782de14ae2f260fec4e60229d
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Mar 17 13:43:13 2009 +0000

    Add DCB 1.5 entry from a GeForce2 Go reported by Martin Ketzer on the ML

commit 3e7fa97a50e42c0255876c79137dc1a40a6052a6
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 18 09:36:33 2009 +1000

    dri: pass object handle instead of offset if using real mm

commit 88efe405213a3ea23edd9bed971da1d2492021eb
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 16 17:45:49 2009 +1000

    dri2: initial implementation, only with driver pixmaps
    
    Also, no DRI1 when driver pixmaps enabled.

commit 675126e0f0c1c077bde4b25ccb64f87d1d08547b
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 16 15:06:31 2009 +1000

    kms: support framebuffer resize if driver pixmaps enabled

commit 8b354b92a859cf277b19e51fc6cb109f4ea44b7a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 16 13:13:07 2009 +1000

    kms: copy old fb to new fb on modeset
    
    Requires driver pixmaps enabled, which suck on G8x currently.  Paves the
    way for a nicer transition from console->X.  There's still a flash where
    the screen goes black before X starts here, but this is on the way to what
    we want.

commit 6658403cfd91556d06afecdde03feec7384c5398
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 16 12:34:49 2009 +1000

    Call NVEnterVT from NVScreenInit rather than duplicating it.

commit f59fef15c94fc5c6f216d0f5dcdcb3d3188c0049
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 16 09:17:29 2009 +1000

    exa: fix multiple prepare/finish_access on a pixmap

commit 75a1c4158a19bf0857de49b736fb87a40c095048
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sat Mar 14 15:48:39 2009 +0000

    Wrap bios endian casting
    
    Also convert some functions to use individual bios pointers, rather than
    bios->data[offset + ...
    Plus some minor bmp structure documentation and tidying

commit 3666d73333ecbdd3a4941a76af2528113db427bb
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Feb 25 20:21:42 2009 +0000

    Switch to using pll_vals struct for passing pll stuff around

commit a3dbc06d4f9dc340f5c167b94d8e10ac8386c5b4
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Apr 11 16:51:30 2008 +0100

    randr12: cull old unused pll code

commit 71c821b8119cbac8dcd91b27e3b7556d00ceb546
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sat Mar 14 19:06:12 2009 +0000

    Don't pointlessly overallocate cursor storage

commit 7284c07a0ad6551ea99c28454f4e7308699835e6
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Mar 13 21:23:48 2009 +0000

    randr12: nv10 hw cursor fixes/changes
    
    Remove access to PCRTC_GPIO, it's unused and on NV10 overwrites
    PCRTC_CURSOR_CONFIG leading to all sorts of cursor weirdness
    
    NV10 hw cursor is now set-up on the assumption it can do 64x64 (we've been
    using 64x32 up to now), but if it can't do cursors 64px high it can easily
    be fixed to behave like nv0x at 32x32 (64x32's pretty silly)
    
    It's possible that with the PCRTC_GPIO thing resolved the nv10 cursor can
    be more featureful: the code would also be simpler if it supported 32bpp
    cursors (test by seeing if setting NV_CRTC_CURSOR_CONFIG_32BPP has any
    effect).  It may even do alpha -- change pNv->alphaCursor to be
    (NVArch >= 0x10) to find out.

commit bcc3a14b15cdad3647cc7df0f540df1111843be5
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Mar 13 02:31:35 2009 +0000

    randr12: use nv0x cursor colour expansion funcs on later cards, unify argb paths

commit b21c807d2ced35ac1b06300f6e68d661710b336a
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Mar 13 03:52:54 2009 +0000

    randr12: store nv0x hw cursor image in VRAM
    
    nv_driver.c is already doing the alloc, nvidia uses the same method, and it saves code :)

commit 3ea4b194e83735145d5e9d5c5357f92ae6c6a569
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu Mar 12 15:37:59 2009 +0000

    Kill pre-randr12 hwcursor code, and tidy randr12 hwcursor code
    
    If you're not using randr12 you should be.
    
    Misc fixes included:
    	Ensure PNVM bit set on PCRTC_CURSOR_CONFIG for consistency
    	Fix NV11 alpha cursors
    	Add missing bo unref

commit b988160dfa5a535fd042062d7318ab99fc7efa5a
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu Mar 12 16:31:24 2009 +0000

    Remove calls to load ddc and i2c modules -- they're built-in since server 1.3

commit d5893ecf3dd915fc6937c61e6eae7c221edeb6e2
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu Mar 12 21:46:02 2009 +0000

    Hack around missing display table in rdivacky's GeForce 7050 PV/nForce 630a

commit 369e1efd23c0180e210dbe898318b6b9efa1faad
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Thu Mar 12 16:09:27 2009 +0000

    Fix xserver shutdown for randr12 off

commit 8343d6b2c0ebddf1a1a7d146890ed90278559fea
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Mar 11 01:11:02 2009 +0000

    Remove bios lvds parsing pxclk test; ddc_permitted is a sufficient condition

commit 8b56c699ad39c64326d76658c741801bb4118c5f
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Mar 11 00:43:33 2009 +0000

    Name some regs/values and reduce crtc reg struct size
    
    TVOUT_LATENCY taken from nv11 .scp file
    
    CRTC[]: even nvidia only use up to 9f, and they know what the regs do

commit 79d23d87b489332af521fbda418a13b9ae032b7d
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Mar 13 11:43:54 2009 +1000

    improve drm/dri initialisation code
    
    The main motivation here was to fix the scenario where X is started without
    nouveau.ko loaded, checks if kms is enabled, is told no because nouveau.ko
    isn't loaded, and then later nouveau.ko gets loaded with kms enabled by
    default and starts fighting with the ddx for the display.
    
    One cool side-effect is that we're not depending on DRIScreenInit for our
    DRM fd now, which means that if DRIScreenInit fails for a non-fatal reason
    (like, NVIDIA's libglx being around instead of xorg's) we can still run
    with full 2D acceleration.

commit bd1448216715681beebabe82b88c8b4d0e62eced
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 11 16:07:41 2009 +1000

    kms: cleanup set_property

commit 7a455929785e00beb2d1e65007a3407427ca693a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 11 15:51:59 2009 +1000

    kms: get current values for output properties on startup

commit 7095e8942c74953fcf1615900e2d7864024ece5c
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 11 11:30:08 2009 +1000

    kms: work around some xserver stupidity with DPMS
    
    The server calls the output DPMS functions with the intention of
    turning off outputs before reprogramming them.  It probably shouldn't
    be doing this in the case of the randr driver using set_mode_major,
    and leave it up to the driver.
    
    The DRM modesetting will usually reenable the outputs after a modeset
    anyway, which is the behaviour that the xserver currently relies on.
    However, there's a shortcut used in the drm to allow far faster fb
    swaps without doing a modeset.  When this path is hit, the DRM will
    rightly not touch any power states and the display will never get
    turned back on.

commit 8f9a58070c2fc55c922e9d82d0796e32959a8431
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Mar 10 00:20:35 2009 +0000

    Another DCB 1.5 entry (seen in rh#455194)
    
    Plus a few minor PLL tidyings

commit 9a719900adcebf47442a30fe1989509f93e13e16
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Mon Mar 9 15:57:06 2009 +0000

    randr12: add output properties for digital vibrance and image sharpening

commit 678ddc2e56aea3deb1e95b2309b47e1f2cce0635
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Mon Mar 9 15:34:03 2009 +0000

    randr12: functionate output properties creation
    
    notes:
    * setting pending at change time is necessary for props created as pending,
      so that PostPending doesn't overwrite the correct current state with the
      incorrect pending one
    * our call to PostPending can go; relic from when props were updated in
      update_output_fields

commit ed9bd8848fcfe6a77894bfe520a5aa25a9b3f769
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 4 15:10:24 2009 +1000

    kms: remove early-exit from gamma_set, the kernel side works now

commit 98c9e4edb58374f18249e5c9c53b392fb8b4a1d1
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 4 13:40:49 2009 +1000

    kms: work around some bong hits with dpms
    
    This'll need to get fixed elsewhere, but in the meantime, we have working
    DPMS *and* can actually see what's happening when X starts!

commit 88ae2c92c0efc1919dbaa7e8db4c37b86987046c
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 4 13:36:36 2009 +1000

    kms: implement dpms

commit 5269cc8060e0ce5160dfca408b0807a4cf2ff17c
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sun Mar 8 20:07:23 2009 +0000

    randr12: make props code slightly less awful to behold

commit 0b87c4964076101a2d8373fd3addd9355fb7765e
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sat Mar 7 21:13:55 2009 +0000

    More robust PLL upclocking for old cards

commit cb237a34f31f8b8c841974cb64141a2f2e36c53b
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sat Mar 7 04:38:12 2009 +0000

    bios/randr12: mode validation fixes (includes fix for #20298)
    
    Remove arbitrary 12000kHz mode clock lower bound (#20298)
    Use DCB supplied max dac clock (and remove a memcpy)

commit 9cfccd7281a715e45a4296226d9d52854230f346
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sat Mar 7 04:34:20 2009 +0000

    Handle failure to calculate pll values better
    
    Ensure pll limit table get parsed on nv30 and nv35 too

commit 1e994400913bc656b34440df67aa105aa2b211c4
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 16 22:26:28 2009 +0000

    xv: return BadAlloc if destination pixmap is not put into EXA offscreen (#15792)
    
    Lets the player get X errors, instead of the card choking trying to do system
    memory addresses
    
    We could use exaDrawableIsOffscreen() here, but that's only in new xservers.

commit 77347da64f86822f128e0dae3e89a6b80282c4ba
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Feb 27 01:22:13 2009 +0000

    Remove duplicated DCB parsing
    
    Store stuff in DCB private instead

commit 1b6cabeee4c0160335c174bd4e9111dbd9535aaa
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Mar 3 01:03:45 2009 +0000

    Remove VBIOS access in parse_dcb_entry

commit 72fd0ae537e4db208bbfa142dd70144901d7f267
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Mar 3 21:51:46 2009 +0000

    randr12: no need to re-detect edid for lvds, it's not going away
    
    Reuse of nv_connector->edid is safe as nv_lvds_output_get_modes doesn't call
    nv_output_get_edid_modes after a mode has been found once

commit ae981a8075395af40cf530f2aa24ac68d2ca0e77
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 5 20:21:39 2009 +0100

    nv50: some minor modesetting changes

commit 42f99e68940a526f804e2046676c1d06d1bbbb42
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Mar 5 12:11:03 2009 +1100

    nv30/xv: restore original viewport/clipping after putimage
    
    Fixes two cases of corruption I seen while using the texture adaptors with
    a composite manager.
     - desktop getting clipped to video size sometimes
     - missing fonts on some menu items after xv+compmgr

commit 56bb8f8e81e9d152217df7863e59781009a9bb77
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Mar 4 19:48:29 2009 +0000

    Allow parse_fp_mode_table for x86 cards that find themselves on ppc

commit 1c2f33ed33791f391d059778b1490222e8cd1e1d
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Mar 4 19:40:37 2009 +0000

    Don't rely on the bios mobile feature bit for BMP biosen (#19986)
    
    Quadro bios builds also set the mobile bit (not on nv10gl, but for all
    observed subsequent Quadros before nv4x (intro of BIT bios structure).
    So for BMP cards, use bit 6 of cr4b on head A to detect mobile biosen (all
    sampled mobile bios images set this in their init scripts, and non-mobile
    don't)

commit e436c7ee98c2eda9d5ba45f7d897d68497b52799
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Mar 4 20:59:42 2009 +0000

    randr12: make treatment of CR4B more closely resemble blob's behaviour
    
    Possibly totally unnecessary anyway

commit c61102b326455f6c63a55c8c73ed629994281588
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Feb 18 01:17:29 2009 +0000

    Parse bios fp mode during modesetting, removing extra alloc
    
    Also, it seems that the mode parsing was wrong on big endian for years, so
    fix that (though Apple laptops have DDC panels anyway)

commit 631e15a03b8a790d342aefe677f8c5eb33935de6
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Mar 3 22:03:00 2009 +0000

    Get dual_link and dithering bios info through lvds table parsing function
    
    Now that lvds table is only parsed during modesetting, return the parsed
    data in out parameters to make the ordering requirements obvious
    
    Since calling this on nv50 is pointless, that code was commented out

commit 2d4377193f5e2166af3df32ddcfb1235be82764e
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Mar 3 21:52:04 2009 +0000

    Call parse_lvds_manufacturer_table during modesetting only (#19986 partial fix)
    
    Also remove SetOwner call now that locking crtcs doesn't change the set head
    
    Moving parse_lvds_manufacturer_table to modesetting means it only gets
    called for lvds outputs, removing the dependency on checking for the mobile
    bios build.  Another benefit is making the strap and EDID FP paths common.
    
    A side effect is that as the lvds dithering toggle depends on the results of
    parse_lvds_manufacturer_table, setting that moves to after calling the
    parsing function

commit ce8f5d71dacbe0d56cfcb17dfe60f1c4c6cf1773
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Mar 3 17:24:09 2009 +0000

    Variety of LVDS script changes
    
    Remove lvds invocation static
    No LVDS_INIT for BIT biosen
    Merge in one-time call to LVDS_INIT script to main script function
    Make sel_clk preservation stuff use regular reg writing functions

commit 071d5373df744c0c9578134fa634bce1e202d4f3
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Feb 17 16:45:50 2009 +0000

    Read embedded bios edid only on demand

commit f04689cb326da409448d54694e2660cf4b4b7950
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Mar 3 10:14:26 2009 +1000

    move memset of fb after NVSave(), hopefully fix lost VGA fonts

commit 6961efb84dd6894aaaf010a9f620231dfcbad004
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 2 11:35:05 2009 +1000

    kms: fix check for xf86drmMode.h

commit 76fa6569ffd1a7f61e295753383bd01b246b5348
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Mon Mar 2 16:43:06 2009 +0000

    Detypedef bios_t, rename bios io functions, group various helper functions

commit 39c9d0231c0d24bf91dbe9ab262f54fcad1b3b2f
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Feb 27 18:57:35 2009 +0000

    Move parsed DCB to bios structs, split into public and private parts

commit 275daaf7be46e54ca59067d3f2a6e6790e1ce7e0
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Feb 27 17:46:26 2009 +0000

    Split bios struct into struct for nv_bios.c, and exported public info struct

commit 8b3e966e3230add04aa05a9ded3f8a647afe0d91
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sun Mar 1 20:50:15 2009 +0000

    Remove never updated bios opcodes 0x31, 0x5A and 0x73
    
    Notices of removal left in case any bios using them ever appears, so they
    can be found in git history
    
    Also nuke a few unused reg access defines

commit ce9eb05f516899f56e66cc290fc7c4f9d3085882
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Feb 27 23:14:24 2009 +0000

    Trivial bios convenience variable changes

commit cfeef1144943e72d62a2c0d9701ddf4a639deeca
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Feb 27 17:30:40 2009 +0100

    exa: forgot to check if EXA_SUPPORTS_PREPARE_AUX was defined

commit 37a85dcbd6f6134a43b5c9bb883553fdaf7c0bd9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Feb 27 17:23:42 2009 +0100

    exa: we support PREPARE_AUX

commit 1249fd25a529702a4c6fb4831ef92e801f0b6122
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Feb 27 17:21:47 2009 +0100

    Revert "exa: support major version 3"
    
    This reverts commit b7f99aec7282ca7c81d19ff3ad7d9ff22275d476.

commit 1c4a284a80ebed9f9d1e01c47b929481801566b5
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Feb 20 20:02:38 2009 +0000

    Rework PLL decoding in terms of pll_vals, save/restore pll_vals on vt switch
    
    If your nv04-nv4x vt after running nouveau is more broken than it was with
    the previous commit, file a bug

commit 81b4732162915ab1ac0593e0ef21b56b089dafae
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Feb 20 19:11:41 2009 +0000

    New common struct for pll values
    
    Makes the compiler do our dirty accessing work for us

commit adf2e350341b983d27123550041c3b1ddaac4526
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Feb 25 02:11:27 2009 +0000

    Check whether NV_RAMDAC_580 has changed when setting PLLs

commit b7f99aec7282ca7c81d19ff3ad7d9ff22275d476
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Feb 24 19:13:23 2009 +0100

    exa: support major version 3

commit d91fc78859b11d00c822e5cae70f0fc511b26701
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Feb 24 08:31:40 2009 +1000

    kms: fix resize func
    
    Don't change virtualX/virtualY when we're not resizing the actual framebuffer,
    just change displayWidth to account for the adjusted scanout size.
    
    With driver pixmaps, we'll be able to do "proper" framebuffer resize.

commit 535498bcfe79858e08ae1f01125025f56bcd504f
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Feb 23 08:20:34 2009 +1000

    clear the scanout buffer on statup to avoid seeing garbage on-screen

commit 022767373474a0dacf50ee6fcd6401db15018aca
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Feb 20 13:59:58 2009 +1000

    nv50/exa: properly align offset for mem_tile ioctl
    
    I really really hate this ioctl()..

commit e09f50e5f9126c682289b7ba790f16b93a80b876
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Feb 18 21:04:00 2009 +0000

    bios/randr12: fix dual link TMDS (#20006)
    
    TMDS04 needs setting, just as for LVDS, and bit 31 of fp_control should also
    be set (although in this instance the scripts ensure it is set)
    Furthermore, stop dpms clobbering any changes made to fp_control by scripts
    
    Many thanks to bmaass for testing

commit b968db77037790dd5be91d6fafa0552eb7e9520f
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Mon Feb 16 21:38:31 2009 +0000

    Return of "bios: fix create_i2c_device for g80"

commit 0a439ba05aa192e7433d430acd91b60719d20caf
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Feb 11 20:52:43 2009 +0000

    Parse DCB before running init

commit 870b6f0d2df3e64af5ac921594b1742f82329c49
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 20 05:29:38 2009 +0000

    Split parsing and init into separate functions

commit 0280a0c975830b5c4b2edf4fff8a79fb7d67b9df
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Feb 11 18:53:56 2009 +0000

    Attempt to remove pNv and bios_t use in parsing the DCB
    
    It's meant to parse a section of rom image into useful things, so use of pNv
    ought to be unusual.
    Access to things contained in pNv and bios_t makes it harder to prove parsing
    ordering requirements

commit 9179c6667cf859248a525c8d01922b69ed45c17b
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Wed Feb 11 18:33:47 2009 +0000

    Variety of DCB enhancements
    
    * ensure parsing of dcb_table.i2c_default_indices happens
    * only merge entries on dcb versions < 2.1, and note consequnces of merging
    * correct dcbent->index on post-merge compacted entries
    * drop pointless memcpy
    * return an error if no outputs found
    * define dcb structure in nouveau_bios.h (ought to rename pNv->dcb_table to pNv->dcb one day)

commit 317ca477cdbb936f29360984bcee25a0ecda3aa3
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Mon Feb 16 21:15:51 2009 +0000

    Revert "bios: fix create_i2c_device for g80"
    
    This reverts commit ca72ca24784b9da09b6e3e0b39f3aa32b8f7b502.
    It'll be back in a minute.

commit 7b25a3019beba6342505fa16327a5bcd43669f90
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Feb 16 21:23:56 2009 +0100

    nv04: unbreak copy

commit 60c8bb1391a51188a4981b4936c190c149b79b7f
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Feb 16 13:09:39 2009 +1000

    default to autodetecting whether to enable the driver's kms paths

commit a31b1d0118dc7b4d07a2c232fcd5aafbf94f69b9
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Feb 16 09:49:39 2009 +1000

    exa: reimplement driver-controlled pixmaps

commit d97e993072dc773ecfeb80b5e138b5e4598a1c3d
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Feb 16 08:50:02 2009 +1000

    exa: preparation for reintroducing driver-controlled pixmaps

commit 1e00c7d1e6edb7f6b4e6d12ef227d27413948f8f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Feb 15 18:52:59 2009 +0100

    shadowfb: clip copied regions to frontbuffer size.
    
    - There have been reports of crashed when moving windows outside the visible screen.

commit efe27964fa25f71dcbdc7a751210860369ea0e11
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Feb 15 16:54:18 2009 +0100

    nv50: correct a poorly written comment

commit 2573c065423af47e14263479c66f2308259f29b8
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Feb 13 10:46:13 2009 +1000

    exa: remove exaWaitSync() call in nouveau_exa_pixmap_map()
    
    unnecessary, nouveau_bo_map() will sync if required.

commit 500053517cb5fe058468c8965f43e6c3209ba7b5
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Feb 12 09:04:43 2009 +1000

    exa: don't need exaMarkSync on DFS, the operation will be done already

commit a7e7c557dbf9b2fe54db401793608128de08bdf5
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Feb 12 09:01:49 2009 +1000

    xv: remove notifier usage

commit 8ecb8d5331bdb910beea416cdb0b662c624c5c96
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Feb 12 09:00:07 2009 +1000

    exa: remove notifier waits in UTS/DFS
    
    nouveau_bo will handle CPU/GPU sync if necessary when bo_map() is called.

commit cfb884b816eebbdaa2103dd233c6f975834e536d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Feb 13 22:29:33 2009 +0100

    bios: add some more valid regs

commit ca72ca24784b9da09b6e3e0b39f3aa32b8f7b502
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Feb 13 22:18:18 2009 +0100

    bios: fix create_i2c_device for g80

commit bbd7041791eacd357afa775236d4123dd98ab9c9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Feb 13 20:30:24 2009 +0100

    bios: implement opcode 0x76 (INIT_IO_CONDITION).

commit 5dd2cbe454ee8560c814f3fd96d7c28e0fec1dc1
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Feb 12 17:13:42 2009 +0100

    exa: add nouveau_exa_pixmap_is_tiled

commit 15ccf721791fa4f61784ad00449630c6d2496328
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sat Feb 7 16:40:46 2009 +0000

    randr12: anti-crash measures for #19854

commit 17e9d4bb8c46d67e201b2a369eff7db805dff07b
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Fri Apr 4 19:01:20 2008 +0100

    randr12: use bios PLL setting routines for modesetting
    
    Only used for setting modes currently, old code remains for restore

commit e444e0e348b3aab59671ffdeb605f9a57c46bf70
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Jan 20 03:23:40 2009 +0000

    Readability improvements for nv_hw.c and nvreg.h

commit f5ea66c2ef2c726b6a0aff72843c379ab25dbaff
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Feb 10 19:01:43 2009 +0000

    Pull in extras from CRTC PLL code to bios routines
    
    * g7x magic bits
    * 0xc040 manipulation for vplls

commit 416636509152cf12c801ac537cb8c1bd20c19b5e
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Jan 20 02:11:08 2009 +0000

    Pull out ramdac580 setting and powerctrl_1 shift code to separate functions
    
    And only twiddle powerctrl_1 for vplls on nv3x single stage pll chips

commit 8b7041833c11f32feb7fa5edc21648cc9db1a333
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Tue Feb 10 19:01:05 2009 +0000

    Miscellaneous fixes to bios PLL code
    
    * bios variable was only used for chip_version.  simplify.
    * set plls faster on single pll cards after nv15/16
    * allow early return for single stage plls when already set
    * single stage pll mode is only for nv41+
    * 80 cols fixes

commit 01bb4c1576a45217953632c9f5612aea9173f95f
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Mon Feb 9 21:14:43 2009 +0000

    Make PROM score badly, out of available bios images, if checksum bad
    
    Problem exposed on a Mac following 0387ac32
    
    Having PROM first is good, if the image is fine.  But if the read-only PROM
    has problems, not a good idea to use it if there are other options available
    
    Also avoid result contamination, if a read method has returned early and not
    overwritten previous image in *data

commit 30848dd378d05917c646a24df404846e6f9b2352
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 6 16:23:33 2009 +0000

    randr12: bodge-in continuous timings when the scaler is in use (#19203)
    
    Similar to 3354e660b0744976871683ce226f17e873f26b50 in the intel driver, except
    I can't see much benefit in allowing bigger-than-native resolutions, so no sync
    range hacking
    
    A pity the xserver has no idea of scalers and so each driver ends up with a hack

commit 0387ac32bef6c714f54917d5d36071ae1224458c
Author: Stuart Bennett <stuart@freedesktop.org>
Date:   Sun Feb 8 09:19:53 2009 +0000

    Allow reading of PROM and PCI rom on PPC (for people using x86 cards)

commit 6ad66c0b6165822dde167fd1700bd14727ce7087
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 25 20:09:36 2009 +0000

    bios/randr12: be strict about when to use modes from bios vs modes from ddc
    
    Again, the Inspiron 8100 in #14567 is an example of wackiness, having a
    non-0xf i2c_index, but using straps
    
    If the previous commit didn't break your DCB 2.0 EDID equipped laptop, this will

commit b5391eb909f8b477c3c438f1136d788acfe6bfd8
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 25 03:03:29 2009 +0000

    Simplify FP strapping semantics and trust bios parsing of use_straps_for_mode
    
    In many ways a spiritual revert of 11de8d
    
    The compound fp.strapping member faithfully implemented what nvidia sticks in
    cr58 (for cr57 == 0xf), but this was never directly useful and had differing
    overloaded interpretations with bios version, causing confusion.  Return to
    just using the result of get_fp_strap (g80 code of which unused and so dropped)
    
    As noted in the commit, there have been DCB 2.0 laptops (as in bug 14567) which
    don't set use_straps_for_mode when they should, so we set it for all DCB 1.4-2.0
    cards.  If EDID-ful DCB 1.4-2.0 laptops exist they will be broken, and will need
    fixing later (simplistic fix:  use_straps_for_mode = (get_fp_strap() == 0xf) )
    
    Will also break nv40 straps-based laptops whose tables used reserved values,
    but that's pretty broken anyway, and I've no evidence they exist

commit 34c2b1539bb2d69dd3bd5911c4fac62e46385d20
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 24 18:41:31 2009 +0000

    bios/randr12: misc (mainly lvds related) clarifications and cleanups
    
    get_fp_strap() moved (& unused g80 bodge removed) in anticipation of next commit

commit 98b8cada6c355d437925a92ef0413e96751ed567
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Feb 7 21:02:31 2009 +0100

    Always allocate 2 hw cursors.
    
    - This hopefully fixes the legacy codepath again.

commit f1099810bb3cfe451877667a0224eb3d664e442f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Feb 7 20:04:54 2009 +0100

    Fix a few warnings.

commit 691589d8c05b8b0354e359b4942711f6fffa9903
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Feb 7 19:59:28 2009 +0100

    Fix some cursor fallout, mostly in legacy code.

commit 945f0cb644b6e4f34cc04927177fe53529aeb5cf
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Feb 6 00:44:14 2009 +1000

    kms: update drmmode_display

commit ba1f897159d910a25560796d11c9d0357869e1c0
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Feb 5 23:15:24 2009 +1000

    keep resources around after leavevt, far too problematic currently

commit 4dfd0b1b21415c48c4b6e0e8d335f3fc70922d27
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Feb 4 15:35:53 2009 +1000

    oops

commit e02813aab0376271ee777a2b8dafc9381f96311a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Feb 4 14:50:35 2009 +1000

    link against libdrm_nouveau (installed with libdrm)

commit 2c06308a6c5878fca3ff4f2f9c969705d966607f
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Feb 4 14:09:21 2009 +1000

    require drm 0.0.12

commit 29aa1341fb28578968953f7e7dc3de0ec66f70f5
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Feb 2 11:13:55 2009 +1000

    fix NoAccel from when map/unmap became stricter

commit 62adc557560fa82c2086e32cd16bc51f67a28b48
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Feb 3 08:10:45 2009 +1000

    Revert "Improve the NoAccel situation, but it's not working yet."
    
    This reverts commit 285027a180b676ac63f4c7e158e94ffbe22bf11d.
    
    Sorry, fixed this yesterday and forgot to push the commit.

commit 285027a180b676ac63f4c7e158e94ffbe22bf11d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Feb 2 11:15:02 2009 +0100

    Improve the NoAccel situation, but it's not working yet.
    
    - nouveau_bo related functions will cause problems for fake bo's (since they don't have a bo_priv).
    - NoAccel still doesn't work for me (the scanout contains random crap).

commit 5e63c7866ac93f39fde49af185387d2094110627
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Feb 2 13:46:01 2009 +1000

    Revert "nv50: make entire offscreen area tiled, use extra blits to scanout buffer"
    
    This reverts commit 6c3f8da1bff3c94353748321b40a523add824327.
    
    EXA doesn't use UTS/DFS hooks when it's accessing the "front buffer" for
    software fallbacks, so sw rendering to it was garbled because it doesn't
    understand tiling.
    
    The Prepare/FinishAccess hooks could be used to point the pixmap at the
    linear scanout buffer instead for sw access, but on VT switch for some
    reason exa get called to try and do things, hit the PrepareAccess() hook
    and die horribly because in LeaveVT() the driver deallocates the buffers.
    
    The other alternative was to use libwfb to wrap the fb accesses and
    handle tiling, but exa isn't quite ready for that yet either - it's
    being worked on.
    
    Another point made about this patch was that we should figure out the
    display engine and get it to scanout the tiled buffer directly, not
    commit shoddy workarounds.  Even for this "correct" solution, the two
    above-mentioned issues still apply.

commit 6c3f8da1bff3c94353748321b40a523add824327
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Feb 2 08:52:18 2009 +1000

    nv50: make entire offscreen area tiled, use extra blits to scanout buffer
    
    This fixes some pretty bad performance issues with window resize and desktop
    switching where ARGB windows are concerned.  It also allows Xv to be used
    without a composite manager.
    
    The drawbacks are the use of a little more memory for the shadow scanout
    buffer, and a bit more GPU time is used for the extra blits. But it's worth
    it.
    
    If you want to get rid of this, figure out how to scanout tiled buffers :)

commit 61791028ee9321748b635a85d4e53ed80d143df5
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Feb 1 18:58:27 2009 +1000

    nv10: use the correct 3d object on NV1A

commit dfd87ece014402339f82ecc26bc27b2e47e213df
Author: Younes Manton <younes.m@gmail.com>
Date:   Sat Jan 31 16:52:46 2009 -0500

    xv: Unmap filter table BO after init so it can be validated (nv30,40)

commit b8de749bbaeacbbe677df1939f7fd39d9d3863a7
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 24 05:40:02 2009 +0000

    Avoid any risk of parsing oscillation on if_is_24bit
    
    Would depend on having a BMP laptop with EDID equipped panel and a bios that
    doesn't match current suspicions, but better safe

commit 0a0bb720da63e4a323978e4a52a4d6e1e4f4ae27
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 21 00:33:55 2009 +0000

    Split up parsing the bit structure, complain when necessary tables are missing
    
    Added bios major version 0x60 (g80+) check since it now complains about missing
    the BIT "A" table on nv4x roms
    Also permits on-demand parsing of individual tables if needed in the future

commit 2d86018d52c387d4f2370b7c1ff83798ad6e1cf7
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 25 20:12:41 2009 +0000

    Swap the order of calling parse_fp_mode_table and parse_lvds_manufacturer_table
    
    Last seen in this order pre 11de8d7a

commit 8c6b3a800ae2df35b6475a46aebab32f0577261a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 20 04:04:43 2009 +0000

    Make calling of init bios functions common
    
    Bios structure parsing stage should no longer require hw access
    This involves serializing BIT hw-accessing functions after BIT structure
    parsing, but order is maintained so should cause no issues
    
    Also, set a digital_min_front_porch default on BIT PPC (G5s), as they have no BIT
    "display" table (might even fix some wonky display issues like #17571)

commit 9b32034eb72e580d4cb5a5e2fa22a76eff0e7f26
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 29 04:07:04 2009 +0000

    Don't read obviously useless bios images, and drop 5x reading on PROM
    
    If some nv43 actually need the 5x bodge (no pramin image) we can add it back as
    a method of last resort
    PCIR check taken from mmiotrace of the blob's PROM behaviour

commit 63aa210f7aee4674337fed3ebfebd198ff1e699b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 28 16:08:42 2009 +0000

    Implement bios I2C opcode 4E (untested)
    
    Courtesy an old trace by RAOF

commit a81f1590d384bad214111139db9c988ff7676e83
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 28 15:39:24 2009 +0000

    Handle I2C device 0xff fallback for I2C bios opcodes
    
    Courtesy an old trace by RAOF
    Also, use i2c record entry length when available and make rundigitaloutscript
    function name legible

commit 34e967e689a186cdde2f6c3ec222a6870b3584ea
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 28 15:48:27 2009 +0000

    Fix pasta error in bios opcode 4D

commit 786dd366474006b10c740c5012630ff5f1cd2a0f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 29 17:56:40 2009 +0000

    Fix nv04+ IFC upload and frag prog upload

commit 3ab65cf6af0d3f892ade584c29f861f9f8a9d021
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 16:51:53 2009 +1000

    add vm_vram_base field to nouveau_device instead of hardcoding 512MiB

commit d833c81fadf7dd63ab4ca94b953397fcbe0be581
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 16:25:14 2009 +1000

    nv50/xv: previous xv commit was bonged - fix that
    
    It actually still worked just fine, but it was wrong.  It's possible we'll
    have more than 1 clipbox, in which case the check for enough space in the
    pushbuf for a single frame is insufficient.
    
    Check for enough space just before emitting quads, if there's not enough
    flush and reemit state - then go again.

commit 0f741eb09c556f8d7893628964fedea862322771
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 16:10:18 2009 +1000

    exa: small cleanup

commit c10c3c9bbabe8682fe1500098dc53f631690b182
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 15:43:51 2009 +1000

    exa: mass renaming and movement of nv04 solid/copy code to nv04_exa.c

commit 81ace5dd1fa2c2760036fb1371cc61a383b2698e
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 15:29:37 2009 +1000

    exa: remove driver pixmaps path that never worked here anyway
    
    Bits and pieces remain (disabled) in various modesetting bits for reference.
    Some of it may be useful when it reappears again.

commit 4b1829e2c66f92a19a233afb749f3fb946930db5
Author: Ben Skeggs <skeggsb@nisroch.(none)>
Date:   Tue Oct 7 00:44:46 2008 +1100

    exa: remove NVCopyROP table..

commit 410788dc896d99b658508e3a7ebcb4940a039f35
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 14:32:13 2009 +1000

    blow up horribly if GPU access to mapped buffer is attempted
    
    ...and fix the numerous cases where this was done.  The current bufmgr couldn't
    care less, and synchronisation is done elsewhere.  This won't be the case for
    much longer.

commit 4c9346bd750797ee0f0485195f7ce8beb2114b04
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 14:24:57 2009 +1000

    bo_del->bo_ref, closer to ng api

commit c533f86b512b9d84ec698163a8fbc54233648fbb
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 14:13:06 2009 +1000

    exa: same for UTS state

commit 02677c07f9af01fa3b1eb787d6d320aa43c9140b
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 14:10:51 2009 +1000

    exa: ensure DFS state is updated across flushes

commit 69d02bc73409c8010d19c9f87780b0c0e7621e43
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 13:52:08 2009 +1000

    nv50: remove some redundant init, this stuff is done as required now

commit 60aea9057a78255a0ded1f64a9b9efd75017347f
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 13:50:28 2009 +1000

    nv50: forgotten buffer access flags during init

commit 5a382dddc948c49f3f5159c078875ee6cdf56db7
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 13:04:04 2009 +1000

    nv10/exa: resubmit state in composite as needed

commit d4ff8db7b0fb34e0494042b128251ad78c19ad09
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 12:58:30 2009 +1000

    nv30/exa: resubmit state in composite as needed

commit b71ebcb2c8a0c97837f3de09f034c0bbb35f562c
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 12:56:39 2009 +1000

    nv40/exa: resubmit state in composite as necessary

commit 6ddaddbb7b9442000f1e665bf61994b16d52cd25
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 12:11:24 2009 +1000

    exa: rework common pre-nv50 code in the same way nv50 code just was
    
    Still have card-specific composite hooks to go.

commit f36fa31401b060b9785d1835845c8ce09f8fe6b1
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 11:25:22 2009 +1000

    nv50/xv: ensure entire frame will fit in pushbuf without causing a flush

commit 1b48331f6bd077f39797bb2d25b62c3c9df5ccb3
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 10:38:53 2009 +1000

    nv50/exa: ensure buffer usage is tracked correctly

commit 7e644265267b4e35a05328b1c4cb1f2ef5beea58
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 10:13:57 2009 +1000

    remove unconditional FIRE_RING() in DoneComposite() hooks
    
    Far, far too much flushing.  Will completely destroy performance with kernel
    command submission.

commit 34fc4461a6f612e4e00db483effe3a2b9760e70c
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 09:47:21 2009 +1000

    hack a flush_notify() hook in to match ng
    
    preparation for rework of accel code so it'll be more suitable for ng-style
    command submission.

commit d9da090cae1d2dfc539c9db4c923c0e665bce975
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 29 09:38:39 2009 +1000

    Drop GPU resources on LeaveVT, reaquire on EnterVT
    
    This allows GDM's switch-user functionality to work on some systems.

commit 1eb8b8778037336e530e113b8bbd61d724b1cc52
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Jan 28 13:50:55 2009 +1000

    Enable ShadowFB for DRM-less mode.

commit 487463895390500fd4e899f4e3badbb44f2b5429
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Jan 28 13:41:44 2009 +1000

    Allow NoAccel operation without the DRM module present.

commit f78aeed720ef185ccdea2d62e02b2714f00ee49c
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Jan 28 10:30:43 2009 +1000

    if CARD_INIT ioctl fails, report it instead of continuing

commit cf65b875ba3467060d8a3806914b75c710504b78
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 21 05:22:34 2009 +0000

    Fix stupidity introduced in 25de6b867f319099dac05ba84f170da0f0e6c803
    
    Wow. (function executes before bios is parsed, hence version check never works)

commit 55e9cdda6e555937e8f5f3998a2e603669b84df4
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 20 05:09:22 2009 +0000

    Split out a function for finding the panel power sequencer stuff
    
    and add a bios_t convenience member

commit 1b3546b0687a1ae8080009f0c58b26074f08d3af
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 20 04:11:11 2009 +0000

    Move the bios flat-panel pointers back into the bios struct
    
    Last there in 2007, removed in 82fdd3f76e20fc7dd10fcf00cf1c13520dc56364 :-)

commit d29c4815b61635ed53ded94361ba52ee61ea5ac7
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 20 03:46:05 2009 +0000

    Remove a BITism from BMP parsing path, and move old style BMP init into common path

commit 3e971f63b6b6859acc19a52a4003bb6041cc5374
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 19 23:02:09 2009 +0000

    randr12: lock independent crtc base registers separately (#19620)
    
    Thanks to Mjules for tireless testing, surprising nobody else noticed it earlier

commit ffbca7272878d440a06a613df95ce5d7be46f288
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 18 17:24:47 2009 +0000

    randr12: code motion and allow ramdac580 setting on nv40

commit 75a037623adecbe460198066b5059c349de427aa
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 18 15:41:23 2009 +0000

    randr12: better selection of nv4x single pll mode and some notes

commit 767fcea420fc21c5b5ec6c9f2db56c1a667db306
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 19 01:51:21 2009 +0000

    randr12: no mmiotrace indication that the blob ever clears these bits
    
    some hardware drops them on readback, but I don't think that matters
    also make defined bits shifts comprehensible

commit 985ac728276633d14fa5577eacbc2095582b2587
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 17 23:21:19 2009 +0000

    randr12: no mmiotrace evidence for nv47 using the special pll bits

commit 3ef6b41a1c072d2f3545915180b522e43e0c8754
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 18 16:13:57 2009 +0000

    twoStagePLL is actually a description of cards using two PLL regs

commit c7a423a24ad7da7b510007a0d5a779999bd8cf73
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 17 04:34:48 2009 +0000

    nv04 blitter: use correct number of dma params for real nv04

commit 25de6b867f319099dac05ba84f170da0f0e6c803
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 16 20:22:16 2009 +0000

    Complain more about weird bios images
    
    also use bios chip version to test for g80

commit 4d72981cc7d156708683aba51489d4691106438c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 14 18:15:21 2009 +0000

    randr12: avoid classic macro error
    
    Guess there's not many ppc nv11 users, as it's been here since Feb '08

commit 133c1a55134853161a25f358432fd05e736718b5
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 6 17:47:07 2009 +0000

    No need of separate allocation for bios image
    
    nor of manual allocations for short lived I2C devices

commit 8a25049abd2b755187f47572f92b11e9072e522a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 6 16:55:42 2009 +0000

    Make turning on bios execution logging slightly easier
    
    and add a minor parsing check

commit 54d43c4760b573b5d376859281268046b61fb2f4
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 9 20:02:44 2009 +0100

    nv50: small fix
    
    - planemask is rarely used, so it's just a cleanup.

commit 5c9f8d3ce8964ad974175f94b858f9efc11756bb
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 9 17:48:07 2009 +0100

    nv50: Add a fallback for non-repeating XRGB pixmaps.
    
    - Other card generations will most likely need this too.

commit 0321e6741d9749f9f6b15ac2099139f24e88eef9
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jan 8 14:31:39 2009 +1100

    nv50: don't segfault if preinit fails before display setup done

commit 7dc567d432fc6a3734bf64244e57bcc3612d5ec2
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Jan 5 10:51:03 2009 +1100

    nv50: correct size/layout of uploaded data
    
    This should fix the minor corruption that is present while playing some
    videos.

commit 159c18cea2ecb92da74f9a9fdff0a9f5ef03df53
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 28 17:56:55 2008 +0100

    Make CHECK_TIMEOUT() a little more correct.
    
    - Decrease the maximum counter value by a factor 16.
    - Determine t_start at the start.

commit 5d281a2439de1e8c1848b6b700f30476575966e0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Dec 24 23:38:02 2008 +0000

    nv04-nv4x: support RandR 1.3 panning

commit 3c4705cb4472680b6cdc02fd5152d565d214226f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Dec 15 01:54:12 2008 +0000

    Implement bios opcodes 4C and 4D

commit 1fd60f202d41d6bb2028955d3bf9e6fc3921e3ff
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Dec 15 01:19:26 2008 +0000

    Group all DCB I2C info for a given bus in a structure
    
    Furthermore, use the port type field to determine how to drive a bus, rather
    than the chip(s) characteristically associated with that port type

commit 31c9958779d95ae84993f4772607367927a0e313
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Dec 19 19:59:53 2008 +0100

    nv50: implement get_crtc
    
    - Won't help much right now (pre-KMS), but it doesn't hurt to prototype now.

commit f7a757827c1d62ac8a7246fe3b64fea1891a7a16
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Dec 18 19:57:50 2008 +0100

    nv50: implement set_origin (mostly used for panning)

commit 74b2e4e92822fb321a9304f0e077c18de57e585f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Dec 17 22:42:20 2008 +0100

    configure: Avoid compiling drm modesetting code by accident.

commit d104f145260ff183b5f7e4c16cebc1680cf771b7
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Dec 16 23:54:39 2008 +0100

    nv50: Improve lut code.

commit 20f93a94ae034ee7c744947f42a29a7c0b50ee9d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 26 01:37:38 2008 +0000

    randr12: pass cursor visibility changes through mode state structures

commit 763e0f88c79105a726ea05219875a25fc0129e1f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 12 20:32:47 2008 +0000

    randr12: allow ddc while crtc is locked

commit 9d8bd459485392ec21d90c405510f3f097a61921
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Nov 22 21:20:07 2008 +0000

    Punt all bios structs and defines into a new header

commit a34a2c07662b0175e03161cb48abaea9d814c1eb
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Nov 20 17:35:59 2008 +0000

    Do not attempt to parse FP mode tables for Mac laptops (#18636)
    
    The two varieties of these laptops I've had the misfortune to encounter use DDC,
    and the NV34M based one appears to not include a fp mode table at all

commit 1aba513a0b5a00996f28462cd4118214dffd87e2
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Nov 21 13:16:38 2008 +1100

    nv50: program physical addresses into CRTCs, not VM addresses.

commit 65b956fb407818117ce17ced6bbe66c55b4acb7c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Nov 17 20:02:19 2008 +0000

    randr12: fix stupidity from 539f4990
    
    found by AVRS2

commit 1666e858dc027bc028083c15618da5cde5a1b6f1
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 9 23:10:15 2008 +0100

    nv50: use bios provided load detect value

commit a020a44a2c48ff20bca6188469cb9cbbb5bf6093
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 9 22:56:30 2008 +0100

    bios: support g80 loadval table

commit 220cbb6347cb0404bd24f457ac6cb5e39917cdbf
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 8 18:01:18 2008 +0100

    nv50_randr: plug a small memory leak

commit cea05e14f94dcb842adbfcec515e17e9f5655089
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Oct 26 03:51:36 2008 +0000

    randr12: make colour-map setting less complex

commit 0e4b01a5e06d8b5323c010ce89723369f17b10b2
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Oct 25 02:11:37 2008 +0100

    randr12: convenience functions for vga crtc state access

commit fe9bfd9b1b5ce6fd0cd0360ec850ae48b4abac41
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Oct 24 21:02:00 2008 +0100

    Tidy EnterVT, and don't call it from ScreenInit

commit 3e1ccff8744d9cabef0cd3901e987deeeb38ec12
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Oct 24 02:49:19 2008 +0100

    Condense crtc locking
    
    We unlock all crtcs whenever the driver is active, and relock them when
    returning to VT (which is what we were doing, but in a more complicated manner)

commit 83b541e0a9c454059d0e55a932a2ecdbbf650d60
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Oct 27 19:20:22 2008 +0000

    Common function for the bios condition table

commit 36c6aa449063387b34c31015d618e53d4b6634e0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Oct 27 18:55:28 2008 +0000

    Allow more time in INIT_CONDITION_TIME (#18234)

commit bf810b32bc959f3821bca18cf158f711dd314a26
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Oct 27 18:41:43 2008 +0000

    More warnings for C51's magical unaligned regs

commit d481b5e2e1dcb7ac5b5a7583bc6542b42567eac2
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Oct 25 17:48:35 2008 +0100

    Rework bios parser error handling

commit 387f30821ff7add22376de33a203744cdc719849
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Oct 25 00:38:29 2008 +0100

    RivaTuner dumps call the `how much memory have I got?' reg NV_PFB_CSTATUS

commit bb20175001748e5d2fab1b9cb2075bbe5d94e5ed
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Oct 24 17:42:53 2008 +0100

    pedantry fix for nv11 locking, and some minor cleanups

commit 9aecc4226ca9067667004150f7d885b2247273b2
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Oct 23 23:17:15 2008 +0100

    Add a function to lock/unlock all crtcs, use it in nv_bios code
    
    Also split initial head owner determination into separate function

commit 48581da4d0e1663456ddcbf7a456029cf961d4cd
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Oct 23 02:35:30 2008 +0100

    Attempt to make the usage of cr44 rational instead of cargoculted
    
    and a couple of minor cleanups in nv_crtc

commit 1c7bee95610a47175064b17afd6aa2a45e311b1a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Oct 23 02:46:03 2008 +0100

    Robust nv11 head setting (from mmiotrace)

commit cf5162b5ed99666d3dc8db8328115afd6fff6a8e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Oct 21 02:12:24 2008 +0100

    randr12: update scrn field on server regen, and emit an error if rotated
    
    (updating the scrn is easier than removing and re-adding outputs)

commit 13739cf36893e8ab6d3d4911c76a45f0b8bd5f4c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Oct 20 21:47:07 2008 +0100

    randr12: don't change virtualX/virtualY
    
    all the things in the ddx that use virtual* (setting displayWidth, allocating
    the FB, EXA init etc) use the values present before this function is called
    
    these prior values are derived from any Virtual line in xorg.conf and are what
    we want to use
    
    setting virtual* to the crtc size here, rather than the desired Virtual size,
    breaks everything using them in ScreenInit on server regeneration
    
    as the rhd guys say:
    	/* This is strange... if we set virtualX/virtualY like the intel driver
    	 * does, we limit ourself in the future to this maximum size.
    	 * The check for this is internally in RandR, no idea why the intel driver
    	 * actually works this way...
    	 * Even more curious: if we DON'T update virtual, everything seems to
    	 * work as expected... */
    so I'll take that as precedent.

commit 98a4dcb112221fa66d82b87ef9229f5c443daf90
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Oct 20 18:59:35 2008 +0100

    Delete notifiers and grobjs in CloseScreen to avoid channel member becoming stale on server regeneration

commit 12fce00b2ecf4c6be6cc86c8a7374878bb7dfc20
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Oct 22 02:47:45 2008 +0100

    Remove all object with mmaps in CloseScreen, so that drmClose actually calls the drm release method
    
    (and so subsequently, we can be DRM master on the next drmOpen)

commit 8e3f27a30078675f1a7974ba436a68a5b45e0924
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Oct 22 03:32:51 2008 +0100

    No reason to call AccelCommonInit twice in ScreenInit, but calling it in EnterVT helps resume...

commit f495fa9153ee57d3ee0dc735c3e9e836d84a2ccc
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Oct 22 02:41:17 2008 +0100

    nouveau_channel_free should remove mmaps made in nouveau_channel_alloc

commit 1cedb8e49c832890efd12904e78dfd8ab5855691
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Oct 22 02:15:06 2008 +0100

    Do frag prog allocation and shader upload in TCL init
    
    Similar in spirit to the nv50 inplementation.
    Removes many dependencies on state stored in static variables, which in turn
    makes reinitializing shaders on resume / server regeneration tractable.

commit 9e2c08937b0d1bfed71997b2b16bded91830af71
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Oct 22 01:44:10 2008 +0100

    Only hackup shaders once

commit afc6668d2b4a1971c211c421b6a415fe74dbd2ea
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Oct 18 02:23:18 2008 +0100

    cr26 is just another view of 0x3c0
    
    remove superfluous crtc unlock too

commit 539f4990c8f1a32da57992dc863f277f8ede8194
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Oct 15 03:59:06 2008 +0100

    Use symbolic define values where known

commit 791666a76c68880136ae26d0477bf484cc667f72
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Oct 15 00:25:26 2008 +0100

    Convert CIO, DIO and VIO use to use defines from nvreg for index and data reg offsets

commit a1b7f8d9b20bff59956ea1dc2130e5590a60aa4c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Oct 15 00:12:11 2008 +0100

    Rename relevant functions, sizes and offsets to PRM.IO from P.IO, in keeping with the nvidia scheme

commit 267c0eef02f5e2a48217235d170a0530de6a94d3
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Oct 14 23:58:11 2008 +0100

    Name crtc index regs according to rules.xml

commit 9261c34e873356b02a0fda00e9911d9795d9f1f2
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Oct 21 17:46:37 2008 +0100

    SaveGeneration isn't doing a lot
    
    add another close screen thing too

commit c29c190036c721dac2e58e66d0c5a70a24377a1d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Oct 21 16:27:00 2008 +0100

    Replace a few memsets with initializers

commit 3b53f6ceb86458f9df9b7becc18a79e74b21c91f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Oct 12 15:52:43 2008 +0100

    Eliminate separate NVRec ctor and dtor

commit 1b18db28f124bd5021f61b72389e5c0ce003b212
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Oct 11 21:05:57 2008 +0100

    randr12: remove pointless debug in nv_output and nv_crtc

commit 240d51dc928cea38f6b9d842b59011ad7c5500c0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Oct 11 18:40:35 2008 +0100

    randr12: deBoolification and eliminate `override' arg to nv_crtc_load_state_ext

commit b95c3e23f0eac7d12d5ee271af8ec5707ac4ef8e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Oct 11 18:29:40 2008 +0100

    Make all CR 57/58 access use the proper functions and defines
    
    Use a define for usleep in bios too

commit 9988ae594f6f03385b261b0af83b324981f11593
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Oct 11 17:56:23 2008 +0100

    Redo bios logging

commit 0e6a9cc61c88deaf0e0935d5a7d269621c3d6cd0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Oct 11 18:04:58 2008 +0100

    Improve some nv_bios messages, remove others

commit b175bfcd6485d9dcddb66ab5f79104567d256336
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Oct 11 17:59:02 2008 +0100

    Bios register list is easier to read when sorted numerically
    
    and remove NULL initialization for calloc'd struct

commit e51b49c938483ccbd172ff07d0385a6fb474b57e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Oct 11 02:35:40 2008 +0100

    randr12: panels with edid have only a constant mode
    
    prove me wrong.

commit 765494ebf9b129bd613121cb714e928b09e19500
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Oct 11 02:16:50 2008 +0100

    Remove unnecessary "Setting owner" message

commit bf585ad38a80f7828b821936296316bcee4658f5
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Oct 11 01:22:35 2008 +0200

    The fifo channel should be removed along with closing of the fd, so only clear the client memory.

commit 8b7e42461add708e75d3f7d675245f5bbf3652e8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Oct 10 23:37:55 2008 +0200

    git-log is no longer valid for git 1.6, switch to git log.

commit 933fd803f0aadc934f448937dbeb305256fe8893
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Oct 10 23:14:57 2008 +0200

    Some fixes that bring me closer to surviving to the 2nd X server generation.
    
    - Not quite done, i get a fifo dump when something tries to render.
    - Something is keeping an fd, which is preventing a full takedown, but this is not a valid reason for failing (kernel modesetting
    for example will never have full takedown).

commit daee3c38a02f48f9094f712800174b88b065f0ff
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Oct 9 17:09:58 2008 +0100

    randr12: separate cursor pixmap location setting function

commit caf2e920f18cad1c57e945a4e474e63a65ec6a43
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Oct 9 17:07:30 2008 +0100

    Move cursor show/hide funcs to nv_hw, document nv40 bug, and set curctl2 before applying nv40 fix

commit f76074c7041b1246efdf2c0a4b0c467e2fe0bef1
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Oct 9 17:24:23 2008 +0100

    Use correct refclk for nv_get_clock, and use bool type as appropriate in arbitration

commit bd5b8074b4a250610cf8c9e2f181c2946e902bf8
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Oct 9 15:25:16 2008 +0100

    Tidy arbitration prototypes and split randr12 cursor pixmap setting from arbitration
    
    Also fix ages old warning in nv_hw

commit 5dc41fdcf4ba76d7154d32f030d2e99756681e4a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Oct 10 01:11:46 2008 +0100

    Merge nv4, nv10 and nForce UpdateArbitrationSettings functions

commit 0ffd012c922d241aec22c8e44416171e39e6bf0c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Oct 10 00:57:45 2008 +0100

    Add PCI slot reading defines, and use them for nForce code
    
    Also move nForce dimm checking code to nv_setup, so it is only tested once

commit 520a76ef3df3cdc735691cfda329ceaae0ec3123
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Oct 9 20:22:34 2008 +0100

    Some tidying of arbitration functions

commit 3ceb2b60a09379ef51635f8309fdc82060681e8f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Oct 9 19:05:01 2008 +0100

    Reindent arbitration stuff

commit d7439fc50a924f6f1a6b5b59ba3ec076cf90c52e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Oct 8 23:45:13 2008 +0100

    Wrap usleep when called in bios code

commit 62cf9f371c420abe7a74ac4bb9fa2da081f1d29b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Oct 10 16:41:29 2008 +0100

    randr12: don't use in use (by another vga output) crtc for load detect (avoids flicker)

commit f1d0fd0595b40d3a7f555bada88f1f79b517d610
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Oct 7 21:39:10 2008 +0100

    Better behaviour on allocator fail
    
    also fix randr12 code which doesn't know how to call calloc
    and be sure to use the number of actually inited crtcs

commit 2b67015e5911cb7e321da72d7d3d5f0fefedd8e0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Oct 7 02:35:44 2008 +0100

    randr12: reorder nv_output functions
    
    roughly into order of use

commit 9f4eef0165766be2e1aa5516eae409e94c09553b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Sep 18 18:32:36 2008 +0100

    randr12: distinguish detected encoder from active encoder
    
    don't swap output props until a mode is set on new encoder either

commit 549cda114ee378640dda89621b0ce9c937c473da
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Oct 8 01:22:17 2008 +0100

    Reduce includes, everything necessary is in nv_include.h

commit 30eaa0f08250f72b0171a858f2694ca8a62c3ebd
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Sep 21 00:52:56 2008 +0100

    Oops.

commit 2481e5646ab3ea5e18d3f5ee4042fa20a8dad3de
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Sep 21 00:44:50 2008 +0100

    Optimizing memory usage for unaccelerated case is not interesting

commit 19f0ea63a505e6a840cf07bc554fd8f1787616b4
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Sep 21 00:43:57 2008 +0100

    randr12: rename mon -> edid

commit 0cb081758f52e73c3055758ed7aced12b93c2519
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Sep 21 00:31:40 2008 +0100

    randr12: crtc destroy
    
    also alleviate world shortage of curly braces

commit 37adca1dd68d5791b0371eed4b96f6613fc747c2
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Sep 20 23:57:06 2008 +0100

    Need to increment dcb entry index when fabricating additional entries

commit e6b6d8c9189f3b5ebbc77f55e318246be0fa1bd4
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 19 21:23:04 2008 +0200

    Also remove man page entry.

commit cb1e9c1ab288bcf380789f775533e4c8ff8705db
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 19 21:14:09 2008 +0200

    NV50: remove {Prepare,Finish}Access since i realise now it's not so useful
    
    - despite that the xserver code suggests that pixmaps can be offscreen on this call, that is not done as far as i can tell
    - not to mention that there is no way to know for sure if a pixmap is offscreen (exaPixmapIsOffscreen is not exported), making the
    offset useless
    - this will (obviously) become relevant as soon as driver managed pixmaps come into play, but that is for another day

commit 3e397f575df6c3fee6eb9ee810fb3fc70d2c0cc8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 19 20:41:59 2008 +0200

    NV50: The TMDS dual link threshold is meaningless for LVDS

commit 599d258948be0505f02947251ad6877e7168d9a8
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Aug 25 01:47:45 2008 +0100

    randr12: multiple encoders per connector (DVI-I)
    
    that this doesn't break things in subtle and unexpected ways is too much to
    hope for. one not-subtle and expected way things will break is that xorg.confs
    with specific setups for DVI-A-n and DVI-D-n connections will need renaming (to
    DVI-I-n).
    
    as the last patch in the series, this also fixes an issue introduced with
    144b04a2 (randr12: fix dpms, detect, destroy, ...), that for a screen connected
    to a dvi connector, both the analogue and digital variants were detected as
    connected

commit 5e8ac848936a1b70babc417454599c0231343399
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Sep 17 22:12:07 2008 +1000

    nv50: 0xa0 family uses class 0x8397 for 3D

commit 9c36eefe991daf47d20badffb3009def99473bdd
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Sep 14 23:01:49 2008 +0100

    randr12: avoid weirdness when tv-out happens to share i2c_index with another output

commit 144b04a258eaa8e3b63c48b5e574524b40a59ac7
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 24 04:15:20 2008 +0100

    randr12: fix dpms, detect, destroy, save and restore for multiple encoders per connector

commit 2b30b8914a32049e87205cf896b2e89ab6649bca
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 24 04:26:19 2008 +0100

    randr12: re-do detection of dvi-a vs vga

commit 50bac3fcd24072b8926ba2dbebd571424fbb7d6d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 24 03:56:16 2008 +0100

    randr12: unify output funcs for analogue and tmds

commit 69e30e6727895a8edeffc9a348b13a353cd0c6d0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 24 03:12:58 2008 +0100

    randr12: unified entry path for dpms

commit a794a0c864e5b651bea5e40a4e10978aee9da5b6
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 24 04:45:48 2008 +0100

    randr12: nouveau_output -> nouveau_connector

commit 0a5119bd8a927da1f3f4ed6caa2e93acdae29c04
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 24 02:45:41 2008 +0100

    randr12: separate encoder struct

commit 352b8fd98c519f85ade02aa679d342bc64faa508
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Sep 14 16:53:12 2008 +0100

    Another DCB 1.4/1.5 TV (#17471)
    
    I think we've got enough for TVs to no longer be fatal

commit e8ba4e0baa62f02ba85258847963512791d89385
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Sep 14 16:44:32 2008 +0100

    Only use OF bios image on PPC

commit 54b8a7ea43ec20c798dc93d881cdffa5cb1125a0
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Sep 11 03:29:46 2008 +1000

    nv50/exa: work around corruption issues (see detailed commit msg)
    
    It's not possible for us to do this properly without using the exa
    pixmap hooks, they require a real memory manager, and is being
    worked on in the ng branches, which doesn't currently support nv5x
    at all.
    
    For a better solution until then:
      http://nouveau.freedesktop.org/wiki/NV50Support

commit f8c0af3886142ea59936a77006ead0cd2c4ff795
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Sep 5 23:08:14 2008 +0200

    Partly revert ea152819f45b6cf92f6742ed3f9f639cdbbd53f0, alignment is needed.

commit ea152819f45b6cf92f6742ed3f9f639cdbbd53f0
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 5 22:51:27 2008 +0200

    exa: align offscreenBase to something sensible
    - Aligning virtualY makes no sense whatsoever.
    - displayWidth is the "pitch-width" of the framebuffer.

commit 95c19b98b38310c543758fe4288a9e47b970fe67
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Sep 4 07:51:03 2008 +0200

    Add 8200 detection.

commit 6dd8ad4ed3f89c6ed9e61708a587d417c8d984fe
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Aug 30 17:51:05 2008 +0200

    nv50: solid fill shouldn't use a pattern rop + minor changes

commit b2b726d59fd8af819a7e464824a49f6e6fc10b84
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 24 00:18:40 2008 +0100

    randr12: merge output detection functions

commit a223e581b06ffb308aecc2365795951e2c021f29
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 24 00:08:41 2008 +0100

    randr12: remember the edid from detection for getting modes later
    
    also split native mode finding into separate function

commit 16d9e89d9cfae1c21999d880c557ae283e14178e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 24 19:56:24 2008 +0100

    randr12: detypedef private structs and use a define to get to the privates

commit 3b3f3cdbe0f69c57153e070f248ff001cd5a4a17
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 24 00:31:35 2008 +0100

    Remove unused code

commit 1e2b87c459a3a0eacd630f1de8b567c36cc792bd
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Aug 25 20:23:05 2008 +0100

    randr12: make the nouveau experience less green

commit f89af0e6bc5ac88d0755f9402b772ca823518298
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Aug 23 03:44:28 2008 +0200

    nv50: micro cleanup

commit 94bf1060cc9d2f4c0a14bc036f8b76c4d9bfc7d7
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Aug 23 03:39:39 2008 +0200

    nv50: do ROPs properly this time
    - Table should work for pre-nv50 as well, i just don't have a card plugged in to be sure.

commit 6bd14e4ffe1d5fd9420c4ebb46c9c0844d0547f9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Aug 22 17:56:31 2008 +0200

    nv10: composite is an async operation by default, no need to call exaMarkSync().

commit 9f11d13e68bbf72be814b37fa3d03853eec981b9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Aug 22 17:53:11 2008 +0200

    exa: FIRE_RING at the end of composite

commit 137d099294617adead2cf3d5cc3372d18579eaef
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Aug 21 23:17:06 2008 +0200

    nv50: move VERTEX_{START,END} to {Prepare,Done}Composite
    - If PrepareComposite returns TRUE, then everything upto DoneComposite is required.

commit 34dc05fbc4835ec68de5a1f70cc094ff6efcf310
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Aug 21 22:50:49 2008 +0200

    nv50: minor tweaks to composite
    - Make the blend stuff more consistent with other composite implementations.
    - Verified with "rendercheck -f a8r8g8b8,x8r8g8b8,r5g6b5,a8 -t {blend,composite,cacomposite}" for all accelerated ops.

commit eca997750b1cc2263f804afba242f16b6d960e02
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Aug 21 20:01:49 2008 +0200

    nv50: handle ROPs better
    - Handle ROP's more like pre-NV50 code.
    - Special case for 32bpp which seems to work.
    - This does NOT fix all rendering issues, just an improvement.

commit e468df855abd8d8e4fecd2445c82bb8f824297fb
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Aug 20 19:14:54 2008 +0200

    nv50: clip SIFC and add {Prepare,Finish}Access hooks.
    
    - when w*cpp is not aligned to a dword, then it's possible to end up with crap at the end of a line, so clip it.
    - {Prepare,Finish}Access hooks force tiled memory to be migrated upon cpu access.
    - Added an option to disable these hooks in case you hit a xserver bug that existed up until very recently.

commit 0c0c1ab2ce786def653e8adb95c7c5a8ff9c7eca
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Aug 19 00:02:00 2008 +0100

    randr12: don't cache pll values (fixes newrestore removal regression)
    
    for 5ms, it's really not worth it

commit 544fd3c502287754f2161c21514203ccaab8aed9
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Aug 18 21:50:37 2008 +0100

    Remove some of the inaccuracies in the manpage

commit e3d9cb926e56d28b7cadd0026ae76c076faced75
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Aug 18 21:40:36 2008 +0100

    NV_ARCH_04 can have rotated output, it's just not accelerated

commit 40e920fafb9f22da23ef11c941561bb14966dc47
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Aug 18 21:39:18 2008 +0100

    Delete ShadowFB rotation
    
    And nothing of value was lost.

commit 6352d7db24451b014b5f6b873881d103fc1eb316
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Aug 18 00:59:32 2008 +0100

    Bye bye 8 bit depth

commit 33d52e476b64cd91dc4b01c6826892f2da9499b0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 17 23:52:28 2008 +0100

    CrtcNumber option is long gone

commit a9393a87d36cc486114842275bb78e7e75de754e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 17 23:17:01 2008 +0100

    Micro-tidyups to nv_driver and nouveau_xv

commit 8ed30d05afe4a5bb077c088c48c28741414c09d3
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 17 16:57:17 2008 +0100

    randr12: a few line length improvements

commit 666ab70754035c569eaa2550ca77c92fe3eaaff3
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Aug 17 22:44:11 2008 +0200

    Kill some 8 bit code.

commit bee8450931395b23040a4cb1ddcb09f8a476cb93
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Aug 17 22:25:43 2008 +0200

    Fix IFC for 16bpp. Also fix the color accuracy of 16bpp solid fills.

commit 609b10ff00c9e8d51fd7c9a5fb62120516780aed
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 17 03:51:39 2008 +0100

    0x48 exception does not apply on BIT cards

commit a9e2d47e2cee7db447063d7c33f3e42a8d865c92
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 17 02:48:33 2008 +0100

    randr12: some code simplification, rearrangement and tidying
    
    We don't claim to support a bpp of 15 or 24, so some old calculations can be simplified

commit 5715f95b37ad182377024f468982608b48eb3409
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 17 02:27:42 2008 +0100

    NewRestore: remove, due to lack of interest
    
    nobody wants to do text modes manually. for any future masochists, it's here in the history

commit d2e924e847273c5b4d342d0ad611de7d106df429
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 17 01:37:41 2008 +0100

    randr12: remove another field member

commit 55f490c8c29b103d7d8853e2126a8366304f4125
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 17 01:26:20 2008 +0100

    randr12: fpWidth and fpHeight no more

commit 4cbbd44db614d250fdaaf648db2d70ec9bc2f6d9
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Aug 17 00:38:23 2008 +0100

    randr12: improve aspect scaling code

commit 8a364682fd67c10c153cb0778c914a4754e82ddd
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Aug 16 23:15:29 2008 +0100

    randr12: for native scaling, a clock check isn't enough
    
    1280x1024 and 1280x960 can have the same clock

commit 8793bb1d7b79632678d7ce9f1e94c79dfd55fa3c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Aug 15 23:02:48 2008 +0100

    Apply minimum front porch only when necessary (#15949)
    
    Also, read minimum front porch from bios table

commit 83bb26fd9a8bb283c406bc34d1d7ad0b53d7098a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Aug 16 17:18:21 2008 +0200

    NV50: disallow doublescan modes on TMDS/LVDS

commit 7d5b345f69bf63d36207a7f6ac4d01001d62e79c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Aug 16 15:33:13 2008 +0200

    NV50: extra warning message

commit 743c696c8b0e420a67ce1552ac0cec49c0fdc0f2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Aug 16 15:28:43 2008 +0200

    NV50: a half decent attempt at doing something when LVDS has no DDC

commit fcbaa10a945e04d77c6ea8f83b738fb6c9e47dd5
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Aug 16 14:35:05 2008 +0200

    Forgot something.

commit 628acddedc7755a16471e9beee3d95d3b8f11150
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Aug 16 14:24:18 2008 +0200

    NV50: support extended i2c ports (4 and 5)

commit c845f5ac0a54b17a9911155030234c229e80626c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Aug 16 14:02:51 2008 +0200

    nv50: fix some of the rendering bugs
    
    - It seems that 32bpp solid fill only works well for for the non-rop case.
    - The SRCCOPY_PREMULT comes from nv and seems to work well, in combination with the above fallback.
    - This does not affect the strange stripes with font rendering issue.

commit 18288208bdb7f872f0a2e227d20b77c3397747c2
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Aug 15 01:40:01 2008 +0100

    Redo parsing for panels with EDID, and fix nv3x in the process (#17138)
    
    breakage a possibility :)

commit c9d4e86022bffd00d89076a921b734645145f7db
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Aug 12 14:15:03 2008 +0100

    Try harder to load a good vbios image

commit ae594786ffc1cdca5bdd8c8638225819f851061b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Aug 6 00:31:39 2008 +0100

    Deal with mobile cards that scribble over the fp strap at POST
    
    It's probably safe to assume a mobile card will have been POSTed at boot, so
    this should be fine.
    Hopefully there are no cards which have bit 2 set at 0x48 and now break...

commit 776670613f79cce3891c65d2f688979767cd1e6d
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Aug 15 00:43:02 2008 +0200

    Fix a 16bpp issue, also remove old code that mostly worked around core EXA issues in older xservers.

commit 6854f819f6bb89d67bfb737fd24c3e8b16e67e46
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Aug 5 13:08:22 2008 +0200

    NV50: Disable messages from hide, show and load cursor, as they clutter the logs.

commit 4b24be811b839f9f836b9f8574fc808d2182dd30
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Aug 4 16:09:28 2008 +1000

    xv: fix thinko from when source was reformatted

commit 30f54f2a4b81afde129170a26189cdb2bd3c7e9c
Author: Younes Manton <younes.m@gmail.com>
Date:   Sun Aug 3 12:29:57 2008 -0400

    g3dvl: Temporarily disable IDCT.

commit 89d786435267af58bcecaff206a09b035e666df5
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Jul 29 23:38:45 2008 +1000

    nv50: fix mystery typo

commit c0b67f3f3490e826c86eedb32bbcf327592aaaf5
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Jul 29 01:26:20 2008 +1000

    remove use of implicit variables from pushbuf macros
    
    This matches the gallium winsys now.  At some point the ddx will get updates
    so the "common" code is once again in sync to make it easier to do mm
    changes to both the ddx and dri simultaneously.
    
    But, I want to get this part out of the way first as the changes might take
    a bit of work - and I don't want to have to deal with merge conflicts
    everywhere if someone changes the accel code before I'm done :)

commit 80278c9f53f7c357e499bf2b3c5a1dff75fb9651
Author: Younes Manton <younes.m@gmail.com>
Date:   Sun Jul 27 16:48:58 2008 -0400

    g3dvl: Basic XvMC initialization.

commit 1f8e27fd1d92d1c07dd8387f1a5e751ab3fab54a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jul 27 00:09:02 2008 +0200

    NV50: I was proven wrong quicker than i thought, reinstate a slightly prettier hack.

commit 41d46f59eb055130d5d415f0573fbede957c66c3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jul 26 21:53:26 2008 +0200

    NV50: forgot something

commit 1b905249c492af4485a9a2f4e7ae3ad5441c8eb5
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jul 26 21:50:34 2008 +0200

    NV50: my best guess at the lvds bios table, time will tell if it's correct for more than a few cases

commit f3ec6e0e2d84e172cb634fd1348a54aef7256e74
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 24 15:41:57 2008 +1000

    nouveau: fix macro as pointed out my moondrake on irc

commit 6652e9c85fe8e807ed3d8ff76ec18c250aef436f
Author: Ben Skeggs <skeggsb@nisroch.keine.ath.cx>
Date:   Thu Jul 24 10:13:05 2008 +1000

    nv50: support YUY2 in textured video adaptor

commit 3534f40b64496d9f6f95148ab81b9321057f7af1
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jul 24 09:39:09 2008 +1000

    nv50: remove 32bpp solid fill fallback
    
    It seems to work, but there's probably a good reason it's a fallback in nv,
    so may be reincarnated with a more specific fallback if needed.

commit 87f7d1f7084032110c347cb73f63e9a929d8c00e
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jul 24 09:38:27 2008 +1000

    Revert "NV50EXA: read the notes + cleanup + enabled 32bpp solid fill"
    
    This reverts commit 0b6249fed6909af30856e1afc1a0dd4cd98c0b9e.

commit ba7c239e7a13c4726dab7c686ee1c7f34d03a593
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Jul 24 01:30:16 2008 +0200

    NV50EXA: serious brain fart of my part, sorry
    
    - prepare copy may set up a rop and will set operation appropriately.

commit 0b6249fed6909af30856e1afc1a0dd4cd98c0b9e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jul 23 21:01:57 2008 +0200

    NV50EXA: read the notes + cleanup + enabled 32bpp solid fill
    
    - I observe occasional corruption, some of this goes away when using a compositing manager.
    - The above statement contradicts my earlier statement in the previous commit message.
    - 32bpp solid fills seem to work fine, but i left the original fallback in case something pops up.
    - There is definately something wrong somewhere, i just don't know what.

commit edbfbd09ac0a05c4125c3217f5d9c8f198d9345d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jul 23 13:34:28 2008 +0200

    EXA: put NOUVEAU_FALLBACK in a do { } while (0), fixed opera corruption for me.
    
    - I don't understand why a single line define would need this, but i noticed that turning on the fallback info fixed rendering.

commit 36d13082dd2c2ba5d490b3dbc6e82d9ccfed8669
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jul 20 15:44:47 2008 +0200

    NV50_KMS: some basic scaling and dithering output property support

commit 022a9ed5c2657466dd2471a1b29d5e8bc92ca57a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Jul 19 22:14:50 2008 +1000

    nv50: no more sync in composite() :)
    
    0x502d mthd 0x0110 some kind of 2D cache flush?

commit 6d8096c72e1aa160cef6729443ed06305a8ae870
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Jul 18 13:57:13 2008 +1000

    nv50: sync after composite for the moment
    
    This corrects some severe text rendering issues that get *very* bad with
    server 1.5.  Will look into a proper fix soon.

commit c68d8806b309ef4b48d7a98d6fc7aeccb8bb05ac
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Jul 18 13:39:59 2008 +1000

    nv50: punt vertex emission macro out to header

commit 4ad74cb03070f5279e0b1de2ed326f1167400d60
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jul 17 11:15:59 2008 +1000

    exa: missed a reloc delta
    
    Can't actually hit this bug currently, but one day perhaps :)

commit 98a9056224a86244f99ef7e844cda363e563a446
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jul 17 11:15:08 2008 +1000

    nv50: remove acquire/release surface stuff
    
    It's left over from code that never made it to git in the first place,
    long overdue removal.

commit f0305a29c2b4010894362d17f21cdfec39cd7b92
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jul 17 11:14:02 2008 +1000

    exa: rename m2mf locals to prevent some confusion

commit 140c36ed936f4f28842af88efdd8b824c01bb097
Author: Danny <obiwan@mailmij.org>
Date:   Fri Jul 18 03:07:38 2008 +0100

    randr12: fix dithering output property endian issue (#16624)
    
    tweaked and commented by Stuart Bennett

commit b36802fe90165cf0fea61728b06605be5ac25d8d
Author: Pawel Worach <pawel.worach@gmail.com>
Date:   Fri Jul 18 01:17:18 2008 +0200

    Fix for #14858 - freebsd compile. Someone still needs to fix the kernel part though.

commit 6f5e90ae739c64478ddf3e042e2bc9c4ff2b951c
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Jul 12 02:24:54 2008 +1000

    nv30: more header name changes...

commit 4b8427af583a8f84a09e8bd8d6ad614575a4f9c7
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Jul 12 02:15:08 2008 +1000

    nv30: more bustage from header update

commit 1672a783c4af58c80ed549fb3dc63c07fc75a882
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Jul 12 02:03:58 2008 +1000

    nv30: un-change something that somehow changed in an earlier commit. oops!

commit dae59585abec4b514789a8e580d30757f10d0357
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Jul 8 12:28:18 2008 +1000

    nv50: exa/xv share some stuff, punt it out to nv50_accel.[ch]

commit 17fbd810748b61b298c1ea9729d94f7d1177253b
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Jul 8 12:09:09 2008 +1000

    nv50: Xv support
    
    The NV12 YCbCr->RGB shader is hand-written just like the composite shaders,
    hopefully correct!  I'll probably put a disasm next to each opcode at some
    point so it doesn't look like just a bunch of magics.
    
    You'll need to use a composite manager if you want to watch videos, we can't
    render directly to the screen for the same reasons as mentioned in the
    composite commit.  Though, a simple workaround is possible in the Xv case,
    so that'll probably come at some point.  For now, PutImage() will fail with
    BadMatch.
    
    The Y and UV plane upload may not be 100% for what NV50 requires, I want to
    rework all that at some point anyway.  For now, at least there's some form
    of accelerated video to work with.
    
    Enjoy :)

commit ec452786d9aa3b6db41f1ab3c89aaa20a758f89e
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jul 6 20:38:44 2008 +1000

    nv50: de-magic things before someone accuses me of being an NVIDIA employee

commit ad56c5e27642674d8e435bbbe3d6030097a01ff9
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jul 6 01:30:21 2008 +1000

    nv50: exa composite

commit 33fad279e935a5a134ee5cc1777b8ed7510101d0
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jul 6 01:21:39 2008 +1000

    nv50: tile offscreen pixmaps
    
    Until someone figures out how to make the display engine scan out from
    tiled surfaces things will be a bit painful.  Future commits for exa
    composite and Xv will require the use of the 3D engine, which will *not*
    render to linear surfaces.. a composite manager will probably be a must
    for it to be usable.
    
    I really don't want the NOUVEAU_MEM_TILE ioctl in the end, but we'll have
    to deal with it until we can drop support for <xorg-server-1.5.  EXA driver
    handled pixmaps are far far nicer :)

commit 5c1deac8384413dc483238f60c366e98253c11d6
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jul 6 00:57:08 2008 +1000

    exa: pass window coords to m2mf-based UTS/DFS

commit b1f316977e2c79fdf5c83092e953bdfc988299e1
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Jul 7 01:03:02 2008 +1000

    xv: remove some disturbing abuses of buffer related things
    
    Also brings to attention a point about the overlay when we use a real
    memory manager.  We'll need to find a way for the overlay to signal it's
    finished with a buffer, or just resort to pinning pPriv->video_mem..

commit 0ce028b6aaa6c20a1578148add2a96b2d37d9108
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jul 6 13:45:32 2008 +0200

    EXA: add a pixmapIsOffscreen hook.

commit 86c70df254e63ebc5c405803d6faa9ae33df4995
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jul 6 12:52:16 2008 +0200

    NV50_KMS: support gamma changes

commit 6de89c8cb219cc82b46e0d0d723fa9d1cefe4ac8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jul 6 12:29:13 2008 +0200

    NV50: Unaccelerated rotation support.
    
    - This will need a PixmapIsOffscreen hook before it will be considered for acceleration.

commit 788fefa2e78a4abf7bd5c396ab9639bc6ff78451
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jul 6 01:03:44 2008 +0200

    NV50_KMS: Unaccelerated rotation support.
    
    - This will need a PixmapIsOffscreen hook for it to be ever considered for acceleration.

commit 2bc1cb832e0ded6cd1411757bec2a4b03536b7ea
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jul 6 01:02:45 2008 +0200

    Revert "EXA: Add PixmapIsOffscreen hook for EXA versions that allow it."
    
    This reverts commit 5a5aee10f84fbea70eee69ece17ddf6e797497a6.
    This was never supposed to end up here as it's broken.

commit 5a5aee10f84fbea70eee69ece17ddf6e797497a6
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jul 5 23:07:58 2008 +0200

    EXA: Add PixmapIsOffscreen hook for EXA versions that allow it.
    
    - This should allow more flexibility for rotation shadow buffers.

commit b9f2358ac35caedbba0339649ef13b03f209f2a7
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jul 6 03:50:03 2008 +1000

    xv: remove some defines that are in a header now

commit 9f53b2a341a81e1bff87fee8bf5c2754cac17849
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jul 6 02:28:26 2008 +1000

    xv: remove drawable handling from hw-specific PutImage.. it's common...

commit a50bba662ddfe49f1b0a7f8faa3668f5e810811f
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jul 6 01:57:17 2008 +1000

    xv: misc cleanups

commit 08e9489b79395b234282b0c03d94601ce57678b8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jul 5 12:47:48 2008 +0200

    NV50_KMS: minor change

commit ea7e85b493ff0f684f9ccad92f84348cd835719b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jul 4 23:05:20 2008 +0200

    Fix some compile warnings.

commit 3298249d8267c27235653f17379f8c9f18e4f344
Author: Ben Skeggs <skeggsb@nisroch.keine.ath.cx>
Date:   Thu Jul 3 23:54:13 2008 +1000

    xv: reformat source so mere mortals can understand it

commit a1e8ccdf85c5a0177df38a8a2d8c99d60890ec96
Author: Ben Skeggs <skeggsb@nisroch.(none)>
Date:   Thu Jul 3 17:07:45 2008 +1000

    xv: nv_video.c to nouveau_xv.c

commit 3e17781625c0ef0ec34ee23a6e999de7f1fe4524
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Jul 3 08:30:43 2008 +0200

    NV50_KMS: autodetect kernel modesetting when active

commit 48c2116fb31872111239f5434215f30c8707091e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jul 2 19:04:58 2008 +0200

    NV50_KMS: no int10 please

commit 11102af2896b3fdf2364854b2d7939b2802c5b2a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jun 27 16:21:19 2008 +0100

    Backport console font save/restore from nouveau_ms

commit ca2c55dfbf65ac268d43ba62db2399976eaf8f0a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jun 26 14:44:45 2008 +0100

    randr12: fix mode detection for when screen size changes
    
    also some mem leaks

commit 9c6eb667aa48f87f6bbbdae10cc9f4d237bdb0c6
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jun 28 15:47:18 2008 +0200

    NV04-NV4E: Save and restore FB_START

commit 82fe9a21596ab80157df20b269ce8df41315de83
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jun 27 18:49:16 2008 +0200

    NV50_KMS: switch to output dpms

commit 13ce1f4c1d02e70333a192db2efefb3f6a6765e3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jun 25 19:45:12 2008 +0200

    Properly close drm when exiting + misc cleanup.

commit 7cb0eed603ea0bd196a7471e43d60fa5e518c7fb
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jun 25 19:07:58 2008 +0200

    Fixup and add some license statements.
    
    - The changed statements are a response to nv commit 2fdcda8ea62eba1b7885f0a75249884715936247.

commit 27c7c88431cf368c3d3a953daf03ce3f9f15bc3a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Jun 25 04:01:21 2008 +1000

    change hack to work with latest drm changes..

commit 99a4b686d2b1f8e6768b8cd1cc3fcb6cea2bf6d3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jun 24 00:02:25 2008 +0200

    NV50: unbreak kms and implement a basic off mode/dpms

commit 1a23dbd1878909709fc130e00f6171508dcd41bf
Author: Ben Skeggs <skeggsb@nisroch.keine.ath.cx>
Date:   Tue Jun 24 02:24:42 2008 +1000

    nv50: stub out NV50SorSetClockMode for LVDS, it doesn't work there

commit 2ccc80bd87a76a9f0498cfec531e8a46cbd2c384
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Jun 23 02:10:09 2008 +1000

    nv50: bring in int10-constole-restore hack from nv driver
    
    Lack of console restore has been annoying me personally lately while working
    on 3D, I lack the time/modsetting skills to fix it properly at the moment,
    so this'll do.

commit 73b4fcc20334ac6cd2076c658a4937f9a98ee06d
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Jun 23 01:47:55 2008 +1000

    fix non-kms build/run

commit 75d8947d40e19c5fc039caf4289cf94fd1570eda
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jun 22 16:34:22 2008 +0200

    NV50: Some basic code to get kernel modesetting going.
    
    - This will get a cleanup later on.

commit df52dc4664df11d57fcf8a6c9ae3f87a149e5392
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jun 13 02:11:09 2008 +0100

    No need for G80+ LVDS conf bits reports
    
    I've got a few already.

commit 1813559a20f0786b4decdb645f7ba3f52bc30739
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jun 13 01:58:41 2008 +0100

    More DCB 1.5 TV variants (#16252 and #16342)

commit 29c4a58bb2ba476f9558bda31f1082b4685555fc
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jun 13 01:40:31 2008 +0100

    Be a little more discerning about the BIT bios signature
    
    Thank you ABIT

commit e8c790721d99e171c57b8dd497f5b3e82126c78b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jun 13 01:25:49 2008 +0100

    LVDS_INIT should not always use head A
    
    While the script doesn't need the head variable set correctly,
    link_head_and_output still gets called and will therefore break panels expecting
    to be on head B
    Fixes Apple NV34 console restore

commit fc137f23bed7405221b7f483d9151e296b99caf0
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jun 13 19:12:38 2008 +0200

    NV50: lvds is probably still broken, but it's a step in the right direction
    
    - Just something i had lingering around.
    - Note that lvds still doesn't run by default, but you're more than welcome to fix it ;-)

commit e034616ab2bbbc486f90c5f64e2bd2de194cf92e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu May 22 21:08:48 2008 +0200

    NV50: A small extra piece of init that may prove useful to someone, somewhere, at some point for something.

commit c21594cf452a1263682386d04718531d76a7a9b8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue May 20 19:19:53 2008 +0200

    NV50: Be consistent with rules-ng.

commit 9c1d87fa9e6152bffc5c5cdf16b1931cc6e58399
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat May 10 21:58:00 2008 +0200

    NV50: Some misc things.

commit 5f08db9057f2970171186b20a25d346386dcb0f2
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu May 8 21:36:05 2008 +0100

    Cosmetic g80 laptop dcb parsing enhancement

commit 6a460eae941f3e9a7a8a0297efbbd12dca71a9dd
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu May 8 14:17:38 2008 +0100

    randr12: some reordering, tidying &c

commit 7455bc89116bfc5e88fbd444d83c1415a6020a7f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 29 19:42:54 2008 +0100

    Enable RandR 1.2 code-path by default

commit 98a751e773c098382e7675e41ee60ce3d9a67ce0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed May 7 21:25:03 2008 +0100

    Don't call call_lvds_script with a null dcbent pointer
    
    Stumbled over by hiyuh :)

commit 77b24bc93659471bb20254847da124fdaba13a54
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon May 5 00:56:28 2008 +0100

    randr12: tidy up some nv50 remnants in the pre nv50 code

commit 8997f83cd2727b76240e9dc31ec7751f6d69cf6b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue May 6 19:46:52 2008 +0200

    NV50: Some misc fixes.
    
    - Even though tv-out is mentioned, it by no means implies that is (nearly) functional.

commit ae574ec7d930d8708e4dd9d1d47558666019afe5
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon May 5 11:02:07 2008 +0200

    nv50_exa.c had no license statement.

commit a7af057ff67cf5d7baf78d852dee5ac69b24e706
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon May 5 01:26:37 2008 +0200

    NV50: Rework the modesetting code into a different model.
    
    - There is now interface independent code for most things.
    - This structure, although not exclusive, is only used for NV50 atm.
    - The change in approach is that the concept of a connector is added to the model (randr12 sucks in this aspect).
    - I'm hacking around randr trying to create a single output for each connector, the indices are the bus numbers.
    - Limitations: Hot swapping vga and dvi of same monitor will not make randr12 think it changed, so for the moment force a change.
    - Concept is largely inspired by the radeonhd driver.

commit 5e1b5708d3a7e4298f80b1a1b8bb3fafae0c69bd
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri May 2 20:36:59 2008 +0100

    xv: nv10 double-buffered overlay mode was getting set on nv04

commit 85536023ed7050632d121299ab99382e096b9984
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Apr 30 00:59:47 2008 +0100

    Use the actual number of BIT table entries

commit 78588c71ffd19e18602b95a55186bc53eebb51c3
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Apr 28 16:51:01 2008 +0100

    randr12, xv: manual overlay clipping for randr12 (see #12825)
    
    There could be something to be said for doing this clipping when using the blitter and texture adapters too

commit 6f7d00a0cb4ec85b058afb0150a122a124542b5f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 29 22:53:40 2008 +0100

    randr12: remove unneeded separate dcb_entry and "or" members
    
    Make off-chip outputs clearer too

commit 52e58c7e799697989fcfbf95050ce10a4c3d1f8f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 29 22:08:01 2008 +0100

    Pass DCB entry structs in bios functions, rather than index

commit 0c1da6907d8e29ed1c058f9655d436c228ea91b6
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 29 21:53:22 2008 +0100

    Pass output field, rather than dcb indices, for tmds access functions

commit 2333bc907a4be3c7e36bdd02f27e22b63a7ee7c3
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 29 21:58:17 2008 +0100

    Add an index field to dcb entries, and carry pointer to dcb entry in output struct

commit 21f062cad184f21d33d7f5b43f86937979291b58
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 29 21:27:07 2008 +0100

    randr12, xv: oops, transform_in_use doesn't exist on xserver 1.3

commit ee78dc0abef626e29f7617a4b324e847bab1abcc
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Apr 28 02:12:17 2008 +0100

    randr12: C51 I2C

commit 9b70dfaf4f0317e622ca64fc0804f74a31158108
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 29 18:46:24 2008 +0100

    randr12: only set cr59 to 1 for tmds (fixes nv34 issue)

commit c8cec9b2a0b18cd1159613d4dd218725695aef7c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Apr 28 17:00:27 2008 +0100

    randr12, xv: no overlay when the crtc is transformed

commit 3233ebba07e7adab347dc3c6f9d17f02e1a9d32b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Apr 26 02:08:24 2008 +0100

    randr12: fix spread spectrum setting for lvds and turn it off during dpms off
    
    Assuming that the bios has set this up correctly for LVDS initially is probably safe

commit 467f83aa43bffdf545b513fdb7b11b4fe2205b4f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Apr 26 19:59:58 2008 +0100

    randr12: make nv50 code depend on Architecture

commit 8b165722d9f9461353abf84b4136e33b816ac842
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Apr 26 01:21:50 2008 +0100

    CR27 appears to contain the chip revision

commit 59ff20738e88d6621f9beaea94810274029a21a3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Apr 27 19:52:41 2008 +0200

    NV50: A little bit more information, no functional change.

commit bb5a2a105f264502d0985ce70e76d5a3d3b6463c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Apr 25 22:09:46 2008 +0100

    randr12: sel_clk binding fix

commit 5a85626cccbba80ef3d6fb2fb90ae609b7abde15
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Apr 25 02:09:18 2008 +0100

    randr12: unified mode validation
    
    doublescan/interlace limits applied too

commit 38ad350118aa9592bdbcb530fe63b85983fb9f64
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Apr 25 00:03:41 2008 +0100

    randr12: only set up one spread spectrum clock on pre nv40
    
    avoids inadvertently getting wobbly crt pictures

commit dfd8b42f91257f2cb0762b3d9b07612a7edac549
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Apr 24 22:23:50 2008 +0100

    randr12: deny doublescan modes to digital outputs

commit d150ce5c633c90a82411b4b8e44fa4b91647e6a8
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Apr 24 01:22:49 2008 +0100

    randr12: off-chip dvi dpms and fp_control dpms fixed properly
    
    Also solves output exclusion problem: two crtcs claiming the same output
    through cr33 does not work

commit dd152ce186fea953968805cf4a1b309a1fd3987b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Apr 24 00:24:35 2008 +0100

    randr12: set CRTCX_LCD in nv_output
    
    This makes my nv28 external dvi work.

commit b8d401b0a56d23db7199147e6a5dee1edccff4ff
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Apr 24 00:01:50 2008 +0100

    These made up defines are more misleading than helpful

commit fa8c8437798cfc5494a639d649f0f91f0e7275ce
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 22 22:42:12 2008 +0100

    randr12: remove FPP setting and other FSEL changes

commit a083bb1a55d0983991c45d113eb7e9814369fff4
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 22 23:25:40 2008 +0100

    randr12: oops (fix to 9edf6d60)

commit 16f420e339f0dd6d55d7b87763d97c2eb8e77e66
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 22 21:34:52 2008 +0100

    randr12: RAMDAC_OUTPUT is only for analogue outputs

commit 52174047f3f817fa9ce3674440a13687b73ccea8
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 22 21:29:48 2008 +0100

    Revert "randr12: correct SEL_CLK register beheaviour for outputs with or=2"
    
    This reverts commit 77af887089be6fef7b793e3c3afdb98ac90a2e8c.
    
    External DVI (which is source of or == 2) do not use SEL_CLK

commit 61e416153b24516951962aca407ceaa9b7885e22
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Apr 13 02:40:55 2008 +0200

    NV50: Another few regs.

commit 5328370d2f7e10c61485572f53031deace69c515
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Apr 13 02:16:27 2008 +0200

    NV50: Some more regs.

commit e5511a564564350bd8755b7f18a1448ea7c796de
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Apr 13 01:21:20 2008 +0200

    NV50: I now know what UNK8A8 is, so update the value register as well.

commit 2c9027679db1657e6fe02cf6674024ca97f4cd6e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Apr 12 02:11:32 2008 +0200

    NV50: Re-implement output status caching.

commit d7681e8ad70c07ec963ac9425b868a2686d79769
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Apr 11 17:28:16 2008 +0100

    randr12: separate pll and arbitration stages of calc_state_ext, and call from mode_set directly

commit 0bf08d7699d7c3a1748060febded1c8b3950c9bd
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Apr 11 16:20:21 2008 +0100

    state->config is not used

commit 08b8bd8a97b580a57d7bb75b3da7827d65c046f5
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Apr 4 18:59:29 2008 +0100

    randr12: unite pre nv40 and nv40 pll restore

commit 5b443084ec7b03230d0ec7490c5a3378a9f7187e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 8 02:25:34 2008 +0100

    Use the correct reference clock when reading (V)PLLs

commit 0f533b8cc12f49f5d5ac017838f7330a4f8b47ea
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 8 02:25:22 2008 +0100

    Various PLL code improvements

commit 4e1caa6edfe9499e6c501e70a8fba14bae510462
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Apr 9 18:55:06 2008 +0200

    NV50: Some misc stuff.

commit 099128175ad31956fd1c6622166b65f4ab1fe370
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Apr 8 16:48:37 2008 +1000

    nv50: fix distcheck since header removal

commit 4af376fa6031bd41dc247e950319f3a151c49f22
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 8 00:28:03 2008 +0100

    MCP67 does not do the second stage gain tests

commit dbca8b65d7b12a1dd2eb7aee3ac37ece0bd4ce65
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 8 01:31:14 2008 +0100

    PLL stuff

commit 39b2e0b842f4a4e1c3de96c94e380aa9a0327c12
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Apr 5 05:20:54 2008 +0100

    If no PLL coefficients compatible with the constraints exist, don't brick the hardware

commit 0b54450e1db7c6411528bc4a3bac4d1a42510aca
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Apr 7 22:12:44 2008 +0200

    NV50: Scaling works fine on VGA connectors, so support that as well.
    
    - The default is SCALE_PANEL instead of SCALE_ASPECT for obvious reasons.

commit 891e72f4316c4e7e1b9d06f39e075b1a8a8a8c53
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Apr 7 21:18:54 2008 +0200

    NV50: Deobfuscate some more commands.

commit 13c701f9d23a598c281ced726070a219e1b78607
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Apr 7 19:29:55 2008 +0200

    Make some CARD32 die.

commit a3a0710604017f3ceb9c552552d71c3f5dcfab0f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Apr 7 19:09:35 2008 +0200

    NV50: Give a few registers an UNK label.

commit be72a7c9104c1c1d6db960b1d80cc4d820d37440
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Apr 7 18:35:18 2008 +0200

    randr12: NV04/05/06 can't accelerate rotation, so it's better to disable it.

commit 9cf76c91a661587d9c54845e6a06fb25cf9b55a2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Apr 6 23:36:15 2008 +0200

    NV50: Some more stuff.

commit c725e33078a2fed374fbb52175beba92b0b9fbe8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Apr 6 19:49:11 2008 +0200

    NV50: minor rename to avoid confusion

commit fcda539ce60ca02f2f4589157f8b8c522430571f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Apr 6 15:16:40 2008 +0200

    NV50: Deobfuscate another register (partially).

commit fa93541b257a8055ea8b55c883475d2db717d971
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Apr 6 15:05:33 2008 +0200

    NV50: Fix another deadlock in the clock setting code.
    
    - Swapping my monitor from dvi to vga causes no mode (=clock) change, but still the supervisor expects a clock change.
    - This meant it got stuck in stage 2, with no clock that is supposed to change.

commit c001fea3b0ae3921c063e7f44c298cafdfef51f6
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Apr 5 23:33:22 2008 +0200

    Forgot a few things.

commit 17a8e1743478e5548a90caf8f84a387366020416
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Apr 5 23:23:22 2008 +0200

    NV50: rename randr-1.2 functions to be nv50_something_function

commit a71ef4da76e33e84303a8b9181dbcfd655e78aa9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Apr 5 23:00:39 2008 +0200

    NV50: Some more cleanup.

commit aeab563cc89b2fc3cd6cb306aab880b6e28f2b64
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Apr 5 22:52:58 2008 +0200

    NV50: Some reordering.

commit b899ab75781a3076898791381604be575c6d8a70
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Apr 5 21:17:23 2008 +0200

    Some minor corrections.

commit b0ef158a7e281329825c7b6c10cab6097e627b54
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Apr 5 21:06:03 2008 +0200

    NV50: Document dvi hotplug detection.
    
    - This can only be used once modesetting is moved to the kernel.

commit be54b9299b4a261fc707b74407cf4d847fcbb243
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Apr 5 16:16:26 2008 +0200

    NV50: Remove some questionable guesses.

commit c06f202cfbee8568fb8358ea1caffec41c71e648
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Apr 5 01:54:06 2008 +0200

    nvbios: Drop a N2/M2 requirement on NV5x hardware, as it prevents getting a mode on 1024x768'ish and lower.
    
    - Limitations are very strict in nv5x bios tables and N2/M2 can drop below 2 (the blob does this too).

commit 5ce26b9aec214dd99e5399fe0f864d8faad15d2c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Apr 4 22:49:06 2008 +0200

    nvbios: Add some valid register ranges for nv50.

commit ce86484979d873325ec4c74ed84107be9ad9ba62
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Apr 4 22:38:30 2008 +0200

    NV50: Switch to common pll calculator function.

commit 821ad3d643f9564d043c7f3909e0b8be28e94965
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Apr 2 16:58:45 2008 +0100

    randr12: delete stuff commented out a week ago that no one's complained about

commit e90e534728e9cbe65ee6c70faf596db449495665
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Apr 4 17:13:25 2008 +0200

    NV50: Minor comment updates.

commit 08550984aba2bfa3eaeeddbbf6af25206819abe8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Apr 4 17:04:49 2008 +0200

    NV50: Some more stuff.

commit ef4339aacf72bf5422b22ab18b73416f2738b284
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Apr 4 16:49:00 2008 +0200

    NV50: Some more registers.

commit 3183df1aa61f3c441a93e5a8b50db6628d804465
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Apr 3 22:42:31 2008 +0200

    NV50: Update my knowledge of interrupts.

commit 04fd80d29913ed02524de177fa7c87b616147d15
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Apr 3 03:00:13 2008 +0100

    Small declaration reordering

commit 92934e4b7571a578386327ebdb59eb6d10992763
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Apr 3 01:03:38 2008 +0100

    Move some variable declarations in the bios parser

commit 927384005a01a606835452c9d1e26d7df98f81cb
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Apr 3 00:11:31 2008 +0100

    randr12: some fixes to dithering property

commit 52c880c97acf29d5ed8dfeec5810fcc7d8bb7b35
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Apr 2 19:45:43 2008 +0100

    randr12: better analogue clock limits (taken from pNv->{Min,Max}VClockFreqKHz)

commit 29714e7b9ae952aecd036086c053ec030aad94c9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Apr 2 21:31:07 2008 +0200

    NV50: Some minor changes to the display supervisor (mostly comment).

commit 9ac32d3e2bf400f6a6220118b8008804cd11e435
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Apr 2 19:03:07 2008 +0100

    Some bios parser PLL writing improvements

commit 4a192ea6cf9df39d95368f46482c777524471118
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Apr 2 18:21:01 2008 +0200

    NV50: Add my name to some files.

commit db6220b8611829a77d354de1e45f6fe29e118b2a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Apr 2 16:16:13 2008 +0100

    randr12: since the crtc function records are now mutable, unify pre nv50 templates

commit b9762ba272a3ee817278e3967794c55a4fe73961
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Apr 2 16:02:43 2008 +0100

    randr12: don't provide rotation functions in NoAccel case

commit a24ab3d1559d023270915f373527efb6eefacd8d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Apr 2 16:05:30 2008 +0100

    Revert "randr12: Fail rotation in NoAccel case."
    
    This reverts commit b33317ed98957db42691f5f9c41c119c10c91be6.

commit 33d4c2f2fe6c6c400ce945f4c7ecc09ee08123a5
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Apr 2 15:46:50 2008 +0100

    Add quirks for Apple *book backlight

commit 8a3f051dc9f007c3d801942d32899b8d6c09fd34
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Apr 2 14:54:16 2008 +0200

    NV50: Some more things.

commit b33317ed98957db42691f5f9c41c119c10c91be6
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Apr 2 09:28:45 2008 +0200

    randr12: Fail rotation in NoAccel case.

commit d017dfa93e7eff988339b8030af1a563347156bc
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 1 21:23:35 2008 +0100

    NV30/35 setPLL bios support

commit 32f550a534dc3e19f7cd3640549336846ad6052d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Apr 1 22:33:15 2008 +0200

    NV50: Fix a minor cursor issue.

commit 27e819dbcd5ce36be71c7dd3be332f777a80caf4
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Apr 1 22:20:04 2008 +0200

    NV50: Add some debugging statements to important functions.

commit 99857933e8edc3be2e4af0c8c7e3fe3b1e221de9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Apr 1 20:33:16 2008 +0200

    NV50: Some i2c stuff.

commit 9199307195c51b52979c483b3c0adf49f2301281
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 1 05:16:29 2008 +0100

    Use new PLL reading code
    
    Of course, having spent some time perfecting the reading of NVPLL and MPLL,
    it turns out to be totally unnecessary on >= nv30 :-/

commit a3f82d92ae6cbd779d341fe11687d12c5aac1762
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 1 05:03:14 2008 +0100

    Unified PLL reading

commit 350fb202e113bc03a71fd7e451e2c26ec990a61a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 1 05:29:05 2008 +0100

    randr12: get_clock_from_crtc only necessary for TMDS

commit f741bf7b724dd0698f71b28c461337526f20fe31
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 1 00:23:06 2008 +0100

    Better PLL limits for some nv3x

commit 94ca1951feda10b9d6ad828816a459af750de286
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Apr 1 01:00:16 2008 +0100

    randr12: deal with nv30 and nv35 PLLs individually

commit 626d8d62eef205dc542e3a7cd82beb329a23cdaf
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Mar 31 19:27:28 2008 +0200

    Init global gamma on all crtc's, even if they are currently not in use.

commit f54cea5662fdfc17762711a88892a27aed62f74c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Mar 31 19:17:50 2008 +0200

    NV50: Some clock related cleanups + minor changes.

commit 7393d8fc76f7bbb8aa156587d81ee1a01c17470e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Mar 31 14:10:42 2008 +0200

    NV50: Some misc cleanup.

commit 9edf6d60b2b6698e88edc7798285bd843bfce0f4
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Mar 30 21:48:13 2008 +0100

    randr12: different handling for sel_clk for pre and post nv40
    
    This won't set the spread spectrum bits for pre nv40 from null initial state, but that's not a major concern right now

commit 84ab4be08947ef35900da6b84702bc9acb4121bb
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Mar 29 21:26:37 2008 +0000

    Minor tidyup to output merging

commit 1fe1d8161059afcc6f6ba152b9331e1576ef1f93
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Mar 30 22:42:47 2008 +0200

    Kill a useless register offset.

commit 75680d723144270c12a6d500d8e2c2c421e4ebc1
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Mar 30 15:18:09 2008 +0200

    NV50: remove unneeded function

commit 263ec94ec0f553f5ab6a22d3fd335bebff2c029b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Mar 30 12:21:29 2008 +0200

    NV50: Some minor cursor cleanups.

commit 86722ad60fb939743f5ab73413f721cd26bf2c3c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Mar 30 03:37:16 2008 +0200

    NV50: Deobfuscate some of the modesetting, a few things were hidden away in innocent looking variables.
    
    - Some mode variables were overridden and didn't represent their name anymore.

commit 633a8f4f0a8ff3bcb5e6afa9bbcf3f6ed44ef905
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Mar 29 19:01:30 2008 +0000

    randr12: make sel_clk behaviour match comment (which seems to be correct)
    
    If nv40 breaks, this whole thing will need another look

commit 7a8bbb7f0890ef99de539f0f7acccd469f33dce9
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Mar 29 00:03:27 2008 +0000

    Fix Apple backlight code, broken in pci-rework conversion

commit 4d0974c48eff8cd51af66f8fded4fad50044958a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Mar 28 01:10:31 2008 +0000

    Consistency fix
    
    + constify

commit acd007843f00cb99cf26c4a5f885e365c3a8065b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Mar 29 21:47:04 2008 +0100

    It seems wise to NVSync for all hardware on NVLeaveVT.

commit ea27bc38938277599228ba403a082963bf89d702
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Mar 28 19:56:36 2008 +0100

    NV50: Better safe than sorry.

commit d4ca83e2d1f1432dc7de290087f03a6ff3553d98
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Mar 27 23:55:30 2008 +0000

    randr12: shrink pitch alignment stuff and move

commit 43ff98cd89e3dc43c281e41f3a36a76bcd3e5a65
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 26 18:35:14 2008 +0000

    randr12: tidy-up 3/3 - TMDS04 twiddling
    
    Code commented for easy reinstatement should problems arise

commit 9491ee3f3fbb8b50244444424ef6148217ace944
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 26 18:34:28 2008 +0000

    randr12: tidy-up 2/3 - DPMS CR57/58 twiddling
    
    Code commented for easy reinstatement should problems arise

commit 2e001c140eacc5d5f02435b9c81b13e5d40db71f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 26 18:33:59 2008 +0000

    randr12: tidy-up 1/3 - FP_DEBUG_0 twiddling
    
    Code commented for easy reinstatement should problems arise

commit ec9fa3c958d6763ff96d8b884ed36c80d911475a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Mar 27 19:24:04 2008 +0000

    randr12: allow doublescan and low clock modes
    
    320x240 ftw. Also improved mode rejection error messages

commit 048f31014092c1dccb1944d2b1a84c7a301be48e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 26 18:58:47 2008 +0000

    Minor fix to lvds script caching commit

commit 3feaa48b53f51c094718708e52f08b546b0b0e27
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Mar 26 20:01:19 2008 +0100

    NV50: Implement per CRTC gamma correction.
    
    - This remains untested, so if you're in the mood to test ;-)

commit 77af887089be6fef7b793e3c3afdb98ac90a2e8c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Mar 26 10:02:46 2008 +0100

    randr12: correct SEL_CLK register beheaviour for outputs with or=2

commit cb5d4cdb3dc83f9dbd53eae9097c0df458313fff
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 26 02:27:33 2008 +0000

    Cache running of LVDS scripts, rather than blocking LVDS_RESET
    
    Fixes a regression on some nv40 where LVDS_RESET is needed to fix some bad behaviour in the off/on scripts

commit 6924d1ac900524d0978a02f8f8509faab1809b62
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 20 20:20:16 2008 +0100

    NV50: Although not essential, it's nicer to save a register as uint32_t.

commit 1042c2bed3aee8561411fba85438c3fe5ee2cdea
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 20 20:10:13 2008 +0100

    NV50: Some more stuff.

commit b58e5e99aa06e1851ce255211d524a88f1fb297a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 20 19:59:46 2008 +0100

    NV50: Educated guesses at some of the control registers.

commit ef25cb9224d37c7937e67824a262937a747c91cc
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 20 18:49:58 2008 +0100

    NV50: Forgot some more stuff.

commit 64b3d1ab1a4226fa688722dabc40fe05a0e30d52
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 20 18:35:20 2008 +0100

    NV50: Forgot something.

commit 81929c1810fe4825ff9bd5d4bc84996c35c8ceb7
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 20 17:43:30 2008 +0100

    NV50: More dehexing.

commit ee1ac0646c7c2f018abdfd4f58d49d51f5340784
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 20 17:19:37 2008 +0100

    NV50: Some more dehexing.

commit ca1b8bbebd4b786f0fe8531ba7145aa932e5abcc
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 20 14:18:18 2008 +0100

    NV50: Some more register guesses.

commit aa99fb07cd438f436fdfa4e5dff6d87d27950358
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 19 18:16:03 2008 +0000

    randr12: do DPMS off better
    
    Half the time that DPMS off is done, there is no crtc bound, which meant outputs never got turned off.
    It seems xf86DisableUnusedFunctions is always run *before* setting up the new outputs (when using xrandr):
    if this is not the case, this commit may not be quite right.

commit 063b393ac12bec286e0b28c2b18a98cedd3422c1
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 19 02:56:31 2008 +0000

    Optimizations on LVDS script code

commit c5203647ddf262978e7d6a4912661a9cc448da66
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 19 23:12:59 2008 +0000

    randr12: unbreak LVDS and primary I2C for < NV50
    
    NV50 check disallowed pre-NV50 cards using I2C on first head, and made garbage get written to CR0 on LVDS
    
    This should work for both pre-nv50 and nv50.

commit ebc75dc9e8394ee1d13a853341ba9995e9d9d04f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Mar 19 21:31:10 2008 +0100

    NV50: fix i2c for real

commit c6e3a6f57a7ae67c187aff0ad87153e988961784
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Mar 19 08:57:33 2008 +0100

    NV50: Fix a typo and hopefully fix i2c.

commit a989b4caac077f65034fb328a80ab4ae758c1162
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Mar 17 23:40:16 2008 +0100

    NV50: Fix major thinko in "NV50: kill output_resource and use or directly."

commit cd5aaeaa319e2b681c7c6ccc135d76b7c027bd0d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Mar 17 22:05:12 2008 +0100

    NV50: Handle some things that weren't fixed during rebase.

commit f73c2361a7bba5aa9abb4fe65697bfcb2a407e99
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Mar 16 16:09:11 2008 +0100

    NV50: kill output_resource and use or directly.

commit de0fc0ece55997f8b2ad86070cb940e2afd2d7e8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Mar 16 12:46:40 2008 +0100

    NV50: Mostly resorting regs.
    
    - Also a dithering register define and rename cursor related reg.

commit 849bab73da8da8ad8b2987f80fcf90bf86299171
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Mar 16 12:33:19 2008 +0100

    NV50: Some more educated guesses at register names.

commit 0244dc1dd0698be161d7fd629efa10dcb3df106a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Mar 16 01:09:48 2008 +0100

    NV50: Another subtle difference.

commit 5e2d220edf65357f4d7bd8ce97bd829086e0781c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Mar 16 01:05:03 2008 +0100

    NV50: Fix a potentional bug.

commit cef158cee51ecc53c2f5a9910a88c9e802d49980
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Mar 16 00:40:59 2008 +0100

    NV50: Share output properties.

commit 31e7a740a1cddc5edfdede05187e6bd9a6f1b993
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Mar 16 00:27:41 2008 +0100

    randr12: Implement dithering output property.

commit 05f0464669eef0a3caff2466eeffd9843c18a7b7
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Mar 15 19:02:55 2008 +0100

    NV50: Merge output creation and i2c init.

commit 285a13ab41e869544681260b1f2415143456bdc9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Mar 15 18:20:34 2008 +0100

    NV50: Merge crtc creation.

commit c5dac45a199b7f4fa3692727aa6af1cd9a6b8d35
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Mar 17 23:20:39 2008 +0000

    randr12 offbyone debug commitnoise
    
    semantic version control messages ftw?

commit 4cd5e430d164cb5a834e4946d5e5dc79061cadfb
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Mar 17 17:21:28 2008 +0000

    randr12: remove NVGetOutputFromCRTC
    
    This function had a major problem for the long term: assuming a maximum of 1
    output per CRTC, which is simply not valid

commit 27c21c0574bac47bbb311094c32f17e7ac321ba5
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Mar 17 17:09:23 2008 +0000

    randr12: split out fp-only registers

commit c09d190ffe2bab1e1df52d8b83009c10fafbc2bc
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Mar 17 03:03:14 2008 +0000

    randr12: better handling for output types in nv_crtc

commit 78ded96a4e8f88dba038e5ef0c452b7c7bf9a2dc
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Mar 17 17:16:27 2008 +0000

    randr12: remove duplicated regs

commit f7013760f9e9ec91bc3bd3739b6cce9018e34bcb
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Mar 17 00:59:31 2008 +0000

    randr12: fix noscale scaling mode
    
    Also, a bit of consistency missed in the earlier commit

commit a9c01eff4bcf3af52faf73269f63a5fd46b3b3b3
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Mar 16 14:27:14 2008 +0000

    Misc startup info mostly duplicated the state storage stuff

commit a02f82e9ce79ae24a4f2eba71a83e51f3b6d9e52
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Mar 16 00:51:09 2008 +0000

    randr12: make output parsing consistent

commit f04c44eff67adb9099eca7b298b10639dc0b1759
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Mar 15 01:36:13 2008 +0000

    G80 I2C parsing
    
    Changed to on-demand parsing

commit 718e42478c02c7497cd3917b8ea78ed692f30f3f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Mar 14 21:22:48 2008 +0000

    randr12: make nv_crtc_calc_state_ext definition smaller

commit 772bf76b3697d1d1725017787378802c2940093e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Mar 11 03:39:43 2008 +0000

    randr12: merge common PLL paths

commit 1326e0176582fd21e16359764e2792cd125548e6
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Mar 11 02:19:10 2008 +0000

    randr12: make plls belong to their CRTCs

commit 97b074889feef7b4a3b6401825a46d53321d1c7e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 30 14:38:59 2008 +0000

    Use PMC defines

commit ee11c6abe875a758bdfa4469ae6326ac25732178
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Mar 14 11:11:07 2008 +0100

    randr12: Let an unneeded quirk die.

commit 8851d9f3ef4a8cb9b35e1cb8ed80b3ff213eeee0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 12 16:29:17 2008 +0000

    randr12: sel_clk values are really an FP thing, so move calculation to nv_output

commit 63527f978d923317a97dec060be6df16c7baf17d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Mar 13 20:26:07 2008 +0000

    randr12: tidy up output restore

commit 769436b3840e10da00b51b94d72d0b2ef510fecc
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Mar 13 19:52:52 2008 +0000

    randr12: common tmds access functions

commit c455ca0d3df3bb2322154ded40fbe6b86c6a8acd
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 12 03:23:21 2008 +0000

    Improve bios' handling of ramdac_580

commit bd5ad7c4e1f824d57517da540658c97b5283d5d0
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 13 20:49:53 2008 +0100

    NV50: Accept G9X cards.

commit 0318b31e19da12ba0d4dc456ad08d6b059d08d1e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 13 16:57:24 2008 +0100

    NV50: Add back output_resource.

commit a4397563c6845668ad1f4b2352b90c872957f8bc
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Mar 12 23:16:53 2008 +0100

    NV50: Unbreak "NV50: Kill the connection status caching (which was broken btw)."

commit 63ffb8dce809267706eb621f03da3c3501935bbd
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Mar 11 23:15:11 2008 +0100

    NV50: Merge the two output private structs.

commit b4c3bee2f8cc824cd52aca61121634c55d5f5a60
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Mar 11 23:09:19 2008 +0100

    NV50: rename scale to scaling_mode

commit b0d2f93d3adbb798f5d9bfa2d188b666e4c5fc16
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Mar 11 23:06:16 2008 +0100

    NV50: Rename nativeMode

commit e5b8efad35df21d35a3893a6c8b10e1f02272544
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Mar 11 23:00:19 2008 +0100

    NV50: Rename or to output_resource.

commit 19ca2db7683b8cdcfb74f6cc14c9cb6c3876d2c7
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Mar 11 22:43:33 2008 +0100

    NV50: kill set_pclk

commit eef3a665c01c530238c3dc02324573d6bcf6c3f2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Mar 11 22:24:46 2008 +0100

    NV50: Remove the remnants of cached_status.

commit dc0bb590a40f3d8b18d2136ed906e8dac10ec598
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Mar 11 22:22:12 2008 +0100

    NV50: kill partner entry

commit f66463713a71b0e3090f33c68186884594255cc0
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Mar 11 22:12:57 2008 +0100

    NV50: fix warning

commit cb50cd3276825569a6da1f25a2d89bfd417b5034
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Mar 11 21:33:29 2008 +0100

    NV50: Kill the connection status caching (which was broken btw).

commit 6e2af71c73263c3cf2d61f66c02363decd354da5
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Mar 11 21:15:21 2008 +0100

    NV50: change i2c to pDDCBus

commit d07b3063953c0b17585249dfbc2938a433bea88f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Mar 11 19:50:25 2008 +0100

    NV50: Switch to other scaling defines.

commit 4ddb92b8e936985b5b1429a0a21890879635bcde
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Mar 11 19:29:11 2008 +0100

    NV50: Switch to the same output type as the rest of the code.

commit e605fbfc659d3fe1bd71d478c21429b563fbfd80
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Mar 13 15:21:49 2008 +0000

    randr12: nothing uses output_resource. kill it

commit 53925cfc3540b89dedd317bbae4318cf53daada1
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Mar 13 15:31:00 2008 +0000

    randr12: fix the setting of NV_RAMDAC_OUTPUT
    
    And turn on/off the DAC for DPMS

commit 493c79405be23a543cd21c2583c466342399509d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Mar 13 03:53:18 2008 +0000

    Simplify TMDS writes a little

commit 4cf1bd9ef016a2c9fe7784fdc83f559bec464f9e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Mar 11 17:20:28 2008 +0000

    randr12: don't allow scripts to break overlay

commit 95f2b8439f433afb5d637a3580f933e2cd44488a
Author: Danny Tholen <obiwan@mailmij.org>
Date:   Tue Mar 11 17:14:54 2008 +0000

    Fix video overlays to treat double-scan correctly when using randr12

commit 460cb260c30467799fa31aef11946d1fe2dd6523
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Mar 10 23:47:43 2008 +0000

    Correct RAMIN offset
    
    and some bits missed in previous nv_setup tidying

commit e8a5d4638e74b5957fc12b05865f49dd995d0435
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Mar 10 21:46:38 2008 +0000

    randr12: changing tmds2 for dvi-d seemingly unnecessary

commit 30ddbe9c2b82bc19d1480a1b38df6b5ca0dd057b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Mar 10 23:49:08 2008 +0000

    randr12: unbreak sel_clk changes

commit 03f38725304842b053b7976db5df97e61159d07d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Mar 10 19:50:55 2008 +0000

    randr12: allow spread spectrum bits to be updated on pre nv40

commit 323b7ef9c1c26996b84fd1f67297b2958f68fcc9
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Mar 10 01:18:56 2008 +0000

    randr12: quirk for 17" powerbook, and better sel_clk handling
    
    We set sel_clk *before* running the output script, so make sure the set pll->head binding is not altered

commit 58f9079cda17bb6a76ba16c14ddc56bd4ac640fc
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Mar 9 16:08:46 2008 +0000

    nv_type.h mandates XF86DRI being declared

commit 0dbffc868a7b60aa99ca550d33b8488ac9de8d00
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Mar 9 03:59:57 2008 +0000

    Fix up a bunch of prototypes, remove unused wrappers

commit e5ded02925e7d39c67e69d0389778ac795bfe743
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Mar 9 01:31:47 2008 +0000

    Move setting of alphaCursor to nv_setup, and restyle useful portions of nv_setup

commit 0b8629a9a29203553397eb764b9b9c87d38d4b9f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Mar 8 22:05:52 2008 +0000

    Kill NVFBLayout
    
    Using pScrn->currentMode is wrong for randr12, but it's no worse than what it was

commit 29cfb08c1b75e050aa58fa6019f7d9be063f8555
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Mar 8 21:02:35 2008 +0000

    Warning fixes
    
    And remove a few unused members from nv_type.h

commit b87059fcccfac693df0b2dc5ba85cb358ad1eba6
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Mar 8 20:53:20 2008 +0000

    Drop the NV*VGA defines and adjust users

commit a636b02eba03454b8b757f69e6a62aae2c3fd571
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Mar 8 21:18:34 2008 +0100

    randr12: Disable a quirk that has adverse sideeffects on NV36M.
    
    - NV31M owners, please test if you have:
     - LVDS on CRTC 1 and or = 3.
     - VGA on CRTC 0 and or = 1.
    - Testing requires enabling both lvds and vga.

commit f4228861abec9df310efb863833c82022136e464
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Mar 8 18:23:58 2008 +0100

    Merge CRTC private structs.

commit b3d0d0c01664e874f3b69b36383ad1a7845d7d91
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Mar 8 18:10:53 2008 +0100

    Death to some unnecesary stuff.

commit 03a7a1d7065b55f16385fd16e7a2eff938d59cea
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Mar 8 01:56:36 2008 +0000

    Various minor tidyups

commit 624148ca7067f748c142db3cd4d31314aa31ee0f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Mar 7 20:59:30 2008 +0100

    NV50: Convert back to absolute registers.
    
    - Someone with a known to work setup should test this, as i have no NV5x card.

commit 10bdffb65e2d8f59399556fe3224cbf8e8a171a9
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Mar 7 19:08:50 2008 +0000

    PLL limit table v0x11

commit 2e1af24826e7db0e3f53440a2c5912789ade6c97
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Mar 7 18:43:16 2008 +0000

    Make bios init code work on 6600 by changing pll setting stuff a bit
    
    I suspect we're going to need some card specific checks in here. ugh.

commit 5fd2dd7b4c6e15d83cb7e7daafb6ee801fa823e8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Mar 7 07:52:09 2008 +0100

    It seems libpciaccess release became version 0.10 not version 0.10.0

commit 3e4db03a39770e5fa94ca094deb690cba8175196
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Mar 7 07:36:16 2008 +0100

    randr12: Forgot to clean up when switching output resources.

commit 8a5c6e8b4d00871b17b7d564d765ea677596f79a
Author: Jaime Velasco Juan <jsagarribay@gmail.com>
Date:   Sat Feb 16 15:01:23 2008 +0000

    Do not access beyond source pixmap in NVAccelUploadIFC

commit 7afb739418fbac5058d13d05188a69b142529fb4
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Mar 6 23:40:08 2008 +0100

    Oops.

commit 0da8c84cceb178b04ab535edb4e3f0ced204d00a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Mar 6 22:35:30 2008 +0000

    randr12: workaround for xserver randr bug, where the hwcursor always gets displayed after a mode change

commit c424144e854563709a01ed2d30a0482edc57fbf3
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Mar 6 23:15:31 2008 +0100

    Fix my nv10 cursor.

commit 633047c65708f1a39e371c2c5da5c111027af1af
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 6 23:05:43 2008 +0100

    randr12: A major rework of output resource conflict handling.
    
    - This mostly affects laptops, such as some geforce5 and the famous 7300go laptops.
    - Test this if you know to have a strange vga/dvi port of your laptop.

commit c5230961d181f15cd965c4569813219d9292681a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 6 19:29:50 2008 +0100

    randr12: Readd some useful information about how an output is routed.

commit 97ac866a4e433c70d0de7a1e8fb66a3994194ffd
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Mar 6 19:16:36 2008 +0100

    randr12: Kill almost all usage of ErrorF + some misc cleanup.

commit ea8fba29bcfe8158c9bf17754a20684430027aee
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 5 18:53:54 2008 +0000

    randr12: don't reset panel unnecessarily for mere backlight control

commit 22ec35504fbef83ba5790c87d27cd13e936fccb0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 5 14:40:08 2008 +0000

    randr12: remove switchable_crtc stuff

commit 3b0a1a11f662bfa705806f4afc5898338234ca65
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 5 14:35:41 2008 +0000

    randr12: if no ddc, return XF86OutputStatusUnknown, for !twoHeads and nv11

commit 424500cf828903e3449d4bca22a083087258cc99
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 5 02:15:28 2008 +0000

    randr12: do not change CR43 from its initial value

commit a764d3ca2741243f49f34e9a4930a59272927902
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Mar 5 09:44:46 2008 +0100

    Give some defines more consistent names.

commit 234ce16558e59dff302f13ea3d8eb48f46eedf0d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 5 01:25:20 2008 +0000

    Use the BMP structure's I2C info, instead of DCB 1.2's, as marcheu's bios is broken

commit bb5429f08b3ffd16d6786bd65d6a4c8db1210ade
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 5 00:38:15 2008 +0000

    Add another DCB 1.4 entry

commit 5998ba0a35bc1c897916f66b0bcfb9a3e0a7c54d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Mar 5 00:34:16 2008 +0000

    Don't zero out i2c_read and i2c_write
    
    pNv is calloc'd, so zero inited, and explicit zeroing overwrites the stuff parsed in parse_bmp_structure. Duh.

commit 2d74bcb4602bb0cdae18ed1ffdd17520a3b57a78
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Mar 4 21:18:49 2008 +0100

    Put braces around a bitmask.

commit c7ab8e84bf8ad8ee6106b21a1c07b6d8470e7f11
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Mar 4 13:34:16 2008 +0000

    Add an LVDS output setup quirk for Powerbooks
    
    Again, as a result of much testing by moondrake and sbriglie.
    Hopefully it even works this time :)

commit fd9b37b31896e1731bdd56ec847c86c0502ba0f8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Mar 3 19:04:09 2008 +0100

    randr12: Only change vpll value when needed.

commit 89882b416de3528cf504c989cc147a86d3572053
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Mar 2 20:25:45 2008 +0100

    randr12: Keep the gamma values when setting a new mode, instead of always resetting to default.

commit e8c363b7ca4a416be37a1ea1c97bbd99b21d5be4
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Mar 1 15:05:09 2008 +0000

    Improve link_head_and_output
    
    Thanks to moondrake and sbriglie for their work on this

commit 4a16414c77ad77e7612f62f4ca1859e0d6a24cc2
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Fri Feb 29 22:17:30 2008 +0100

    nv30: Remove fix that is useless now, and maybe broken in some cases

commit 5cb164876b824e8bf52aa44ccf4a797bab310602
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Feb 28 00:43:17 2008 +0000

    Less magical way of setting dual link on EDID equipped panels
    
    Eldritch coupling ftl

commit 1127974ed8517f28ef9c451d81bf1c61a2b0e6ae
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Feb 27 23:45:34 2008 +0100

    NV40EXA: Support extend/repeat type pad.
    
    - Note that all xservers, up to about a minute ago, did not try to accelerate repeat type reflect or pad.

commit 6980d0e24a9dae52903e6971c5c8a18240a7dbc1
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Feb 27 12:55:54 2008 +0000

    Add default dual link transition frequency
    
    For card bios versions before the relevant field was added
    Should fix Apple laptops.

commit 27e2e55698ab05bf3469e0f68474d4c3f021ca31
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Feb 26 18:07:39 2008 +0000

    Deal with pre-nv40 laptops with EDID

commit 41992eb90828976105cbc8bba87fe7d079d7c06a
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Fri Feb 22 17:29:12 2008 +0100

    Revert dummy commit

commit 073d852f36df4a18563ea892e89eca269efd55ef
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Fri Feb 22 17:27:51 2008 +0100

    Dummy commit

commit 5db7920763aee3a1b124139273566f7add5e27df
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Feb 10 23:14:52 2008 +0000

    Use some of nv_hw's functions in nv_bios.c

commit fa8891e78f37edc02537704172156ba77371a307
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Feb 20 00:50:48 2008 +0000

    Unbreak console restore again, and use a less ambiguous function name for head locking

commit 38d42a7857480a930e2025e4f63aa7f5defca5c5
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Feb 19 23:59:12 2008 +0000

    randr12: rename NV*VGA functions for api consistency
    
    Also nuke NVCrtcSetOwner wrapper

commit c77a54768c3fed5939755f23c5c067bb86f49805
Author: Ben Skeggs <darktama@beleth.(none)>
Date:   Thu Feb 21 00:55:39 2008 +1100

    xv: don't crash on init

commit cf963a128374bf7c2070e8a380e236b5e083adc1
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Feb 20 09:36:42 2008 +0100

    randr12: Only NV11 needs byteswapping + NV11 uses premultiplied cursors i think.

commit 87f1676a243cddcaece9eeb0487a85b7e74b0f13
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Feb 20 00:14:12 2008 +0100

    NV30/40TEX: Create two adapters, one with fancy filtering, the default without.
    
    - Also enable sync to vblank by default, strange that it was off.
    - Remove the GET_TEXTURE(D)_PRIVATE macros, as one of them pointed to the blitter and one is now ambigious.

commit 7ee1bb47d86396cc1a0f7879a98d04588cb31eee
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Feb 14 23:16:01 2008 +0000

    randr12: make more hw funcs generic

commit 11de8d7a6f9a2dfd5a4f93f031865e284268a0f3
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Feb 19 21:44:56 2008 +0000

    Use fp strapping to determine whether straps are used for flat panel modes

commit c1ac6b977a4756e2dbfdb75ab5b53c7c10e76cf4
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Feb 19 14:53:41 2008 +0000

    Rehabilitate bios opcode 6d

commit afb42307cb2810ca2d759df62240fbf1f0cc7f7c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Feb 19 14:23:06 2008 +0000

    Spruce up NV04 bios parsing a little

commit dfabaab48034bf36c19510fe5de0f1bdaa2157ef
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Feb 19 00:37:27 2008 +0000

    More DCB v1.5 entries
    
    Courtesy HenneNWH's NV11

commit 2a4373d4f3b092600651b7dc8e2f9f9b520c7e0d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Feb 18 17:32:43 2008 +0000

    Treat 0x4 and 0x8 bits in LVDS DCB v2.0 configuration as meaning the same thing

commit daa557c0dadb3ad5caf39a4e90d3ebd16b12fc96
Author: Danny Tholen <obiwan@mailmij.org>
Date:   Mon Feb 18 05:00:03 2008 +0100

    Fix PPC DFS/UTS by using PCIgart.

commit f8f469286fb3acc1ee694c61fe21e42123a5456a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Feb 16 03:41:38 2008 +1100

    dri: fix broken display in some cases

commit a293f32b2172837b6e2bcc3f5771c5219fccfb14
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Feb 13 00:52:34 2008 +0000

    Fix bios pll setting regression
    
    Oops.

commit 7121fe9dfb1c9162c8be808e09ed6b4b3ce3999e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Feb 12 18:20:43 2008 +0000

    Use a loop to read RAMIN bios image, rather than memcpy

commit 3ad7c35740905ad267faf8e248075640d5ee9cea
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Feb 12 17:23:38 2008 +0000

    randr12: reorder some variable declarations in nv_crtc and nv_output

commit ab40a46430f369a7bd9cef8db4e86414125c8437
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Feb 12 15:19:58 2008 +0000

    randr12: use integer math for scaling
    
    No floats in modesetting path

commit 4a44468c29c37b5ad4828439f37d023865a9d457
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Feb 12 15:03:46 2008 +0000

    randr12: tidy up some mode retrieval stuff

commit 50d77c4199a3a5d2f3ead8327341e91ac2ec5684
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Feb 11 16:27:27 2008 +0000

    Trim useless nv_type members
    
    Also, crtc_active isn't used on randr12 path

commit 0c1e48a2192555856894d7e2b3025cd342c2f448
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Feb 11 01:42:04 2008 +0000

    Remove some DDX cruft

commit 5a8e246fcab3e349f48d0ce0c4da812a411767f2
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Feb 11 00:34:27 2008 +0000

    Use mmio access wrappers and reorder some variable declarations in nv_bios.c

commit 2ffcd89bfb0383fb32e8ec41f1cd472764b9b99d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Feb 11 00:03:50 2008 +0000

    randr12: Use absolute regs for 8 bit regs

commit c9b1f020d1c5be069dae19f99b3c26bb126052ae
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Feb 8 19:44:37 2008 +0000

    Move non-crtc specific hw funcs from nv_crtc to nv_hw

commit 6cb8fb6cc63bf55f18b4dde53c393336e817474e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Feb 7 02:04:20 2008 +0000

    Ordering mechanism for BIT table parsing, and (hopefully) automagic laptop detection

commit 4f690235d70ae249323439380a69d8309a8c9981
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Feb 6 22:18:46 2008 +0100

    Replace a const with its name.

commit 75c5912fffde88bfe2ddd158a446588b76ef44d9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Feb 6 19:06:14 2008 +0100

    Fix bad debugging in NVWritePVIO().

commit 50da8b8f5b5feb6787ed50f221529730d25b5467
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Feb 6 17:44:52 2008 +0100

    Fix UV swapping on PPC.

commit 4ff11d13be6e8050e0b726dc7af8e4bc11bd9d0d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Feb 4 22:34:21 2008 +0000

    Missed out "DEBUG" part of the name in the define

commit 181ee3bcecfc778c9f671853a696ab3224ac4747
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Feb 4 22:31:02 2008 +0000

    Load correct PLL limits for single stage PLL cards with blank PLL tables

commit cbcb1070db6fbb4d13ddcc35739d2d3e49f3766d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Feb 4 07:47:06 2008 +0100

    Once again kill usage of an exa private function.
    
    - Must have creeped back in during all the texture adapter changes recently.

commit f14d27d638e75faa5bbda903f65a4d5479222ead
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Feb 3 17:15:50 2008 +0100

    Remove include guards & add copyright.

commit 7522640ee8d342c5ebb62989b051f73e230f5ce7
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Feb 3 17:01:50 2008 +0100

    Last round of fixes for nv30/40 bicubic Xv.

commit 78553ab9a0309c7d27632fe7184f3233cfde6610
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Feb 3 06:07:35 2008 +0100

    Fix tearing.

commit 7240f861a98c5f8d9779a4f3a743b748af775337
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Feb 3 05:15:41 2008 +0100

    Understood and fixed some NV30 FP_CONTROL bits.

commit bb2a7bd3461eec37f179748a9bdb9375b1c3da04
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sat Feb 2 05:54:47 2008 +0100

    Fixes to nv30/nv40 textured video.

commit c10d30dfefe93a9911d89eaffe3d29d3cff66a96
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Jan 31 06:15:02 2008 +0100

    Misc textured video fixes.

commit cfdfd5a99bb7ac959a1188994db4c75a97de2e34
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Jan 31 06:00:59 2008 +0100

    Of course, add the nv30 video texture file.

commit 970a8e474c666d6e33351f7ca6a3a5273024baf4
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Jan 31 05:59:08 2008 +0100

    nv30 video texture. Doesn't work with bicubic yet, only bilinear.

commit c1eba822f1579637f59933b04e31591e86b975fc
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Jan 30 02:38:14 2008 +0100

    Remove (void)ing that's not necessary any more.

commit 7356ad90b387d01c2bf25aa653c41ca9365c5c20
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Jan 30 02:30:39 2008 +0100

    Remove unneeded stuff.

commit e06dfd2964f9bd7f0855a101f5e6971020dfa6be
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Jan 30 02:19:08 2008 +0100

    Separate the shaders from the rest of the code.

commit a69c50780cacf0d0f2948208cfa7e0558a8c3644
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Jan 30 02:18:26 2008 +0100

    Macros for the PME range.

commit 47c8ed472f37d68f3cc241a58ee5b7b8643e537d
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Jan 30 02:17:22 2008 +0100

    Add PME range.

commit 63f47c9bf59ccb9f1b6adbefd55deaec1435faf7
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Jan 29 21:25:28 2008 +0100

    Small cleanups.

commit c98e9fa5c572deeafd7f605bb29d6c83cd38de9d
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Jan 29 21:24:39 2008 +0100

    nv40 video texture: first pass at bicubic video.

commit 10967a4dac8c3eaf828359dcba7a6e1272561aa3
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Jan 28 04:52:01 2008 +0100

    Update to newer nouveau_class.h

commit 82728b3df45e8a5c0a45462d2ce847a41fd31f07
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sat Jan 26 19:02:50 2008 +0100

    Update to latest nouveau_class.h

commit 9d9a5acae1deae8c76b512362634066e0c32a817
Author: Jaime Velasco Juan <jsagarribay@gmail.com>
Date:   Sun Feb 3 15:45:32 2008 +0100

    Don't FIRE_RING() when in NoAccel mode.

commit 11c1ee1cb0ee9c8096ea371d95d188c538ac3fb2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Feb 3 15:43:35 2008 +0100

    Some minor reindenting.

commit 0db347294e09d3d17200ca130e719df2d22f69b6
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Feb 4 01:19:23 2008 +1100

    exa: those limits were a bit conservative on some hw.
    
    AFAIK nv2x up should be able to handle 4096x4096 textures and
    render targets.

commit eb72e67641215b710868da7bb66b466f6ccbbe25
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Feb 4 01:07:07 2008 +1100

    exa: more accurate coordinate limits

commit 8645d2d9554ee46397240fbd9904fd4f905aefb2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Feb 3 14:54:41 2008 +0100

    Fix NVExaPixmapMap() for NOUVEAU_EXA_PIXMAPS case.

commit dd81efd0cc64a070f7489decbac345cc1b4fa9ce
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Feb 3 12:03:43 2008 +0100

    Fix undefined symbol.

commit 2a1116cbf61e84b16366076366f4bbd5f550fb9f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Feb 2 20:34:57 2008 +0100

    Remove a few leftovers to actually make the last commits work.

commit 714bea6449aab47a9f2211718183ee84a3c70129
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Feb 2 19:53:32 2008 +0100

    Kill NVShowHideCursor and use a wrapper.

commit 741acded643945c5a2da7bef088ed1ff7f5fa85e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Feb 2 19:26:13 2008 +0100

    Remove nvRead/WriteVGA in favor of nvRead/WriteCurVGA wrappers.

commit d429cabd9ae9865a45cc88f43ab6d9d61b3fcf36
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Feb 2 19:17:32 2008 +0100

    Kill NVLockUnlock and make it redirect to NVLockUnlockHead.

commit dc2aee0ef69c85aaffdc3c1da5a228642d049a30
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Feb 2 15:12:00 2008 +0100

    More wrapper death.

commit a57fd67a2a6ae66af218fedd704a04d855260a2f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Feb 2 15:06:02 2008 +0100

    Let some wrappers die.

commit b9a4eb6f6ea4f8f0747baa50037e33a0584cfd29
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Feb 2 12:47:32 2008 +0100

    Undo last commit and move it to drm.

commit 288b56545a8da1e7b5aa64b1093316ca2f28f868
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Feb 2 12:28:44 2008 +0100

    NV40: Fix longstanding issue with nouveau crashing after using blob.
    
    - Took me a while to track down, but for me this is definately it.
    - In my case i got the X cross and then it would freeze and i would get a fifo dump.
    - Don't be shy, let me know if this works for you too.

commit 0ec1b10a82c411181ff7a8643bb2390cfe08e4e4
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sat Feb 2 04:04:58 2008 +0100

    Don't allocate the whole AGP gart as a scratch buffer, since we still need to allocate the fifo afterwards.

commit 5b79b0a9e54fe99eaae5b411f46a601b6944b773
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Feb 1 23:34:32 2008 +0100

    Don't use functions that are not supposed to be used in randr12 mode.
    
    - Also add NVLockUnlockHead() and NVSetOwner() functions.

commit cedb604ee79cd73a9ec3940c7b056109811ba670
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Feb 1 22:41:09 2008 +0100

    Remove usage of "illegal" wrappers in code that also used for randr12 mode.
    
    - I've got something prettier in mind to clean this up, which will likely follow.

commit 1a5247856929877442e1ec00f190c6d497ca64fe
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Feb 1 19:14:38 2008 +0100

    randr12: Remove a hack, confirmed on 7600GS that it is unneeded.
    
    - This was one of the cards that did need it in the past.

commit b6972e7bec0455250851c06d142336cb53be1a74
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Feb 1 14:47:32 2008 +0100

    randr12: Some minor fixes.

commit 988dce0f452f6b80b2d02e1a0f78f826674cc3c0
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Feb 1 10:04:32 2008 +0100

    NV10 EXA: limit regcomb state re-emission, fix logic for A8 + A8 yielding a 3% perf improvement :p

commit a84852c2e0b19cf848495dc7e4bde4426b7bd199
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 30 22:57:09 2008 +0100

    (hopefully) Fix build on powerpc.

commit e8a975e6a8afe5ae9c77d20f4d59d3d10221f7d9
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Wed Jan 30 18:37:39 2008 +0100

    Xv: NV30 overlay can not scale down by more than 0.5x

commit adc26892f6e711f08a5ed189a643e3fe9646e15c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 30 17:43:16 2008 +0000

    Fail gracefully for too-big resolutions / colour depths

commit 09c9d7c3c50b630e1509f787ff946cc0656f7cba
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 30 18:50:37 2008 +0100

    randr12: Misc change.

commit 6a46bf59f15d68404b536d436bf70337cd88e33d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 30 18:35:18 2008 +0100

    Check if the framebuffer can fit into the offscreen memory.

commit 9607d7828b16b0cb4a428bc29e2ce7c9bfd95371
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Wed Jan 30 18:24:44 2008 +0100

    Xv: NV04 overlay can not scale down at all, as confirmed by DirectFB

commit 7edfb473533ce41db9e2b3709d32bb8ca7da85a4
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 30 14:44:14 2008 +0000

    PBUS define additions

commit 6e090591bd2dab051362d8528a3bc76f30418d94
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 30 14:35:25 2008 +0000

    PCRTC define additions

commit e51799382e40c033b2d6d09dd65dd7f7c1e5e4d6
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 30 15:03:06 2008 +0000

    Missed these in the ->absolute conversion

commit ee0d557a26d326af27445bd0b283a5c6ead7c1cd
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Tue Jan 29 18:46:16 2008 +0100

    Xv: detection of composite for the overlay

commit 3a5f92d48e32d251e41bab561e52082033d26d9d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 30 01:31:43 2008 +0000

    Make bios port io use PVIO as appropriate, and have harsh validity checks

commit 92c0d9630843957212d8ce296fea6bca8d802069
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 30 00:36:59 2008 +0000

    Make PLL setting quieter

commit f58d174bd50943c3dfb2d6c909d0a98dbbd35dae
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 29 23:10:27 2008 +0000

    Move some regs from nv_bios.c to nvreg.h
    
    And use more symbolic names in nv_bios

commit d0022c35f39fde74ee5f3978ea78e053988fb608
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 29 22:41:40 2008 +0000

    Tighten bios reg checks a little

commit b1b1d76eb187f4ab3020bbd69c2b1cc9b39d0d83
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 30 00:30:46 2008 +0000

    randr12: make nv4x plls less special

commit 8f05d66bad8e74129cffa2918f9ecf6824c9f0b9
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 29 22:33:34 2008 +0000

    Don't attempt to parse BIT D and L tables on non-mobile cards

commit 8e834ece6592df13bd3eb7e9f28c01b4eb0c9791
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 29 18:57:28 2008 +0000

    Add some mobile pci-ids, and reorder numerically

commit 0b586ae0a2998339a9d5d3590e91dfa62af9ab6a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 29 19:04:25 2008 +0100

    randr12: Remove excessive writing of VTOwner.

commit c522ebb293a1c37142e29bf02bb82524e99336b0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 29 17:30:32 2008 +0000

    Make sure nv04 has some defaults (as the bios parsing is non-existant)

commit 62b6c5fe490578990c249042657f20bb0cf49a01
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 27 22:11:31 2008 +0000

    Use absolute regs in the DDX
    
    Due to having to make a few defines for regs that were hardcoded, there could
    be breakage (nv04 overlay, this means you)
    Hopefully not.

commit f5c9f9910a46cfa41d817ef7ca345bfea278b358
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 29 14:14:26 2008 +0000

    Reorganise pll limit retrieval

commit 26ff67f03be38925905a572dab3ec61653cd8286
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 29 10:53:14 2008 +0100

    NV30EXA: Always init texture origin, please report if your viewport setup needs to be different.

commit 38df9a95740e934b9691dff1ed1b597cd2254cfa
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Jan 28 20:55:47 2008 +0100

    Forgot to be paranoid.

commit 2ea0314859569c3ae4356272a35f0b316abf4df7
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Jan 28 20:51:20 2008 +0100

    Small improvement to nouveau_dma_wait, at least makes it show up in profiling in a clear way.
    
    - This may also slightly reduce the cost of a very short wait, but not by much.

commit dd483e226519bc4d2c088e97490039613014dfac
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 26 20:22:08 2008 +0000

    randr12: 2nd attempt on nv11 console restore

commit 5b0fa02101c82a83e11f7d279d366689d54bfacb
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 26 18:09:10 2008 +0000

    Use NV_{WR,RD}08 to avoid double logging io
    
    And one less bios FIXME

commit a099bbff8bb3766201a7deb9c4a718fff7edbe51
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 21 23:54:51 2008 +0000

    randr12: remove unused PLL code

commit 0eb428e5a8b60e52d18b3bdffed46ae3f07b7bc0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 25 16:05:59 2008 +0000

    randr12: attempt to fix brokenness of head setting / getting on nv11

commit eea2fd41ebc17f72b43c776a0391df0733b8d6e4
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 26 14:20:01 2008 +0000

    randr12: don't do load detection on nv11

commit a2c0facefbc878815e00c734464b3c87b5cce842
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 26 01:46:59 2008 +0000

    Assume 18 bit laptop panels by default, add a message that may trigger on 24 bit panels
    
    Revert "Invert 18/24 bit interface flag, so that the default value (0) does not imply dithering"
    
    This reverts commit 5b9dc7ad6eb2f16c4ca8824c2a19c85bbe1f126b.

commit ec548d20239a49f8e9eb0399317d4c68df24f4a3
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 26 01:36:41 2008 +0000

    Detect mobile BMP biosen
    
    I'd really love to know how where this info is in BIT

commit 9f932eb684814e2a04c83d5aee172b9e020d82a3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 25 23:31:58 2008 +0100

    NV30EXA: Fix viewport setup + switch to triangle based composite.

commit afca5f2665a62ef2d025c15f07fe1cdc2b40d8d5
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 25 01:18:50 2008 +0000

    randr12: fix / annotate a couple of ddc thinkos
    
    catch a longstanding source of error too

commit 3e6ea79c3292c3ed5bd676653c4c40532772ae5f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 25 00:33:07 2008 +0000

    Implement opcodes 0x66, 0x67, and 0x68
    
    Courtesy jwstolk's trace
    Names taken from nv11 biosmod scps

commit cdae2e26cc432ba572f92522f1b3454264d38f43
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 25 00:10:08 2008 +0100

    randr12: Rework native modes for TMDS.
    
    - Choose a preferred ddc mode when available, otherwise the one with the highest refresh.
    - Fall back on cvt modes, only when needed.

commit 46636052498d1e33985e3d98a6ce9462639bd4ff
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 23 23:02:46 2008 +0000

    oops

commit e067a0eee42324ec7c01e4d84a33554054817dd9
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Jan 23 23:40:51 2008 +0100

    Use proper version.

commit 324c19acf6b506aae47e3699dd0fcefb72473590
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 23 01:13:58 2008 +0000

    Fix C51 refclk

commit 178b8bbf0e09c190fef8b2f85acddd3172ace629
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 23 20:59:50 2008 +0000

    randr12: calculate (and set, for nv40) sel_clk before calculating plls

commit 8067bd08d9a928c97b83f2b6ebff996b320c5813
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 23 19:43:42 2008 +0100

    Fix big bug in commit "Mostly log message changes".
    
    - Please don't hide such important changes in a commit like that ;-)

commit c5329a42c509efe9336573ff7e32978082ba9355
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 23 16:37:31 2008 +0000

    Redo sel_clk setting and update its documentation
    
    My apologies if this breaks stuff.

commit f07ab92e7bb419df5473e1ed843a79ef4ff08f30
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 23 02:09:56 2008 +0000

    Fail on LVDS DCB entry parsing issues

commit 12efa8cdfe68c312458368ab876030b02919a922
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 23 00:09:11 2008 +0000

    Mostly log message changes

commit 0faa15d9b84b2cad23424dfc1679f119c5b45108
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Jan 23 23:45:37 2008 +1100

    not an appropriate place for this type of thing..

commit 9e982df106028edd0f7ce0feedbe8e082f29f2ac
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 23 11:42:55 2008 +0100

    randr12: Increase cvt mode to 72 Hz.
    
    - I've had occasions were i did slightly notice something at 60 Hz, and no problems at a higher setting.
    - I must admit i was a little bit tired at the time, but i figure it won't hurt (much).

commit 71435dde5b2fd1c197ef5dc31b22ba40abcbca7e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 23 11:20:47 2008 +0100

    NV40EXA: Use the same approach as the texture adapter for rendering.
    
    - Verified to work for abitrary rotation.
    - This should eliminate diagional tearing altogether.

commit d9149bddc758cc0644630b26fe10fc563ba38ce9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 23 10:28:25 2008 +0100

    NV40TEX: Switch to a big triangle and clip it to a quad.
    
    - On some systems (NV43, NV46 are known) an artifact shows when 2 triangles are combines and the size is larger than roughly 512x512.
    - The trick is draw a single triangle and use scissors to turn it into a quad.
    - Someone once asked me if i ever made drawings, well i did in this case and i've included it for future reference.

commit e578d6e0a8c0fb8877d8b4b6ba1046dccf28ee6d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 22 18:33:42 2008 +0000

    Fix LVDS with DCB 2.0
    
    Also use the X_ERROR facility for errors, not ErrorF

commit fd3195f503420591b522249bb423c817db0709e7
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 22 19:00:49 2008 +0100

    Xv: Remove illegal usage of private exa symbols.

commit 3a995b06ddb507655279565e992604bd40036b19
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 22 15:53:38 2008 +0100

    NV40TEX: Use width, not (x2, y2).

commit abaa8e822be49b9d2129d31c4996dfcf8034ea2a
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Tue Jan 22 11:42:19 2008 +0100

    Xv: NV12 overlay copy - removed wrong byteswapping on PPC, reported by moondrake

commit 782237e4e942f2e8a9ed3dd111d60c665459963c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 21 23:44:47 2008 +0000

    randr12: some tidyup

commit 91ca67056cb236e5770d4fb39dd7fbb9818ff093
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 21 22:35:58 2008 +0000

    randr12: more beautiful dithering

commit 1d5dc47324ddd1939db166af60df7a3a0e055810
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Jan 21 22:19:24 2008 +0100

    oops :)

commit 7080f93a83e0d680f53a7962df300d527edd121a
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Jan 21 21:43:11 2008 +0100

    Quickly hacked support for NV6x.

commit 2d399af61424cc4b4e0080ea016423f1b22c02f3
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 21 20:16:56 2008 +0000

    randr12: fix dual head restore

commit 8be20d6fc21a3869786e8c19656bf8b6569fee6e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 21 18:51:52 2008 +0000

    randr12: save and restore palette

commit d32f310afa05ad85d6675348400880506d98ac1e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 21 15:03:59 2008 +0000

    Make LVDS bios script logs easier to understand
    
    and fix a backwards comparison

commit 7c7f0194678c7bd7c5ce791c07b38ac8eeeef608
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 21 14:14:07 2008 +0000

    randr12: avoid SIGFPE

commit b9a3aab7a7f6c5c4a5c440e46bbca7d76fd8df68
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 21 14:09:46 2008 +0000

    debug_modes breaks build on old xservers

commit d2e078b4ebf11b286e152e0ea10b17c41bf61b67
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 21 14:06:42 2008 +0000

    randr12: use correct clock for LVDS modesetting part 2

commit 52154e97b5a40b014fbee747fc542f765b4390bc
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 21 13:46:15 2008 +0000

    randr12: use correct clock for LVDS modesetting

commit d54a9f4b76f3a8c29c5fce6dfe7cc3fbc20f3952
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 21 12:27:36 2008 +0000

    Don't log strange characters

commit 07e01061e9b90348ea38b8889ff9e8daf207b820
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 20 21:53:30 2008 +0000

    Use more imaginative log levels than X_INFO

commit 18017632cbc96f36bbc72b454bd5b48070985a6f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 20 20:17:28 2008 +0000

    Use stdbool.h types in nv_bios.c
    
    It makes vim highlighting work better and reduces shift key wear.
    Coincidentally it's what the drm uses too.
    
    bool, true and false are defined in IEEE 1003.1 (2003) and POSIX since C99
    	(as is stdint.h, which we use already)

commit e1714a4f4329728cf897f8953acc480b47a4e5d7
Author: root <root@dpish.hayton.korsenowski>
Date:   Sun Jan 20 18:38:11 2008 +0000

    randr12: fix early cards

commit 271844d3a761af65c9625d1564e1c08a9f64d159
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jan 20 19:06:49 2008 +0100

    NV40TEX: Don't sync when compositing, will have bad sideeffects if the compositing manager tries it too.

commit c338a14ea688953b03f274d0e436b579d0411f18
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jan 20 17:28:13 2008 +0100

    Some misc cleanup.

commit 2cd6e157cebac663f1b3c88e3653a4c2c9971ff1
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jan 20 17:11:27 2008 +0100

    randr12: Fix a major screwup i made during a cleanup.

commit c3127a0c9cf4599c40b27e24a411a7fe4969152a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jan 20 17:00:58 2008 +0100

    NV40TEX: Implement sync to vblank.
    
    - I don't know why this didn't work the first time i tried, maybe i missed it due to another bug (that also caused tearing).
    - This should also work reasonably well for composited situations, but ofcource we can't guarantee that.

commit 512f4ba33528dafb505bc2db5f9bb4d1b92c3a7b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 20 14:47:52 2008 +0000

    randr12: init some more Xv state

commit 3f6a681a38fccbd53dd10aa42cc8d1b9bfe0eb71
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 19 14:02:43 2008 +0000

    minor debug correction

commit efd3cd086036cd5f8817aee771ee630066a92830
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 20 01:56:00 2008 +0000

    INIT_8E opcode
    
    again, from pq's trace

commit f0bb436796a2d4dc693ec92b73c7abb27d428cda
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 19 01:37:34 2008 +0000

    INIT_IO opcode
    
    Based on pq's g8x trace

commit c1b69fdaa089898821338b14c1f72eda354c2caa
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jan 19 19:24:04 2008 +0100

    randr12: hide cursor before locking + misc cleanup.

commit dfa8901e847e1fbcbcb6de0c0726f53531b15b34
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jan 19 16:39:26 2008 +0100

    randr12: Remove unneeded vgahw stuff.

commit 47452756724007318eb384912c40302b15523998
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jan 19 16:29:57 2008 +0100

    randr12: Move away from some of the nv_hw wrappers.

commit 9e3a2d7c8c36d4dc43396be6b742b6137dfef455
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jan 19 15:59:48 2008 +0100

    randr12: Remove usage of nvRead/WriteVGA0/1.

commit 936e9fe8adb2660cf75959265971c60f378cd7d6
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jan 19 11:28:41 2008 +0100

    randr12: Some cleanup.
    
    - framebuffer consoles can use most of the normal stuff, so change it back.
    - some cursor deobfuscation

commit a9bae6ba734882308ac29a9fe2403eaa027bd518
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 18 20:49:58 2008 +0000

    More detailed modesetting debug (both randr12 and oldstyle)

commit a28216639c3cf01d8f7cc85030d69fd58be86ed9
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 18 18:10:40 2008 +0000

    Remove no longer needed panel quirk

commit 59fec415ef32c291363408d5c8a24a2041450434
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 18 17:02:32 2008 +0000

    Use bios PLL functions on nv4x
    
    And a minor completeness correction

commit 7efaf3d97a51d2447310954c9224fd7ec888caf9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 18 23:45:51 2008 +0100

    randr12: Refine CR4B, anyone know what this does?
    
    - There is more to this register.

commit 41646042ab9d9d0c3bc8a76b25a4bff45f039922
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 18 16:50:50 2008 +0000

    Rerefactor getting pll limits for nv4x

commit 174d8f7e015250af4c0b27e044f5088f5465d851
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 18 14:24:48 2008 +0000

    Use pll limits infrastructure on single stage plls
    
    And add default PLL limits on old cards

commit b3ca42d8589bed843ce5e772a1807c4c95377b92
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 18 01:47:05 2008 +0000

    Don't speculate on the unknown limit field, and call the others log2p, not p

commit d9db305e2d4bfb017a8542a7407ad4df27c86121
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 18 01:18:42 2008 +0000

    Better setPLL_single

commit 2a94184112cf06225672ef34836e19723761140a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 18 14:33:01 2008 +0000

    Bios parsing safety checks

commit 6251f2fa774b913f5622ff9d07f56b2a5b9d1888
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 18 12:17:50 2008 +0100

    Some misc fixes.

commit b21789f93c7e7df9db320dea093deab0f1056955
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 18 09:23:39 2008 +0100

    randr12: Actually using SavedReg does tend to help ;-)

commit f15ea75b88b68fadb64fdeef75a23329e2a3f903
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 18 09:13:24 2008 +0100

    randr12: Fix a huge gaping hole in NewRestore.
    
    - Restore CR5758 in a better place and actually restore something proper (use SavedReg instead of ModeReg).
    - Minor other fix.

commit cd427da27d69db000f07ec50d27ca56ded97994e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 17 23:37:23 2008 +0000

    Invent a DVI-A output for the DVI-D output, on DCB1.4/1.5

commit fbcb57827a1c4ac4b3c7ce66ca935f6b095f020d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 17 22:49:37 2008 +0000

    And another DCB 1.4 entry

commit a355e5b0dcd5f5c78da20bd07f581b5841b3a2ba
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Jan 17 22:25:12 2008 +0100

    randr12: Forgot to clear a few state variables on restore.

commit ba0d0e8571b657b5196d0508347f7641cd7f04cb
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 17 20:48:16 2008 +0000

    Add me

commit 9cfc736ea4b089c74daaf1b0fac6393fec459bc0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 17 20:29:30 2008 +0000

    That warning wasn't there a moment ago

commit 7eded6883404ce0cff83051497518a99c1d8a832
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 17 17:07:24 2008 +0000

    Fix for situations with fixed second stage gain and hook code in to init scripts
    
    And make sure bad PLL values are easily seen

commit 075a14ac2525b364edc583caac50e03d171f67a7
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 17 19:59:55 2008 +0000

    PLL limits reg off-by-four is dealt with elsewhere
    
    Also some more imaginative pll limit member naming
    and minor get_pll_limits debugging corrections

commit a3ef2cb34ad9de4567d30625a3bf87720a5ed8da
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 17 17:30:19 2008 +0000

    setPLL for nv40 lowreg PLLs

commit c3bef786b5291a638791b8a5125b3ff60cf9d1b1
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 17 17:30:36 2008 +0000

    setPLL for nv40 highreg PLLs

commit 996b93cdc73e3d6e581a766cbbf4a29bb34b8eb2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Jan 17 18:27:51 2008 +0100

    randr12: Some misc fixes.

commit aa561c487754210ca22a1fc1d17c54d8e199e7a1
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 16 22:42:18 2008 +0100

    Some misc fixes, mostly related to setting the right crtc for overlay (randr12).

commit 276d4e35673bb71410c882badf03550bcee48571
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 16 08:03:51 2008 +0100

    randr12: Fix mode privates again, hopefully ;-)

commit f89243e4c2ba33a822b15de9136736f44b4c1579
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 16 00:25:08 2008 +0000

    Minor reg adjustment

commit df0f66750d1d893b2d91b0cfc91ecd4f0a1ba80e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 15 16:30:00 2008 +0000

    Refactor pll table parsing
    
    And correct table reg matching on version 0x21 tables, which is off-by-4

commit 3171b470f00a11d3528067c7d91e751257aa603c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 15 14:59:49 2008 +0000

    Use pll_lims in getMNP_double
    
    Also move quirks elsewhere, and optimize

commit 7bc921485c63232fecb59e488ef203166c48c6e1
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 15 15:14:46 2008 +0000

    Store PLL limit frequencies in kHz, since that's what we use them in

commit 51a739771b59a4725e75660b2c8edb54aa763ba5
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 15 01:32:25 2008 +0000

    Two stage PLL limits parsing corrections
    
    And some corrections to getMNP_double

commit 7013116596ce8b065df265f16b3fdb9ac9e3df37
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 15 09:53:58 2008 +0000

    randr12: Oh no! More pNv->twoHeads

commit c7081039bf27aad12e17063d1a9becf160e7ee49
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 15 21:05:08 2008 +0100

    randr12: PrivFlags are not so private, switch to a real mode Private.
    
    - This hopefully fixes the obscure issues people have had these last few days.

commit cd14cd8c520361a15f5f8d255171c85810d83033
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Jan 15 20:44:48 2008 +0100

    Order the reg ranges, add some.

commit 17fa42166fb4e8102cbe880be6021f1145268d16
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Tue Jan 15 18:45:30 2008 +0100

    nv30: set VIEWPORT_TX_ORIGIN to 0 for all cards, except real nv30

commit 777a3df246feb364d440282db0864fb9b0908872
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 15 17:52:19 2008 +0100

    NV30EXA: Chipset should be masked by 0xFFF0, switch to NVArch while i'm at it.

commit b55608bac3f4f909f1ef8380a1ac69ca2f262ea2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 15 08:10:46 2008 +0100

    randr12: Reenable cvtmode.

commit 0db297bb6199878c0f77935acc447c568a87c900
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Jan 14 22:54:42 2008 +0100

    randr12: Undo some changes of the past + always set vpll on modeset.

commit 2879f4518e6830cf0b490cde5b4daca3e931383d
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Mon Jan 14 23:26:14 2008 +0100

    nv30: Only change VIEWPOR_TX_ORIGIN on real nv30

commit 405fd62ee8b56e3b1d6cc78df7ecfa654cd54dec
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Jan 14 20:17:05 2008 +0100

    randr12: "NewRestore" Always reset some state regs after restore.

commit 8093b83c3d1393ba225f9def1ce055b04cba5a8f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Jan 14 19:29:28 2008 +0100

    randr12: "NewRestore" proper depth vs bpp awareness.

commit 8733ea89d9acece8721a2ae2d62a68916746c374
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 14 18:21:47 2008 +0000

    randr12: yet more pre nv10 fixes

commit c0d1117782673771b0490fe4d19abd83c6620033
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Jan 14 11:54:28 2008 +0000

    Possible fix for C51's misaligned regs

commit 6ac824446d65a28519f378b3c01b1a6683a14d1b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 13 21:36:53 2008 +0000

    randr12: better load detection (enabled)

commit ef28e91b24ee34911b3238e681064a95be7afd3a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Jan 14 00:48:25 2008 +0100

    randr12: We didn't copy the Flags to the adjusted mode, very bad.

commit d41d5ae34a7d7f4658a1d86635fb8c59b80a1355
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 13 21:35:33 2008 +0000

    Be more flexible on init table length

commit 4744e5410c27d8bd3c2f92bee4554801639dba29
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Jan 13 19:37:28 2008 +0000

    More DCB 1.4/1.5 support

commit c043b3fa7cf6297e010dfa6fcff24f263b8a8fd8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jan 13 17:09:04 2008 +0100

    randr12: Minor fix.

commit 3f7f0cab91416f6f4f4378ee6bdabeb9e75cf230
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jan 13 16:05:22 2008 +0100

    randr12: Some "NewRestore" fixes for framebuffer modes.
    
    - This is mostly it for framebuffer modes.

commit d8e7c5068835004741b74577344bd4defad4d139
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jan 13 15:05:15 2008 +0100

    nvbios: Fix a bmp bug for malc0.

commit 5c01f96caa2b3b7223383f37d6903fbcaf3643cd
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jan 13 14:12:00 2008 +0100

    randr12: Some "NewRestore" fixes.
    
    - Improvements to restoring framebuffer modes, still a few minor bugs to fix.
    - VGA modes work partially, i doubt this will make mainline though, since it's fragile.
    - This is a work in progress, only for testing.
    - Added some other functions to NOUVEAU_MODESET_TRACE.

commit 364497a4234410adea25e4e51e0bdb17ccd3ba4a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 12 00:39:59 2008 +0000

    randr12: more fixes aimed at nv0x

commit ac546e77fe71ffbbc76d9c48c5ab0b6faac832d7
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 11 22:05:11 2008 +0000

    Remove some nv_bios TODOs and shut up some warnings

commit fc04d71de6ec36158040617fb973218a8bdd0903
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 11 23:23:43 2008 +0100

    randr12: Add new experimental restore mode.
    
    - Option "NewRestore"
    - Only tested on my 16bpp 1280x1024 vesafb console.
    - It may work on text consoles.
    - This should eventually replace the somewhat frail restore system that we currently have.

commit 361bbe074a0d674012615b05fd3da81e8e1ce34e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 11 22:30:14 2008 +0100

    randr12: Intermediate commit.

commit 3b6e551e1afefe86338ab830505dc08412b2e80b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 11 18:59:53 2008 +0100

    randr12: Intermediate commit.

commit 5a989b23322e6ba1abe6456246300067c3bf42cb
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 11 21:33:47 2008 +0000

    Tidy up and correct DCB merging

commit ec7889a5a0787929c8c8ae08aaf729929c483035
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 10 23:44:59 2008 +0000

    Fix bios opcode 0x56 and add reg alignment check

commit 9b356d08f9169e35bdbff079c3351c475e53ec9b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 11 16:34:28 2008 +0000

    randr12: undo overzealous code disablement

commit 44295b59f57be8956a5226415b5fdfbf49e175c1
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 11 12:28:16 2008 +0000

    randr12: twoHeads and other fixes for pre nv10 (nv_crtc.c)

commit 80fa1e1aef1b093b0310c51817ee9685e4d9d251
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 11 11:16:21 2008 +0000

    randr12: some tidyup to output save/restore functions, and some twoHeads fixes

commit 04f64725b5784ecfd7a5c3218d4710c2ad0f7f0f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 11 11:20:45 2008 +0000

    randr12: tidy up dpms functions
    
    also, don't set cr57/58 in output_prepare as the dpms funcs do it, and it shouldn't be done on early cards anyway

commit cc6794abb637e5ac8c98d7c6385bd36aa43d1ebc
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 10 20:25:50 2008 +0000

    randr12: use clocks in kHz throughout

commit 8337b77b40da9c3bba106837b4553433fa4e8a76
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 10 19:09:16 2008 +0000

    The bios transition freq is in 10s kHz - so x10

commit d65f59144f8a79116bca2f09de41d5786a7a4f84
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Jan 10 18:50:47 2008 +0100

    randr12: Some minor things for supporting vga modes (in the future).

commit 0e646b0332b52e23ef13301765f7f1e8f881e165
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Jan 10 17:41:39 2008 +0100

    randr12: Intermediate commit.

commit a5122460cfa07d45cf91ae112db9170fecee6966
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 10 16:21:49 2008 +0000

    Remove weirdo special case handling on bios reg writes
    
    I don't think these ever get used, and the code only seems to be on gf6 anyway

commit 31b1a894079ca3983d17ac7a81d6ecd420f7d377
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 10 14:14:24 2008 +0000

    randr12: dtrt wrt dual link on lvds when !straps

commit e02d2cc8b77443fde4e267ce4d9691ed680eef01
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 10 12:03:43 2008 +0000

    randr12: improve setting of fp_control

commit d8eb924a43576c0e360965a43f5363d0ba2aecd0
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Thu Jan 10 12:03:30 2008 +0100

    Xv: cleanup.

commit 1f727083cfafa9097ed98266420a2fd16905ae10
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 10 00:12:52 2008 +0000

    randr12: enable LVDS and refactor output creation
    
    Heavily based on initial patch by seventhguardian

commit c08c6de0f452c7f5cd1bac8bf974aaac872c8e2c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 9 16:18:30 2008 +0000

    deifdefication - we requre xserver 1.3, so randr 1.2 is guaranteed

commit 1556144a1af3c89eaa14cbfe8bdc9dc966fef8be
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 9 15:47:50 2008 +0000

    randr12: optimize away excessive LVDS_RESETing

commit 55e6750038edd7010ae8304fe3c3b4ac9e7b963c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 9 22:08:49 2008 +0100

    randr12: Fix minor bug, related to output resource conflicts.

commit c1fe3766bd181d9ed273850e6c0d1939c0efc8aa
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 9 20:20:03 2008 +0100

    randr12: Reset crtc when changing output routes.

commit 01b9a081c288c69fa0bbc0d3829a0026796e731a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 9 19:30:17 2008 +0100

    randr12: Don't change vpll's twice on restore.

commit 3643b2635dcaba3e6ec969a3cd6eda43623c8992
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 9 15:12:30 2008 +0000

    Detect an LVDS panel if there's a hardcoded EDID

commit 64d8032c419ef8cf14cdf3f83228d3e0f5714909
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Jan 9 15:11:24 2008 +0000

    If no PROM, and no PRAMIN, use the PCI rom image

commit 99a64d31979a8c83ac9d52fabe3114c576c94bba
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 8 22:58:37 2008 +0000

    fp bios edid oops commit

commit b470cf257433dad174d62cdbd4331ada2809334e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 8 23:54:51 2008 +0100

    randr12: More fixes for strange output routes.

commit cfbdbd6ac846af79d9ddf2b4597736cba74d5916
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 8 20:57:10 2008 +0000

    randr12: try to use bios fp edid, if nothing else works

commit d4e4892244c90b481bfd8c6d28d2390fe696e160
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 8 20:07:10 2008 +0000

    Read EDID from BIOS if appropriate

commit 6fab536aa13b8639d9b419a37fccfb30a4313b77
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 8 16:18:09 2008 +0000

    Darktama's C51 is a mobile card

commit 921f2e226ccbe7468cc8e51919872c3e8cf28c4e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 8 15:37:51 2008 +0000

    BIT cards use the init scripts to do the power sequencing

commit 33ea2cdef8c46ee9837b6fc9809df82d4bdca339
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 8 22:36:12 2008 +0100

    randr12: Small fix for NV3x, more will be needed.

commit 175b91d48644bdbfc4e48f4c2fe6c9cf936802b5
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 8 20:23:38 2008 +0100

    randr12: Fix reverse pll reading code for NV30.

commit 4add8cfb68404e9e2764451c4e48ab4d0cf04482
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 8 19:07:50 2008 +0100

    randr12: Some minor things for NV30.

commit 74b03f7d4f5506222b6a95ccf8b5c9e0ff69e4dc
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Jan 8 13:52:00 2008 +0000

    Assorted small bios/randr12 bits and pieces
    
    Make bios execution a bit faster
    Better self documenting code for DCB dual link criterion
    Tidy up some ineffectual LVDS mode code

commit 76f3c47736661df86490b0d133ac82c371cab73d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Jan 7 23:38:08 2008 +0100

    randr12: Handle NV30 vpll's correctly.
    
    - This only concerns the real NV30, not the other NV3x cards.

commit 1a25def0a64ac6437c6ba5f51ddb8743d4a88d00
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Jan 7 19:06:16 2008 +0100

    randr12: Clear dpms cache when needed.

commit 3f0008128e2afd2b1a1b595829c6324e46a4bf1d
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Mon Jan 7 19:03:53 2008 +0100

    Xv: overlay BW workaround applied to NV40 as well

commit d5dabd8c316371605d81be55a5c6c82e6351b591
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Mon Jan 7 19:01:07 2008 +0100

    Xv: removed useless #includes

commit 510f3575df87733857dbb5bfe398ce04aebadfd4
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Mon Jan 7 17:13:43 2008 +0100

    Xv: added NV04 overlay brightness attribute. Original patch by Andrew Randrianasulu

commit a71de657e1e2718800ef1c319dab5dafcc9ea0cd
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Jan 8 02:18:59 2008 +1100

    avoid symbol clash with 3d driver.

commit 0463dc0682fb192ce82037601289f75913f65e3c
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Jan 8 02:16:26 2008 +1100

    nv50: support hostdata UTS

commit 9fb186c57bdad07281f1a0bdebac98a4b18dc6e3
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Jan 7 18:33:03 2008 +1100

    nv50: small fix

commit b679d6a8539403f075a57d882bb4d0eb33b180d9
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Jan 7 02:39:19 2008 +0100

    nv40 video texture: sometimes less is more.

commit b9a364a985bb23ee30dc094ba13e19ea2f4f6bdf
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jan 6 20:44:56 2008 +0100

    NV40EXA: Remove stair shaped tearing i get.

commit 80ac301acaf8dba6a93f5b04b97f8dca2748b92c
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sun Jan 6 20:04:10 2008 +0100

    We do not get a valid CRTC configuration structure if we're not using RandR 1.2,
    so make sure we can handle the old mode with some form of grace.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit f1aaf3fe616f5a0633e685867cf33b37f2c3f07b
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Jan 6 19:14:03 2008 +0100

    nv40 video texture: bilinear filtering for UV.

commit 57fc0631428f29af0d24036c939826349e3018b5
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sun Jan 6 17:41:50 2008 +0100

    Xv: overlay auto CRTC switch with randr12, blitter fallback
    
    Now switching the overlay to the right CRTC when displaying video with the overlay and dual head, with a nice fallback
    to the blitter when the window is on both CRTCs.
    Fixed a bug preventing the overlay from working on CRTC1.

commit b6ba53ee1cbda5cb91e43ae6b84e1737ebc367f4
Author: Jeremy Kolb <jkolb@glorfindel.hsd1.ma.comcast.net>
Date:   Sun Jan 6 12:58:45 2008 -0500

    port "G80: Reduce load detection false positives." from xf86-video-nv commit d483ecd851bb84014f1fa86f0ada4540b3ad801e

commit b4fa9b060308090f4bab3f8716f7e2ecaf234be7
Author: Jeremy Kolb <jkolb@glorfindel.hsd1.ma.comcast.net>
Date:   Sun Jan 6 12:51:55 2008 -0500

    Return NULL not FALSE.

commit 47dde8283bcc409037682098cad8f0a0c3f9e3b2
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sun Jan 6 17:48:48 2008 +0100

    Xv: don't wait for vblank on CRTC0 _and_ CRTC1

commit c8a9b4d0c2145d13c74a00cb24e1310e247a2718
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sun Jan 6 17:45:37 2008 +0100

    wait for correct crtc vsync
    
    Make sure we wait for the CRTC that will actually display the video
    frame we're blitting.

commit 25fac91dfc7072405243d2891f9ec1f0cef49a3d
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Jan 6 16:20:43 2008 +0100

    Switch to latest nouveau_class.h

commit bc82548514daab356fe0e0ee942ff75018fbc383
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Jan 6 16:19:50 2008 +0100

    Use clamp to edge to avoid the thin black lines.

commit acaf2501d17030097761b3f8d369f14874261f6d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Jan 6 13:17:49 2008 +0100

    randr12: Some fixes for NV31M.

commit 7b1521c263511016538286806f54221721c60608
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jan 5 19:43:08 2008 +0100

    randr12: NV11 and NV20 stop at CR52.

commit 9441ca0fd579cb648577f107777236d22a2b1ead
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jan 5 19:32:32 2008 +0100

    randr12: NV11 and NV20 don't have CR57 and CR58.

commit 8f520754459c363313353605207f7598e259ea77
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jan 5 18:54:14 2008 +0100

    Add a missing function to NOUVEAU_MODESET_TRACE.

commit d5bf6a0149dc80d5d76ab8857415d20b42188656
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 5 17:22:33 2008 +0000

    randr12: fix PLL breaking typo

commit 21f02f5f248bce5f49e0fcee5594c83155b532b5
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 5 03:10:21 2008 +0000

    Need to restore EXTDEV before fp table parsing
    
    and a nice hwsq message

commit 4e4819f6722a120d3a22eb9829fe73780a0c1087
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jan 5 18:30:08 2008 +0100

    randr12: Minor cleanup.

commit 758e1cf14d61725d69ca75b7268f22e11a32a5ba
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jan 5 18:27:10 2008 +0100

    randr12: Fix a thinko, generate data before restoring, not at the beginning.

commit f315ce85fa33894767892772c1e7a0966150ba6b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jan 5 14:05:55 2008 +0100

    randr12: Some NV40 quirks.

commit 08b1a2622708be9f714c27fd31372e28277d7c5b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jan 5 13:03:40 2008 +0100

    randr12: Small quirk for NV11.

commit 73101dbcfac68688914e2a3f46008ddd69d0dc62
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Jan 5 02:46:52 2008 +0000

    Load NV17 power sequencing microcode

commit 2ec6cf4a6e59b861c1672471872fc4ca75cfce27
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Jan 5 01:22:42 2008 +0100

    randr12: Cache dpms calls to avoid unnecesary blinking and such.

commit 4f586ac169e7acd0e0bfa4139bd74e718d7598e2
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sat Jan 5 01:38:52 2008 +0200

    Xv: linearly interpolate U and V samples when converting from YV12 to YUY2
    
    Original patch by ahuillet, pq did one last fix.

commit 5f1a721070c20a4287d17a8797ef1aabe19a579e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 4 17:59:54 2008 +0000

    More DCB 1.4/1.5 fixes

commit 95485646eb61aaa84a8d3b6550552ab417be8e16
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 4 18:33:31 2008 +0100

    randr12: Forgot to switch to vpll1_a, etc in one place.

commit c43bb4990f44d50d91785f8c9860e27c3357c0a3
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 4 01:14:40 2008 +0000

    randr12: fix BIT bios LVDS dpms

commit 5d9e42bbb5878f52cf7fd6d96532253d868b2a27
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 4 13:26:38 2008 +0000

    Better guesses at DCB 1.4/1.5

commit 73da4362cd7e2918bd066528a9feb157019edb5e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 4 11:54:27 2008 +0100

    randr12: Remove unnecesary usleep.
    
    - I once did this thinking it may solve a bug, but it turned out a palette issue.

commit c35f532fdee6141e871560f8a400040c2eb82891
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 4 11:43:16 2008 +0100

    NV40: Improve VCO2 detection in nvGetClocks()

commit 9369c03788d7410150044d2e3a83f0bcb876af42
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Jan 4 11:39:37 2008 +0100

    randr12: Improve speed of mode switches.
    
    - Moved pre-NV40 to vpll1_a, vpll1_b, etc variables.
    - Only change vpll when needed.

commit ec0fe5294fdee7a79e9bfaf21ea42cfd3f52ec75
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Jan 4 02:31:21 2008 +0000

    Infra for regs stored over suspend and a sort-of implementation of INIT_COMPUTE_MEM

commit 786e133577edcf91b519dd8dede24250ec6fdcdf
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 3 02:21:35 2008 +0000

    Better bios register read function prototype and a ReadEXTDEV purge

commit 951f95ba553f301de2a540ef67cf04152cf72344
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 3 00:52:12 2008 +0000

    Refactor NVParseBios

commit 8b82f24e8a526c0483120f9979a3b9370da3b297
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Jan 3 00:32:24 2008 +0000

    Revert "randr12: LVDS screens use center mode."
    
    This reverts commit 1142b15c56a0b9dab8b929fc196a825815457374.
    
    They don't, necessarily

commit 876d7b11c754dd66738bcc26a07e0d707b81a99f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Jan 3 22:45:00 2008 +0100

    NV40: Handle broken VCO2 values.

commit 50eb355e44017a51636c1e7b8c140bc3b48813af
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Jan 3 22:36:04 2008 +0100

    NV40: A better attempt at YUV->RGB conversion constants + remove vblank sync.
    
    - The vblank sync didn't work (made things worse actually), someone needs to reverse engineer the proper way for the 3d engine.

commit 22cdfec9b0858c186ab37ff649248a2a825eb513
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Jan 3 12:48:43 2008 +0100

    NV40: Avoid a SIGFPE in nvGetClocks() when VCO2 is off.

commit 5015e2cefcf2069ee0054c433c7ae1763d2f95eb
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Jan 3 12:37:10 2008 +0100

    NV40: Actually add the attribute.

commit 5b60344486c8ddeba28204dbea6f1e11704cf951
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Jan 3 05:56:23 2008 +0100

    Add a vsync attribute to nv40 textured video. It doesn't seem to work so well for me (6200), I suspect because my card is too slow anyway. Possible solutions include reducing the shader instruction # and forcing drawing from top to bottom.

commit f7a356250a9a0cb214dbb1871696506c04fab946
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 2 12:15:21 2008 +0100

    randr12: Hopefully these were all the function declerations that need updating.
    
    - Build didn't even show any errors, so that's why i missed them.

commit aa608573918ed34968054fb5a93b11fc5c8aa1a8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Jan 2 00:19:12 2008 +0100

    Dump some CARD8 and CARD32 in favour of uintX_t.

commit b44af66323b622411d5ffa4a78a210abefdb1e2f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 1 22:38:34 2008 +0100

    randr12: Small fix for NV4x cards with strange output routes.

commit 6b204d5ef3ff61236ef86eadcc7e137a722aef72
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 1 21:51:31 2008 +0100

    randr12: Improve output routing.

commit 64546788e50ae3482698f9505869e06f727c0e50
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 1 21:07:36 2008 +0100

    randr12: Really hopefully fix output resource conflict detection now.

commit b71a52ae9689026e7d96d2c2752eec0c9854b0c3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 1 20:38:24 2008 +0100

    randr12: Hopefully fix output resource conflict detection.

commit 9ac2765ff13f82746991c85649f45c13475e851d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 1 19:41:07 2008 +0100

    Forgot the NOUVEAU_EXA_PIXMAPS case.

commit 53565fc3e854abc0b5e7614da251024a60ddfd9e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 1 19:36:28 2008 +0100

    Stricter alignment requirements for offscreenBase, to avoid framebuffer corruption.

commit c9cedb7712719e3dee450245ebeb7db18cd40770
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 1 17:36:20 2008 +0100

    randr12: Time to let some routing insanity die.
    
    - I hope nvidia is just crazy sometimes when setting CRTC1 on both output resources.
    - Or is it some override used on load detect?

commit 9f1494ebf1ec1957f362366ab4abfc31c2227092
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 1 17:28:41 2008 +0100

    randr12: Always set bit 26 in FP_DEBUG_0 if already present.

commit a83c71244b8dceb2cac968195777636bd5c5f639
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 1 17:01:19 2008 +0100

    randr12: Minor tweak to flatpanel regs.

commit afe174cd57173c22011718d3290db5d939076ce6
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Jan 1 14:25:54 2008 +0100

    Remove AM_MAINTAINER_MODE from configure.ac

commit ef1a613e0f1a1fffb54a50fd14c10069ed9eac4b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 31 20:24:41 2007 +0100

    randr12: Fix a bug in an earlier commit.
    
    - This was local, but i wanted to keep some things seperate.

commit 01313e3dca07615fa3b2a2b09f6d45489cc8d796
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 31 20:15:03 2007 +0100

    randr12: Add a quirk for 1280x800 panel on 7300go.

commit 78bf63088d5805762460801c59f0f93b43ec96a7
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 31 19:34:33 2007 +0100

    randr12: Duplicate native modes, to avoid hitting an invalid pointer.

commit 83aad1ad6e8a5e48ee91346b4c7037ddc8456a73
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 31 18:57:49 2007 +0100

    randr12: Set the adjusted mode in output code.

commit 23d9d05a68cf2eac51b500d48d31bae3b484bbe8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 31 14:20:41 2007 +0100

    randr12: Deal with output resources in a better way.

commit a4d973214158efa90a1a23da879630d2b53ad313
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 31 13:18:16 2007 +0100

    randr12: Disable crt load detect again, until i know how to use it properly.

commit 59346e15688186b4c00ee5348413ae8312ac9a30
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 30 19:11:48 2007 +0100

    Revert "randr12: Another quirk for the 7300GO cards."
    
    This reverts commit 2f2921e6c33a0482f1f30e4d69820dc82690310a.
    It was unneeded after all.

commit 2f2921e6c33a0482f1f30e4d69820dc82690310a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 30 17:07:13 2007 +0100

    randr12: Another quirk for the 7300GO cards.

commit 642baacdab215f6ad7173757b8d7e00f716d6dbe
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 30 16:44:23 2007 +0100

    randr12: Fix quad view on some 7300GO cards.

commit df36ea6d9cd2a22b51a0386bbfe4f6760ed98d97
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 30 15:01:47 2007 +0100

    Add some headerfiles to Makefile.am

commit 29851581b2420570efd4fca2d4f6a19113ea6947
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 30 13:35:47 2007 +0100

    randr12: Only load palette's when appropriate.

commit c3359789d8f288b403aedbcdfa8795391fc13deb
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 30 13:26:24 2007 +0100

    NV40: Some fixes and safeties.

commit a7c922b58af72e3a48b92056c2fcd71c22477c2f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 30 11:36:10 2007 +0100

    NV40: Fix some comments and a damage reporting bug.

commit b6cd9964f9c20c40eda4283a93e447601beddb96
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 30 02:31:38 2007 +0100

    NV40: Fix the texturing adapter when not rendering offscreen.
    
    - Now clip restrictions are taken into consideration.
    - No streching when clipping the border of a screen anymore.

commit 4efdd1b560228aae7f6f5d6ed549461f8fdf0d00
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 29 22:34:32 2007 +0100

    randr12: Minor cleanup.

commit 5af6cd8dea2fa51b362201961191a17b0813fa30
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 29 21:46:18 2007 +0100

    randr12: Micro cleanup.

commit 4f91dd1ae08d348b2977b8ede0908ddd2add1cb4
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 29 20:15:25 2007 +0100

    NVBIOS: Fix duallink detection.

commit 559a640a542a89238afba02a78cf6399b8edc2fc
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 29 19:34:12 2007 +0100

    randr12: Do not remove bits in DITHER register.

commit 4b980011742a6fa0bdeb312a7b367d6a56675fcb
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 29 15:09:08 2007 +0100

    NV40: Preliminary Xv Texture Adaptor.
    
    - Only supports YV12.
    - No attributes.
    - Only the Y component gets bilinear filtering.
    - You're welcome to improve it ;-)

commit a4c045aa14b471fcfe29cdbec0cd846b2c5be2a6
Author: Peter Winters <peter@whoei.org>
Date:   Sat Dec 29 12:15:40 2007 +0100

    Xv: nforce2 overlay can do yv12

commit 1142b15c56a0b9dab8b929fc196a825815457374
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Dec 28 21:11:49 2007 +0100

    randr12: LVDS screens use center mode.

commit 8215e970445d99312c8fbbc31944466f70f3e186
Author: Andrew Randrianasulu <randrianasulu@yahoo.com>
Date:   Fri Dec 28 20:59:17 2007 +0100

    Fix IFC on nv4/5 by using the proper object.

commit c6ae3fe9f077c38f616fd3ad07275dcf8cb65bbc
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Dec 28 05:45:10 2007 +0000

    Make sure the CRTC regs are unlocked when doing bios init
    
    Also make the single stage PLL setter less exploitable by the whims of the hardware

commit bb467ad4baa30fc46a05bbce11d6aa4e3dac89a9
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Dec 28 08:23:17 2007 +0000

    Fake a DCB entry for cards from the pre-DCB era
    
    Also, drop DCB parsing to after the init parsing again; having an INIT_TMDS in
    the init scripts would be silly (the original reason for bumping DCB parsing up)

commit cdfe4fef9bd7d0a69d9ba19a79779152baef5489
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Dec 28 07:36:58 2007 +0000

    Madness. Bios parsing for NV05

commit d4e12684617d07dc859e774f3eff9b944bc4c89e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Dec 27 20:01:14 2007 +0100

    randr12: Minor change.

commit ab9dc943dd5036545e3396868c0332e9b727f31f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Dec 27 19:50:27 2007 +0100

    randr12: Small change.

commit 66d343ad594f1019eb8f4d23308eb97dd1bbd94d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Dec 27 19:25:00 2007 +0100

    randr12: minor change

commit cf5072e0c1d9dbee4f22ef190082aa1db78dbb0d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Dec 27 18:37:30 2007 +0100

    randr12: Undo unnecesary change.

commit a7c643601073de5a63f718ddcdc9eb9f4873f2bf
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Dec 27 17:12:17 2007 +0100

    randr12: Some fixes for LVDS and an odd 7300GO.

commit b17f8ca13604f6b085b474219843d740b31918e8
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Dec 26 20:59:36 2007 +0000

    Fix the setPLL optional code to actually compile

commit 05b929ccd9c7cd50f60b84bf987fc5220ee83008
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Dec 26 21:31:16 2007 +0000

    Fix up getting modes for both TMDS and LVDS

commit ba92eb062aaf8b53c7f5c1858eb876d3e2f9af3e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Dec 26 21:21:15 2007 +0100

    randr12: Remove this, since it's not essential and can cause problems.

commit 150d3362c5e0a300c35f1cb0c7da0c98cdd6b4de
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Dec 26 20:28:43 2007 +0100

    randr12: Some minor fixed for dvi and lvds.

commit 076f86dd67d6e69bd7d2a68f372cbbbb35785a3c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Dec 26 14:51:49 2007 +0100

    randr12: Some assorted fixes for dual link outputs.

commit 15489f15e8130ffa74bee7c52086857554a69a6b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Dec 25 23:50:10 2007 +0000

    On some chips we shouldn't look for a 27MHz crystal

commit 8fa59a6231e293a8b669517bf11d35dcc15f34ff
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Dec 25 19:43:47 2007 +0100

    randr12: Some minor changes.

commit 80bdd0e9f4bd664e217722a57a8db79d56968194
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Dec 25 11:58:09 2007 +0100

    randr12: Restrict TMDS register backup to digital outputs.
    
    - The NV11 locks up when accessing these and it has no digital outputs, so ;-)

commit 5574e96ae3e4608b95b5dd5f2dd5676386bb4ffe
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Dec 24 22:33:21 2007 +0000

    Better (not complete) support for DCB1.1/1.2

commit 2aa6a2347fa283dbd9b10258053602bd37880c26
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Dec 24 21:00:31 2007 +0000

    "type1" bios scripts

commit e0c5f65c0091b0f0ac7715fbf399a1f6fea60dc6
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Dec 24 18:13:47 2007 +0000

    Rehabilitate BMP parsing

commit 2789da6b34c9495a88d349b73cb838f4626fb152
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Dec 24 22:51:51 2007 +0000

    Fix BMP length for version 5.16

commit 93448b40627d35fd89d8fd5629dae5f487082f43
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Dec 24 15:23:41 2007 +0000

    randr12: use new PLL code on < NV40

commit 3d90e13c26e389f43253a5d2721ce93a628f156d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Dec 24 05:31:37 2007 +0000

    setPLL routines for single and two stage plls
    
    plus some parsing fixes

commit eabe1e02504467c7425e62673a68f4dc7dd83aab
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Dec 24 02:29:54 2007 +0000

    Two stage nv31 PLL mnp calculator and bios limits parsing

commit c8b50bc7dc146e01ceb67ee3633b5c8958345fcd
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Dec 23 03:09:26 2007 +0000

    Single stage PLL MNP calculator

commit 935f809f4bc9dab37e80c59007141d7b9ad673a8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 23 22:05:10 2007 +0100

    Reading into the -1 index of array is a bad idea, this should fix subchannel binding issues.

commit f357ba26b7f560cdec03f70a2c3b79b65d70172b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 23 15:48:24 2007 +0100

    randr12: Add modesetting debug option (showing most register writes).
    
    - Contribution of ahuillet.

commit 95387b9779173cc3e51a7fffc60975010253b391
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 23 15:35:24 2007 +0100

    NV40EXA: Suport as many of the repeat types as possible + random cleanup(randr12).

commit 8e80f7504f872166a811b6ce20663aaf97fd7181
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sun Dec 23 13:49:24 2007 +0100

    Revert a manifestation of my stupidity.

commit 86a3a5fd40005a4860d11f0046444ba232db0d1e
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sun Dec 23 13:47:08 2007 +0100

    Xv: added an attribute to change the CRTC the overlay is on - useful with dualhead

commit 129f04612cdbad756dbe213f77d2f12482b62c47
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sat Dec 22 23:32:36 2007 +0100

    aunedsoau~

commit 26953280895698a94c1f886cf7c0d2f389167b1c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 23 11:46:17 2007 +0100

    randr12: Extend dvi clock setting to nv3x also + cleanup.

commit 063d1bd50b164e841e3a725b75ac243827aede50
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 23 10:46:09 2007 +0100

    randr12: Actually load the default palette on modeset.

commit 810901abb50a54b8f1eb73029f5348805a53531d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 23 10:32:18 2007 +0100

    randr12: Simplify code a bit by using the more sane code for NV4x also.

commit eb8441824ea2a7dc9a1d7a86a4305fae48a26a0c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 23 01:02:18 2007 +0100

    Minor cleanup.

commit 9eef67abaf8beb9ed93eb5b6ecdf7255f5b06e4c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 23 00:18:13 2007 +0100

    randr12: Always enable MPLL and NVPLL on pre-NV41 cards.

commit fa82eb23904bc1a70209778d2aafcbef6f27cfa1
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 23 00:07:01 2007 +0100

    randr12: Put all NV2x (and lower) cards into restricted mode.

commit 33d7313d7dca4501b7ac2e078a87f3a10ab1b501
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 22 23:55:19 2007 +0100

    randr12: Correct CRTC selection for pre-NV40 cards.

commit d6243fe33223d2934c1a819c58bb58b9ebe15c25
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 22 23:39:51 2007 +0100

    randr12: Older cards do have switchable CRTC's, i was again wrong.

commit a96553544ae76239e394ab34b33814a57252d31c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 22 23:23:32 2007 +0100

    randr12: Minor cleanup to clock writing for pre-NV40 cards.

commit 9b63f42bc7da9b45ecbbd32ef81cae55d2a57220
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sat Dec 22 18:44:36 2007 +0100

    NV10EXA: disabled A8+A8 hack on PPC machines.

commit 308fec0111d182fb17536ff2746e079c1af32d5a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Dec 22 23:18:57 2007 +1100

    nv30: Don't touch 0x1a4

commit 62916c7c8c6b467436e4628c7d08a4e0de1f21f3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 22 12:02:31 2007 +0100

    randr12: Undo a previous mistake for NV1x/NV2x.

commit 6f9eb17637e2c3b8d49a07332f06a0102d2fe016
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Dec 21 20:18:57 2007 +0000

    Beginnings of PLL limits for BMP bioses
    
    And the correct way to use the debug_modes member (still disabled for now)

commit 73bc1db51e9431c5d1861d8a753aa8dd9abe9882
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Dec 22 02:57:40 2007 +0000

    On demand PLL limit parsing for NV40
    
    Also some nv_bios message formatting consistancy pedantry

commit 57b5dbfac4ff65258e94a17717815156a54cc273
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 22 01:29:38 2007 +0100

    NV40EXA: Fix borders of images that recieved arbitrary rotation.
    
    - It was getting padded up to the edge of the smallest square that could fit the rotated image.
    - Please try this on older cards as well.

commit 39ef0262be49feaed2ba1c6caeab5134181ef0b9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 22 01:26:44 2007 +0100

    randr12: Some minor changes.

commit 371b6e52bef743f14003e3783ea3dbc624050594
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Dec 21 18:02:33 2007 +0100

    randr12: Restrict crtc's on nv1x and nv2x.
    
    - If anyone can show a mmio-trace showing how to switch them (on cards that have a dcb table claiming they can), then please do.

commit c2ac36927827439cf92ff53bbf2414bfaf45a6c3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Dec 21 00:05:37 2007 +0100

    randr12: Detect switchable crtc's.

commit 33a2cf86520f42d549d03c46134b818e90d51a41
Author: Peter Winters <peter@whoei.org>
Date:   Thu Dec 20 23:47:11 2007 +0100

    NV10 EXA: use the proper variable

commit 71c3b8ff09adcadb10d800d3696762c3ef58be3d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Dec 19 23:44:23 2007 +0000

    randr12: fix old and new style scaling for LVDS, and use an enum for the scaling modes

commit 6bea51b905a461b4e703053082ab45d9e1074112
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Dec 20 00:07:29 2007 +0100

    randr12: Fix secondary (analog) outputs with ffs(or) != 3 on some NV4x cards.

commit e0e04eb561f4b127087befc4e3768d8012a82bfe
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Dec 19 04:29:34 2007 +0000

    randr12: don't use invalid crtc pointer for lvds dpms

commit a68ac97979a3178ea210470bbb3d64f3f9325e07
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Dec 19 04:00:14 2007 +0000

    Turn LVDS panel on again, after resetting, when we're shutting down

commit 1cfd659fc1a5f8dc2faba30155fca46bbe31f3a4
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Dec 18 16:58:57 2007 +0000

    minor link_head_and_output cleanup

commit 73a5d09b3e9fa13d04d6696ca38b6402795acc3d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Dec 19 03:43:59 2007 +0000

    randr12: CRTC member wasn't big enough
    
    yay gcc. could fix console colour breakage

commit 0a63198195f689b32388b99db61ff942e16fbc6d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Dec 18 23:43:57 2007 +0100

    NV10EXA: Fix rotation.

commit f2a3807618cfeac01d7d28e9d76721ad61495f7f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Dec 18 23:23:59 2007 +0100

    randr12: Add new pll calculation for NV4x cards (from NVClock).

commit ebf96c8b651d1a0dc5a19576cf57efcbb989d51d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Dec 18 21:38:56 2007 +0100

    randr12: Hopefully reset outputs better between mode changes.

commit 5561f54f94e0b31394ecaf461e342470ca768281
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Dec 18 07:49:05 2007 +0100

    Some endianess fixes for the previously committed code.

commit 11104ce9c499f30fb5abe29e65ba1918c563f4cd
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Dec 18 07:40:08 2007 +0100

    Rename NV30TCL to NV34TCL in preparation of the merge.

commit 3e6ea7af5b1613b9e0e4e29433910d998def4899
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 17 23:13:12 2007 +0100

    Add pll limits bios detection code for NV4x cards.

commit e56512d283f401a75c6165a0a02e8a7a5905fc4c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 17 19:45:42 2007 +0100

    NV30EXA: Fix rotation.

commit 9ff42b7a83da06a3b9b7076ca888ea447eaa16f3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 17 17:50:11 2007 +0100

    randr12: Fixes + cleanup.

commit 83d99bc3e15d11d3476c54053f6bbe0ff9f094be
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 17 00:40:24 2007 +0100

    randr12: Some minor additions.

commit 60c08fedec09dd036b4165881b3001874c4d349a
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Dec 16 23:40:26 2007 +0100

    nv30 exa : handle gart case.

commit efb10849e136048c9c49cce752d4073402219c8c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 16 23:26:49 2007 +0100

    Undo a bad change.

commit dd8beae22883822ea3555122b0352d4e3cf2c266
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 16 21:35:18 2007 +0100

    A little more cleanup.

commit 9ff169ba62dcb2eeefce8a020060de731b72cb6c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 16 21:32:32 2007 +0100

    More cleanup.

commit 2d03d4b999a0a37ff2f9fc87bd20959e789a152e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 16 21:19:13 2007 +0100

    randr12: Select sensible maximum heights and widths for framebuffer.

commit 0e47fa4ab35e529926f5fdccdb44f9d054e1886a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 16 21:17:04 2007 +0100

    Some reindenting and minor cleanups.

commit 2be4b73905dc5767e593bf4753607144fe67b7ab
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 16 20:24:26 2007 +0100

    Some cleanup.

commit 6686adbea6638dd894eef697e044941352cc2674
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 16 20:10:39 2007 +0100

    randr12: Restrict digital outputs with ffs(or) == 1 to primary crtc + some cleanup.
    
    - The blob does not reveal what the possible way is (so far), and guesswork didn't help either.

commit 9c8da2f562ca571a56224d7fecfb9c3fb3a8d3d0
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Dec 16 18:33:52 2007 +0100

    And of course, that comment has to go.

commit 02e9a01064930a7081569474be9544fa1f20a0f4
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Dec 16 18:32:52 2007 +0100

    Fix front buffer alignment issues (probably needed because of tiling).

commit b134b8f1552066b6706521a9c85d9241d99b3ccc
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 16 13:41:38 2007 +0100

    randr12: Fix compile error.

commit ec0c9cc9a69c00a960e98e796c00d35d996cf360
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 16 12:55:29 2007 +0100

    randr12: A minor change to OUTPUT register.

commit 69782a57285bb53df73c7f45d29882ae990f6054
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Sun Dec 16 00:09:45 2007 +0100

    nv30: revert viewport clip change, add myself, add unknown command 0x2b8 (viewport origin?)

commit 8dd238f3ce2e7eda7151670ea50a75abdb5b6217
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 15 23:49:58 2007 +0100

    randr12: Some minor changes.

commit 08a50d878571f7c9579b15703a08c5c2e52924f2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 15 19:54:11 2007 +0100

    randr12: Some minor reordering of load/save functions + don't lock crtc when leaving X.

commit 4209c06800b97e98261c10e0a625a68f7352ca6c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 15 14:48:04 2007 +0100

    randr12: Also support accelerated rotation on older xservers (and default code).

commit 933b40a2911486a78615984fb17e9ea6757fcfa8
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Dec 15 23:45:03 2007 +1100

    nv40: just for stillunknown...
    
    Fix composite transforms.  This is getting to a point where it may be
    worth doing this in the vertex program perhaps.  For now this works,
    it'll do.

commit 7212400070264e27a53564a7f5fc95dd9c99f82e
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Dec 15 23:44:17 2007 +1100

    Revert "NV40EXA: Fix composite rotation."
    
    This reverts commit 02d4538b207cf318737ace8c3d8ded76a54e5886.

commit 1a622257687a499ce74b3a608618d957784dccf0
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 15 13:39:23 2007 +0100

    randr12: Avoid a vram/memory leak in some situations.

commit 02d4538b207cf318737ace8c3d8ded76a54e5886
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 15 13:35:45 2007 +0100

    NV40EXA: Fix composite rotation.
    
    - Thanks to radeon (code) for inspiration and sample code.

commit 77d47348dfe01ca3972a683d3c478f910301e910
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 15 12:02:36 2007 +0100

    randr12: Add some ifdefs to make compiling better on older xserver's.

commit dbb7efc5b81145ad61d8e6502b918a1e909f3cfb
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Sat Dec 15 11:44:41 2007 +0100

    nv30: need to set default depth range

commit 6ab8436df0865aab7f12cd8527600353b4728df7
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Sat Dec 15 11:37:43 2007 +0100

    nv30: only 4 texture units

commit 370d97a4578528c26c3f1546a9522caf40aa2151
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Sat Dec 15 10:34:26 2007 +0100

    nv30: fix viewport clipping setup

commit 1190d046dfef97dea04d72c993f90a203d81d86c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 15 02:00:37 2007 +0100

    Fix ugly bug, that creeped in.

commit 46f321985ae57457edcedf80f82ba23e53fd9cd2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 15 01:44:59 2007 +0100

    randr12: Preliminary support for rotation, please read notes.
    
    - It works, but it's slow, very slow.
    - Each crtc now has it's own cursor map (fixing the bugs you never saw).
    - Dualhead with one rotated screen may show minor corruption near the edges, this will disappear if a fullscreen app opens.
    - Acceleration is possible, BUT:
    - You need a git xserver.
    - Enable NOUVEAU_EXA_PIXMAPS in nouveau_local.h (*maybe* this will become default later).
    - Most of the composite hooks have problems with rotation, so left and right won't work, inverted does work for me.
    - So please fix the composite hooks ;-)
    - Note: No slowdowns are apparent when using proper acceleration.

commit 0f07ec3f681b87762fbe7328f47b628711bdbaae
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Dec 15 00:01:04 2007 +0000

    Better restoration of TMDS regs on LVDS

commit 34be8d005fbfff373cc7fe52ca2fa09f5cd5ef00
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Dec 14 23:58:25 2007 +0100

    randr12: It seems DVI on laptops wasn't as strange after all.

commit d678932a1818c5c5f4a4f3097992626ce9620c0e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Dec 14 01:40:14 2007 +0000

    INIT_COPY_NV_REG and INIT_ZM_REG_GROUP_ADDRESS_LATCHED opcodes
    
    Thanks to RAOF for the trace with these
    
    Also correct a doc oopsy, and a bunch of superfluous whitespace

commit 5b9dc7ad6eb2f16c4ca8824c2a19c85bbe1f126b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Dec 13 02:30:06 2007 +0000

    Invert 18/24 bit interface flag, so that the default value (0) does not imply dithering

commit a878b48c7b5a7aafac9aaa877706f5c7570d3057
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Dec 13 01:10:12 2007 +0000

    Name bios opcodes 4f and 50
    
    Extrapolating from previous names, but marked as non canon

commit 59b46e695b1badbf00f2c03bc78ce58f6887f739
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Dec 13 01:03:25 2007 +0000

    Get VBIOS from pNv (cleanup)
    
    And a minor doc correction

commit c45930d0819668612547b4bf1a8d963bfe40e38b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Dec 13 00:15:21 2007 +0000

    randr12: some minor cleanups, no actual changes

commit 0e778b2d6970f761e5c0b5eb3054e91589cd2c46
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Dec 12 15:54:53 2007 +0000

    Setup NV40 LVDS

commit 269d83cb46075971fd8dc5402589d4da3eb92f22
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Dec 12 22:20:43 2007 +0000

    INIT_CONDITION_TIME opcode

commit 9b3072d195aae383a993526b3ab4350c500c4277
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Dec 12 18:08:07 2007 +0000

    Opcode 4F

commit 8ee100ced7da347904e45ce590350d7b7c47ed36
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Dec 10 22:50:40 2007 +0000

    FP BIOS mode finding for nv40

commit 9131985f5c359bdb077eb52649369a5c06831544
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Dec 11 23:23:27 2007 +0000

    CR57 doc addition

commit d595eb86790432f6a75dec3388080ffc9ffff8d8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Dec 12 22:12:33 2007 +0100

    randr12: A good guess at the lower bits of SEL_CLK (i hope ;-)).

commit c5bc9899c218abe801e024919c89896e8183dff2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Dec 12 21:03:34 2007 +0100

    randr12: Add some extra safeties (to mode checking).

commit 43c05d306485eb5d8c8b9b39f9bd4a3f470f20a2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Dec 11 21:43:02 2007 +0100

    randr12: Enable dithering on lvds when needed.

commit 8752f18d27a6095485e36f4fb20e9252f27a1e1b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Dec 11 20:22:23 2007 +0100

    randr12: SEL_CLK attempt 10, return to simplicity, which may actually work ;-)

commit c1227d3a2b9194d50a4274a48fa0b3bcf2628e36
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Dec 11 17:52:39 2007 +0100

    randr12: (mostly) Some fixes for NV40.
    
    - The NV40 is a strange card, as it partially behaves like an NV3x.

commit 34d9e971e17e763aee96b823bb34da54a281339c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Dec 11 11:50:28 2007 +0100

    randr12: Fix SEL_CLK assignment again (for non-mobile cards) + fix crosswiring.
    
    - I made a good guess for mobile cards, but i need more mmio-traces.
    - I accidentally broke crosswiring for my card (and other's like it).

commit bf28c3e7d9976f8695198a938397f001de62836b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Dec 11 00:04:38 2007 +0100

    randr12: Fix an earlier mistake, make a decent guess about dvi on laptops.
    
    - I could use some more mmiotraces of LVDS+DVI on NV4x.

commit 58531ebd4a72368b13d3c1564110ef85fb6d6644
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 10 20:43:26 2007 +0100

    randr12: Improve crosswiring for digital outputs + minor changes and cleanup.

commit a388cc5fe21f8692e8ee1dbd71caea88ea2ca5df
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 10 16:31:47 2007 +0100

    randr12: Properly set SEL_CLK based on bus, not based on output.
    
    - This hopefully fixes non-working dvi on some desktop cards and on mobile cards.

commit f96a6c2d5d251af560de673ccd91b88b3f5cc535
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 10 00:03:49 2007 +0100

    randr12: Add config option for scaling mode.

commit fc73ddad60c551289629be5f2f87b39e26f42674
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 9 22:46:39 2007 +0100

    randr12: Some cleanup.

commit 2543e301402b04ae94f349e21a7760beb6f5bdc6
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Dec 9 19:58:58 2007 +0000

    Bios register write function special case and some INIT_RESET improvements
    
    nv32_wr weirdness only seen on NV40+, but it shouldn't hurt for earlier cards

commit 4408ce8d2f902a9ace550a045e6022df2936fbce
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Dec 9 17:09:03 2007 +0000

    Some renaming for bios indexed port io

commit 9eb4294e3f5814f675b403078761bf002540868b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 9 18:36:26 2007 +0100

    randr12: Revert dither value to that used by nv.

commit cfbe4bdef7f4ba958462743dc28bf253b456c1a3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 9 18:34:10 2007 +0100

    randr12: Set FP_CONTROL correctly for NV2x cards.

commit d5dd3afc50e491689f765a5e6a72892efa1768a3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 9 18:10:29 2007 +0100

    randr12: Improve output selection.
    
    - Now detect if there is a dual link capable output at all.
    - NV2x cards can't switch crtc on analog outputs.

commit fda83a3c489469d2bb4cbd20c205016b19dfdec5
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Dec 9 15:51:02 2007 +0000

    Additional LVDS bios script sanity check
    
    Avoids current incorrect situation when LVDS attempted on NV40

commit 9932e36d4cf2988d1f6f40d615cd247acc21b592
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 9 16:29:14 2007 +0100

    randr12: Fix minor (potentional) bug.

commit 3f83d7308f3b0aca4943262b0ba2715a32b61d58
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 9 12:47:55 2007 +0100

    randr12: Add noscale mode and some misc fixes.

commit d688008b38609814de9c5c36a2c8bc569455d14e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 8 18:34:04 2007 +0100

    randr12: Fix typo, it's "our" not "or".

commit 0f7c018af0c7f929c2bf8efb12c510d6e3170885
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 8 18:25:41 2007 +0100

    randr12: Assuming an output always has a crtc is a bad idea.
    
    - Don't rely on current crtc to restore mode.

commit 86f248cc2e52de652b1768e15a4ba62eefefd81c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 8 16:49:21 2007 +0100

    randr12: Avoid that two outputs have the same clock selected.

commit 6be67d6cf0f047ceba0aa62989dc44bb58b0db87
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 8 15:50:39 2007 +0100

    randr12: Fix bug in sel_clk assignment.

commit ddfec2f1c749af227dd57dbde6751320ba72adb6
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Dec 8 02:18:41 2007 +0000

    Base error :)

commit dff95ae101f701d737c8d2134181693f36178beb
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Dec 7 16:56:26 2007 +0000

    Fix failure to cope with varying table lengths

commit 10731d2a8fe06fa8675c26d201615c2a019de737
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Dec 7 02:54:36 2007 +0000

    Add a new valid register range, which appears in some gf7 biosen.
    
    NVClock has it down as appearing in gf8 as a new PBUS range,
    but the use on gf7 looks PBUS-like too

commit b25049233613eff99d767a8ec0c97b5140088213
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Dec 7 03:13:52 2007 +0000

    Some more bios script opcodes
    
    Thanks to swany for the trace for these

commit 6da4923088e8ca1d2de464030205b41d893e65b3
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Dec 7 02:17:37 2007 +0000

    Some M table parsing, and defer I table execution

commit 7e5e477b67279e00d1e56736f9c953972bda4dec
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Dec 7 00:18:25 2007 +0000

    Improve TMDS04 setting for LVDS

commit dd757910f546a97bb42dbefdc7eae058980b1ffb
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Dec 6 23:37:01 2007 +0000

    TMDS regs setting for pre NV40

commit 38f139d473eb3201daaac47e655516f65c7528a6
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Dec 7 00:30:14 2007 +0000

    BIOS version parsing

commit 20b6be6c95a71a41456c4c9b5cb1a1e0238f2e70
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Dec 6 17:01:49 2007 +0000

    Refactor BIT specific details out of TMDS setting

commit f665b4737f1fbbd5e4a6495b561e723f17bc6137
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Dec 6 18:48:04 2007 +0000

    The 'T' table is clearly a TMDS table, call it as such

commit 3759cc9d602b0cd933a0ee7e6f64626822383e19
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Dec 6 05:03:49 2007 +0000

    The TMDS scripts being non-stubs does not seem to matter - they're still not executed
    
    Message left as log clutter in case there's some future case of broken TMDS when the scripts might be useful

commit d6e896dac1018fc3190a5a5283a405c4b031d1ba
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Dec 6 04:14:56 2007 +0000

    Test for LVDS_INIT script

commit c50bc602861fdcdb238e1a4db1146b4870ce83ba
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Dec 6 21:48:13 2007 +0100

    randr12: Small fix for dual link dvi.

commit 457d4217624cc73df22ca7f7db0134c54ebac5e5
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Dec 6 19:54:08 2007 +0100

    randr12: Improve compatibility with DCB 2.0

commit 5046cb7b3d1af89b72327660932ae06c06d0869b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Dec 6 02:28:18 2007 +0000

    randr12: oops, lost the restore case

commit 54c7bdf0f3e53c23c0853eac8243407d280d0732
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Dec 6 01:54:45 2007 +0000

    randr12: a common function to fix TMDS04, and new use of LVDS_RESET
    
    Plus some corrections/additions to call_lvds_script, and a minor CR5758 doc update

commit a7811521ed5d227a18af23e2e761ea39fb7eb86f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Dec 6 00:28:49 2007 +0100

    randr12: Fix comment.

commit 4771b4bd4b30f404fb087dd1fd6eac0e12fdd041
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Dec 6 00:25:48 2007 +0100

    randr12: Some assorted fixes, which hopefully improve things for dual link dvi.

commit 4d3a015631a0d95392daeec6fd8e99c65c83cb53
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Dec 5 20:41:27 2007 +0100

    randr12: replace preferred_ramdac with preferred_output.

commit d3036012db63f9a386d4c1fd8e624b86bcd6c48b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Dec 5 20:27:57 2007 +0100

    randr12: Clean up the unneeded ramdac variable.

commit 37f3a06be4f50c34ee8b82617e5e6eca3a4d66fe
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Dec 5 19:03:52 2007 +0100

    randr12: Pick right register set, to correctly "guess" the bios/VT clock.
    
    - A wrong register set leads to improper detection of crosswiring, thus selecting the wrong clock.
    - I noticed a 0.675 MHz difference in the clock (which is vpll2), when instead i should have had vpll1.

commit b843dbddbd496ab7d374018e6e05ac1a05ea00e2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Dec 5 16:51:04 2007 +0100

    randr12: Small fix.

commit 4b049994f32058e380543cee81b1d0b76658ea9e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Dec 5 16:47:07 2007 +0100

    randr12: Final commit, restore TMDS regs before everything else.
    
    - Use the bios to program the tmds registers.
    - Restore TMDS registers in nv_crtc_restore, to make sure it's early enough (see code note).
    - It works for me, let me know if it breaks stuff ;-)

commit 6ff8c1cb2014c7984503a8481cf6ad4f9cccf79a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Dec 5 07:57:30 2007 +0100

    randr12: Intermediate bios based flat panel init commit, still a few minor issues.

commit c14c7deb725c2509c804bae72faa584109f3021c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Dec 5 00:35:35 2007 +0000

    Add LVDS script function, and use it for DPMS

commit c587731d08bbfd58ff5c2725b7aed4e6477e9f7f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Dec 5 00:22:22 2007 +0000

    Parse the LVDS Manufacturer table
    
    Use dual link flag to set bit 31 of FP_CONTROL properly

commit affcf6988f1af2c3ea8c47a2f1fdf608cbafcfce
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Dec 4 20:31:06 2007 +0000

    Modify DCB dual link flag, and DCB config parsing for LVDS
    
    The DCB duallink flag indicates that this setup may be used for duallink;
    it obviously can't know whether a duallink display is plugged or not
    
    Use LVDS DCB conf flags for mode detection / selection

commit c822e32d95a7afa3d5ef076f97179a1843835f12
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Dec 4 09:06:10 2007 +0100

    randr12: Add fullscreen gpu scaling (only as randr property for the moment).

commit a1054c7bef3594f6876d611dde1cf3f0528fb8e1
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Dec 4 01:31:24 2007 +0000

    Better T table stuff.
    
    Hopefully now usable by calling parse_t_table(...) at the appropriate place
    
    Also collapse some messages, and add an array bound check

commit edb9a59ac8d3b16cccd52bde24606c43ae7d36d0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Dec 4 01:40:37 2007 +0000

    Allow BIOS execution at runtime, if wanted
    
    And comment the opcodes I haven't double checked yet

commit 82fdd3f76e20fc7dd10fcf00cf1c13520dc56364
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Dec 4 01:31:24 2007 +0000

    Make the bios a bit more accessible
    
    And make a few things use the new structure

commit d15bfdfb7e09dce85c3817036ced9efa6ac4522c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Dec 4 00:00:40 2007 +0000

    randr12: set CR58 appropriately for 0 and 2 cases

commit 02a4f498d903bda55ac38a6e19b1beca0d128e8a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Dec 3 23:35:01 2007 +0000

    randr12: refactor dcb usage
    
    heads is also a better name than head

commit 1571f81210b48407c9d20264437406d79dfcc784
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Dec 3 22:26:33 2007 +0000

    randr12: some code economy
    
    Only addition is adding call to output2->funcs->commit when stealing a ramdac,
    no logical changes otherwise AFAICT

commit 7debf566c7a88258ac8ca925d7138187c1ed8755
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Dec 4 00:06:05 2007 +0000

    randr12: Improve CR57 and CR58 infrastructure and saving/restoration

commit dab828c4793fd7e48e4d8e1d7f8d0a2f8198484c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 3 20:55:26 2007 +0100

    randr12: A few minor comment changes.

commit d959d880b6808adc153c752ea01f3a228879fe3c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Dec 3 20:51:16 2007 +0100

    randr12: Select CRTC 1 on pre-nv40 (stupid bug) + initial support choosing scaling method on tmds.
    
    - The output property SCALING_MODE accepts "gpu" and "panel".
    - The first obeys aspect ratio, the second always goes fullscreen.
    - This is just a first attemp at exposing an output property.

commit 1d2ea797704d55f63cfe8c00cc000a6b13f1093d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 2 22:10:56 2007 +0100

    Show the id's of unknown bit structures in the bios.

commit fc98b11eb70f1dd7dfb4e7c6eb8d888dfebdc890
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 2 12:02:08 2007 +0100

    randr12: dual-dvi cards need extra consideration.

commit 2beece0c634c2c60996da1f1d15b24c5f231a6be
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Dec 2 02:33:57 2007 +0000

    Fix endian bug on BIT biosen

commit d3563cccb43355927d4ba355bc31a957ea01587f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Dec 2 02:14:32 2007 +0000

    Don't use PROM if the checksum is bad

commit 4097af9bad85031fa1da9c3d21b084f587412604
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Dec 1 09:55:31 2007 +0000

    randr12: print "or" _pre_ ffs-ing

commit a8faa53355f9ba3851f47e290c821bc1b9a03e85
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Dec 1 09:53:05 2007 +0000

    DCB parsed flag for duallink outputs
    
    Light on proof, strong on suspicion with this one

commit 63fc1ab4ce597a2f542c9bb7d3edae67551bda29
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 2 02:08:20 2007 +0100

    randr12: Always use vpll2_true on nv4x cards.

commit 97a99c42fb24320177bdae884c4c710c5a25ce4f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 2 01:48:01 2007 +0100

    randr12: A safer bet for TMDS register 0x2e.

commit 3358f4eec53845cf90b9f9ef1f2a70c231bac588
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 2 01:34:49 2007 +0100

    randr12: Remove preferred_crtc, since it's probably incorrect.

commit 5994655925173a4e8b1c0ac902f7dc6e1ffe64f1
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Dec 2 01:08:41 2007 +0100

    randr12: Improve output register setting.

commit df8d6848a004e724e92c3dd63fc608198c7bd940
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 1 18:40:46 2007 +0100

    randr12: Fix up some dvi related issues, thanks to MighMoS.

commit 84cc907beffd9e8f91c4333a6db919ee2efa2740
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Dec 1 11:23:50 2007 +0100

    randr12: Fix NV4x dvi clock selection, mostly affects G70 cards.

commit c97ad9850da89b1898f125df1796bb1d00d124bb
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sat Dec 1 10:33:53 2007 +0100

    Make the debug variable global to all DMA calls.

commit 19d75f5018fd442920378a5083dbe1316cc6f62b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Dec 1 06:29:09 2007 +0000

    The BIT bios T table.
    
    T might stand for TMDS.
    Parsing once on start may not be the correct answer, could be a runtime thing

commit 42a02513a1db7ada586dcaa2eaa5b68e97d67892
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Dec 1 06:37:17 2007 +0000

    Bump DCB table init so that INIT_50 can use it

commit ddc4b0946dfd567fc0ea136db0d8b695c28bc3a2
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Dec 1 05:35:40 2007 +0000

    "or" can be 0xc
    
    Quite what this means, or why Nvidia couldn't give it a more descriptive
    variable name in the g80 driver is anyone's guess

commit 384115a5abd756c5e3ee79ba50e15636d159f19c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Dec 1 05:17:47 2007 +0000

    Use Nvidia's naming for CRTC_INDEX_COLOR

commit 2344b5b5a5a0efa439ba64f92d5b08097178dd6c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Dec 1 05:16:20 2007 +0000

    Bios script code 0x50

commit 78c6ff292f4c2aa0e06bce095108d0716555104a
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Dec 1 00:45:32 2007 +0000

    Add dcb "location" field. 0 for on-chip, !0 for external

commit 312fb3d65b8db6e3c2d123c0b192da82b7de4f71
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 30 16:47:26 2007 +0100

    randr12: Don't unset bit 8-15 in sel_clk.

commit ea10d579fb6053e064a5cd14b47e1da55d4120ac
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 30 16:43:33 2007 +0100

    randr12: Big commit, read message.
    
    - Outputs (on nv4x) should now select vpll2 instead of vpll1 when neccesary (this took a long time to figure out).
    - Register 0x00680594 is now set correctly to allow analog secondary outputs to work (for me at least).
    - I found the bit that triggers non-VGA modesetting in nv10reg, so in the future we could copy the blob in that area.
    - Misc fixes to a lot of things.

commit a7a8993f4074e942ec4b3ef58ede0162a2d3c415
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 26 22:11:03 2007 +0100

    randr12: Make sure the vpll is properly set when we steal a ramdac from another output.

commit c11d3f68720b698736d5a28a82d3e45b55379bc6
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 26 19:40:59 2007 +0100

    randr12: Fixed a minor cursor bug.

commit 59d98374e082c40b57737de56b17173f5b54910e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 26 19:24:03 2007 +0100

    randr12: Set the value of sel_clk correctly (hopefully) for NV4x.

commit 8672d7a33fe369645786c21e130f51560a656d3c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 25 22:08:23 2007 +0100

    randr12: cleanup + double register assignment (vga CRTC) removed.

commit 11809882f24e40b1b8c77f4caca27ce2ebd3ccbf
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 25 18:15:27 2007 +0100

    randr12: Convert premultiplied alpha cursors to normal alpha cursors.

commit ece41daabeb0cfd727daec14d9734dac08159c7a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 25 16:49:01 2007 +0100

    randr12: Fix alpha cursor corruption.

commit 5abbf55fb5c957c4be425e9ebd2660ca14d44e27
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 25 14:15:30 2007 +0100

    randr12: alpha cursors don't need background changes.

commit 37c36a284508e63af152a9315aa19a729e5516cd
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 25 13:06:10 2007 +0100

    Reindent a few cursor functions.

commit 1ad212271cc99b95ff52eb719d24ac58d392c0eb
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 25 03:20:43 2007 +0100

    randr12: Improve TMDS and LVDS registers (and enable for LVDS).

commit 39d94139910c53f9092f28ea6d742133666ac18d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 25 01:31:39 2007 +0100

    randr12: Optimize tmds_regs a little bit.

commit c6dce92c47dacfc822315e570bff70a8e42f5dc2
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Nov 24 21:51:14 2007 +0000

    randr12: use bus field to determine dvi pairs

commit 328197b4613f5e25eacfb67888701bb0e298c765
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Nov 24 20:44:27 2007 +0000

    Remove a load of unnecessary casts, and reorder functions by opcode
    
    Plus a micro opt to checksum thing

commit 8cee41bc6112a96f43f242b5178a9c968d2b2d9e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sat Nov 24 20:25:13 2007 +0000

    A bunch more cleaned up bios opcodes
    
    Thanks to stillunknown for the bios trace

commit 5d6f214db4cd5f0cdcb6a4395ce2ce4acf322257
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 24 16:22:04 2007 +0100

    randr12: Be more considerate of outputs that can only work on ramdac 1.

commit 6e1c37e26f630caa03da9061a5cec200708babbd
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 24 15:47:04 2007 +0100

    randr12: The result of another refinement of dvi crosswiring.

commit ce57eb9b34095f2776ef36b09249a4b202824a86
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 24 13:12:49 2007 +0100

    randr12: Disable crt_load_detect for ramdac 1 and set some better valued for test_control.

commit 525997f86c5fe0f79cf0fa584b4cb617b83a9386
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 23 23:12:53 2007 +0100

    randr12: add bit30 to vpll register for nv4x cards
    
    - This seems the most common situation, any idea what the bits do?

commit f249b3b33c025417d11a85a29848db2112450dce
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Fri Nov 23 22:25:47 2007 +0100

    nv30: missing command

commit b56ca2ef87fe15132dcbc43361344d8af446c8a7
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Fri Nov 23 22:25:06 2007 +0100

    nv30: another reference to an object

commit a8af1725ef7ae6c1cd19659d0607e2a702dc148a
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Fri Nov 23 22:24:19 2007 +0100

    nv30: rename viewport clip

commit 14e631691a2e8704ee016828e94c48de7eb96409
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Fri Nov 23 22:03:21 2007 +0100

    nv30: was not using gart handle

commit 9648fd259f9906f5db854e8c4b57fd2675f4d5c5
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 23 21:08:46 2007 +0100

    randr12: Reenable a properly working crt load detect.

commit 3010847c1ccf14f0b5356aeb05f2c8c0c519ce91
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 23 18:58:49 2007 +0100

    randr12: Remove some unneeded stuff.

commit 2b092ca5277405a166ea54de418a8114fb6a8cf6
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 23 17:32:12 2007 +0100

    randr12: fix comment typo

commit 5ca53ef57ece7ae547cd5b11e83eb0d15fe69033
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 23 16:40:02 2007 +0100

    randr12: Allow arbitrary ramdac and crtc combinations.
    
    - Support for the misterious ramdac 2 still has to be reverse engineered.

commit e16fccde3f817e9eab3a09398a4821566967a86d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 23 13:25:38 2007 +0100

    randr12: Move a lot of registers from output to crtc.

commit cd8293954e1d004ef837d339ae87c4689fd45e1f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 23 10:32:08 2007 +0100

    randr12: There was more logic to sel_clk than previously thought.

commit 0b55ba9f9fbd60044bad880f260e0c70e6f577f0
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Nov 22 22:18:47 2007 +0100

    randr12: revert to old vpll regs on nv4x cards, because the others can't be written
    
    - If anyone knows the bit to allow those registers to be written, then please tell.
    - This also fixes db1 vclk ratio issues, hopefully.

commit 18117df17ec2ce355344953d70caf33a0272697f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Nov 22 00:30:29 2007 +0000

    Bios CRTC head chosing fixed
    
    Also, a slightly tighter limit on values for or, as I don't currently think
    bit 4 being set makes any sense

commit 425b7cd9dcddf1735d59e9ef60e81bf91db1c65c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 21 20:02:17 2007 +0000

    randr12: unbreak LVDS console restore by reverting tmds_regs change

commit e3f77b1b4332f5c072be713b5ea6dd234c194bb0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Nov 20 19:02:17 2007 +0000

    Complete init_index_addr_latched opcode

commit 05f40b2dd3f8c14da2464b19b21aa66defec17e3
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 21 01:58:12 2007 +0000

    More DCB entry output, and a default for DCB 1.4
    
    The table seems to be the same for all DCB 1.4 biosen I've seen, and
    POST seems to make no effort to parse it. I wonder if it is in fact used at all

commit d96176c2f07efde4224c35b7c03b8380a73e1831
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Nov 20 20:41:38 2007 +0100

    randr12: better guess for ramdac register 670 (nv44 and up)

commit 817b8f1a1af70402c18c45edccec5c746063d4e8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Nov 20 19:55:15 2007 +0100

    randr12: fix serious bug in vclk calculator for nv4x cards.

commit 040e5479344b0f794e79e4ffc6c547c58835401a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Nov 20 18:49:39 2007 +0100

    randr12: Fix a small mistake that could cause blank screens for NV44 and up.

commit 1cc05c9e08a7e4f0c27bb0e08d47265d31123bf9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Nov 20 12:56:28 2007 +0100

    randr12: I hope i really fixed db1 vclk ratio this time (for nv4x).

commit 016f7e84c4ef62840e300d61e5e3b2ddfadd5e32
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Nov 20 12:44:25 2007 +0100

    NV50: Make a small mistake.

commit 2cbd24ad579d3e68eaef2f8500b22e101fecd936
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Nov 20 12:25:21 2007 +0100

    NV50: Some deobfuscation.

commit ccfc6910f8cd8eb8d4b628cc14ef7db417f576ea
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Nov 20 09:52:47 2007 +0100

    randr12: Also enable DB1 vclk ratio if PLL_SELECT had it enabled.

commit 5b3d86562afd35c14d2c8c07618b08bbc98ad775
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 19 23:55:58 2007 +0100

    randr12: Proper support for db1 vclk ratio, thanks to Thunderbird for some info.

commit 22d8ba5ebf659f6f126a1380190339d08ee824c6
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 19 09:23:37 2007 +0100

    randr12: Add a gamma_set hook.

commit cbd70303a949f387d42497cb4ea52186ed938b9c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 18 22:03:03 2007 +0100

    randr12: A first attempt at some lvds programming, not hooked up.
    
    - This is a start for someone with a laptop to test and refine.

commit 58c3d6a886c5d5557def490ee8c3e75c9f8d2cd7
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun Nov 18 02:50:33 2007 +0100

    Enable IFC uploads.

commit 619ae1f7a028f24293f9a4e4f7777cc51ef8d16d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 18 00:15:34 2007 +0100

    randr12: Final commit, switch to nv40 native vclk regs.
    
    - I've also seperated the save load pll functions, to improve clarity.

commit 601adb4f431b638d4b711ba01aa2d4c3408a7bd3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 17 23:47:12 2007 +0100

    randr12: Intermediate commit (using the native nv40 vpll regs).

commit a29eca9dec176388b1c4666ad801ae75360a1219
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 17 20:08:27 2007 +0100

    randr12: Some comment fixes.

commit 6f3d335f6e3b9866457730660538c5f073862dfe
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 17 22:23:32 2007 +0100

    randr12: Reinstate m-divider limitations.

commit e2b7f57cbe7e1080736e6088d2997cbcf966fc3d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 17 18:36:24 2007 +0100

    randr12: Some minor changes.

commit 2c0c7612bd08938496abb47b34498065e668ec34
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 17 15:57:20 2007 +0100

    randr12: Change vpll handling, note that it still is a work in progress.

commit caec3d1ab69c523b6c0a7e0019d1a9f115cf5da3
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Nov 17 20:59:25 2007 +1100

    EXA 1.4 pixmap hooks (disabled)
    
    Really, you don't want to turn this on yet... :)

commit b8e7c64476948426d5801367bab5cdf15db5ce84
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Nov 17 17:17:34 2007 +1100

    Add a user callback for when a channel hang is detected.

commit 293b32d0f66e965b3a31d54859b91210b3e35b3d
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Nov 17 17:02:23 2007 +1100

    Use handles from grobj, instead of hardcoded vals from nv_dma.h

commit 84bc37723c2cabe7652050b4cbaf9f5218fdb071
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Nov 17 16:43:05 2007 +1100

    Turn vram/fb handles into "real" grobjs.

commit f3cdd5086f410711103c6b3453629d85ef4c2788
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sat Nov 17 01:22:31 2007 +0100

    Put back memory barrier and write posting.

commit 762f732c7aaa8aa3dd7d54a8734cbcc54cd10494
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Nov 16 23:38:49 2007 +0100

    Add verbose debugging code to help with fixing push buffer issues.

commit c8f7a9fcdcc356b4dc5030112b1532d2fa3eaf0f
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Nov 16 23:37:10 2007 +0100

    Oops. Correct either the header or the packet but not both.

commit 5ce573875387490eb7feaa87a3354b888beb4410
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Nov 16 23:32:07 2007 +0100

    Unmatched OUT_RING(0).

commit cc0c1af932a96cec6aabc72cbe9ca508fbc80a36
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Nov 16 21:59:53 2007 +0100

    fix typo.

commit 4b7601c297fefc46adf3bc37a463575d3caafedb
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Nov 16 21:56:14 2007 +0100

    fix 32/64 bit ism.

commit bee8bc5ce321245362847253b7ccc7530899e514
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 16 21:29:20 2007 +0100

    randr12: Minor change.

commit 735fae4bb0b92f097665f675ba5127a9bb11d8fa
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 16 19:19:23 2007 +0100

    randr12: That wasn't supposed to end up there ;-)

commit 2848c3e7a4d25e5ca311ea1a88458eb2a77976ed
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 16 19:16:08 2007 +0100

    randr12: Disable changing ramdac reg580, until i know why this causes issues.

commit 75222fa199f1f5bc1abd66a4e80a446b5d597523
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Nov 17 15:31:49 2007 +1100

    nouveau: fix valgrind complaint

commit 1a98f1ae8298ca3b069b146a2866f96e934afb74
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 16 17:00:59 2007 +0100

    randr12: Restore old timings + misc changes.

commit 1b0cd6602cf9d96f41242054efe2f96cc70eaa96
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Nov 17 09:08:03 2007 +1100

    oops, forgot these...

commit 9c46ec6833ccfc29e4a67b0ce4226d8b38b772ab
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Nov 17 07:23:41 2007 +1100

    Initial hacky relocation stuff.
    
    Entire DDX ported across to OUT_RELOCx/OUT_PIXMAPx, workable in it's current
    state for the current BO backend.. definitely not for TTM yet :)

commit ddda33decb42ba2f5f9586e1d5de4533d1d88674
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Nov 17 06:11:01 2007 +1100

    Initial buffer object work.
    
    Implemented on top of the current MM interface, and currently used in the
    exact same way NVAllocate/FreeMemory was used.  Can transition to something
    more ttm-friendly gradually.
    
    The "old mm" bo backend is extremely primitive.  Buffers can only be created
    in mappable memory, forcibly pinned, and never moved once they're created.
    Some of these things could be improved, but probably not much point.

commit 9b9d995a517b48cd074030c567f9c78bee19b129
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Nov 17 03:36:04 2007 +1100

    Report engine hangs again, instead of spinning forever.

commit 2af4a28ae1df46686e264bcda417a896b7cfa59a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Nov 16 09:18:33 2007 +1100

    Hook up DMA funcs to channels/grobjs etc etc

commit 6e3d05e8c60fd7bab371af86151e45eec0a65b3d
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Nov 16 07:08:23 2007 +1100

    notifiers..
    
    Lacking timeouts at the moment so if X would've crashed before, it'll spin
    forever now.

commit 020740d92b5d623bee65e598ac60020187011b04
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Nov 16 06:07:56 2007 +1100

    And grobjs.

commit 929e2b7d53435d097b07c23ed1d0caaa47924f8a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Nov 16 05:10:58 2007 +1100

    And channels..

commit 22909d96b8ea720169b34326b93c7b29eb3db013
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Nov 16 04:36:08 2007 +1100

    Implement nouveau_device struct.

commit b96e813773b0705bbac57f2d64adff3aad845622
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Nov 16 03:26:56 2007 +0000

    Begone, foul g5-bios-hack
    
    also, fix the DCB termination test; I'm amazed nothing broke

commit 7eee9585fa8e8c45f4ab4712a3b990664203d72b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Nov 15 19:33:13 2007 +0100

    randr12: Only NV4x have two seperate PVIO ranges.

commit 276892b069fd045b20f44d7888a7971371d73ad3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Nov 15 19:27:12 2007 +0100

    randr12: Improved values for FP_CONTROL register.

commit 4a16f14061c88ed49b05ef8779a2584f5053c3f1
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Nov 15 18:44:52 2007 +0100

    randr12: Some minor register changes.

commit b436a6809c62e0fe0696d2c6bad066c3afcf9166
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Thu Nov 15 15:01:47 2007 +0100

    NV10 EXA: removed left out debug statement

commit 98e223ebb01440810e01e902e904524c50b463cb
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Thu Nov 15 12:57:20 2007 +0100

    NV1x EXA : refactored A8 + A8 code, enabled on NV2x, fix A8 txfmt for NV2x
    
    more compact and more readable A8 + A8 code along with some codestyle fixes
    now enabling this acceleration on NV2x cards, with the A8 format value hack

commit 3cdc4b274f371f1f524d140fddd79dad2987b06c
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Nov 16 03:28:45 2007 +1100

    nouveau: fix a host of warnings

commit 6eba6c7fab534efd15c8e96daeeb9a33972c2b6d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Nov 15 02:09:45 2007 +0000

    Big endian bios fix

commit 69a3a849e65a022609db3a5f33277b744463a6ae
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Wed Nov 14 23:03:06 2007 +0100

    nv30exa: set link with image blit

commit 2435836202efe7ea42a7bece71f125fb46aac3ba
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 14 19:02:28 2007 +0000

    nv_bios indentation

commit 7b0ca260f57e92e45d7f48f16642bfcd67b10eaf
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 14 18:47:40 2007 +0000

    More code and logging beautification - wrap I/O better
    
    Plus some actual fixes

commit d00420a1286e368fbc20551cae5260bf65ed1b15
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 14 19:07:06 2007 +0000

    IO flag conditions, beginnings of init_idx_addr_latched
    
    plus usual whitespace and pointless renaming

commit 4e8af31a89b7d732b52706f87e1dc66e29ab717e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 14 03:01:27 2007 +0000

    More opcodes, and some monstrous reindenting
    
    all part of an evil plan to have the most lines in the Xorg log

commit 89617cfcdfd1ee19b99888cfbcfec1ee0550d26c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 14 00:36:02 2007 +0000

    Updating some BIOS parser opcodes
    
    plus various debug / whitespace fixes

commit cc5db05bed630350613c7cbfa418d814ed5a5093
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 14 19:27:06 2007 +0000

    randr12: More DCB abstraction to lessen parsing nastiness for old versions

commit d46b61f88225d3e2b28a6c4a4ac4b8a1fe942a39
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Nov 13 18:24:46 2007 +0000

    Gratuitous code renaming, moving + warning fixes for bios

commit c87e3570a198b5d69046387d111a2709a571d5e3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Nov 14 22:30:11 2007 +0100

    randr12: Reinstate the "magic factor" until a better solution comes along.

commit 5b62e77ded9e64d439b70ce0b7dce27a7ae1df4f
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Wed Nov 14 20:54:24 2007 +0100

    NV1x EXA : implemented A8 + A8 via a dirty hack
    
    it works, but probably needs to be optimized

commit 3db89822ba94a94eeb1ab891488d7f203a0dfff8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Nov 14 19:48:53 2007 +0100

    randr12: Disable ramdac register 0x900, until i know for certain what it does.

commit 842b33e2dc82e70a7da992642de4503d4cb0a1fc
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Nov 14 16:02:56 2007 +0100

    randr12: fix comment typo

commit c7fc4b9981bb242830ddb830863fb26301429c74
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Nov 14 08:34:44 2007 +0100

    randr12: Enable all pll on pre-nv40 and improve usage of ramdac_670 register.

commit 992d079d64369a4a8445012b438ec980968c11d8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Nov 13 21:46:23 2007 +0100

    NV50: fix stupid type from commit d5dfb82f7f39304eb39dd4b1c34a2a2801d90a25

commit 7ad7b6ad453b6401ef0bf5128f7ac9790df95bb2
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Nov 13 21:36:13 2007 +0100

    Don't use GART on PPC. Workaround DMA bugs there.

commit b451a21f77678b1fb1d31f3df7e3b1aea6984876
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Nov 13 20:58:51 2007 +0100

    Remove ENABLE_NV30EXA, which is not needed any more.

commit 9dc1e1e1fc049c7a535da8e1bc8ce79fd2d620b5
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Nov 13 20:54:53 2007 +0100

    Enable nv30 exa on PPC.

commit 4fb7b608cbdf53084da63526c066eb7f772c6c14
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Nov 13 20:53:58 2007 +0100

    Fix nv30 exa for big endian

commit 875960dacda54268fc1d318995c145b2db09ca5b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Nov 13 19:43:41 2007 +0100

    randr12: Set a few new registers + misc fixes.

commit cf9aaa2b074eca67cf0119172c3d15328418416d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Mon Nov 12 19:24:34 2007 +0000

    Some type / warning fixes for nv_bios.c

commit f00f6d1df06d2671255fd988f514a6f6ab0f8b18
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Sun Nov 11 17:50:55 2007 +0000

    Misc bios parsing bits

commit fdc7f4a353c4dda07fffd9800b477ae5bc43baac
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Mon Nov 12 23:54:22 2007 +0100

    Remove disable switches, big cleanup, requires xorgs server 1.3 again

commit e93a5d3abe6d637e00bd9c998e9735c9766eecfb
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 12 21:05:00 2007 +0100

    randr12: Improve vclk setting.
    
    - It now considers crosswired TMDS situations.

commit d32420c82b1e63bbc84768c92c336391af624952
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 12 20:17:04 2007 +0100

    randr12: Fix bad comment.

commit 8a04babb88111ec8ccec9af56c3591d41afba9b3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 12 20:14:10 2007 +0100

    randr12: Some minor changes.

commit 821d4b83ed780d9a0a8d950a2595a0e15ef3f103
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 12 16:21:14 2007 +0100

    randr12: Set SEL_CLK appropriately based on wether a TMDS is crosswired.

commit d017ce4879ca755fc6d56f232fe3162864f4b38e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 12 10:34:54 2007 +0100

    A little code cleanup.

commit 16fb5b92dba9a0380d2fdd1ece1b9b0691d79d3a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 12 00:17:52 2007 +0100

    NV50: Port an LVDS detection fix from nv.

commit b01a87f18d122d80fac6daf1dfb1c404d7f3a814
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 12 00:03:19 2007 +0100

    NV50: Port one of the nv patches.

commit f22691661f8b72cedb8aa4fc96b41fcff4171e12
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 11 21:53:10 2007 +0100

    randr12: Some code cleanup.

commit aceceb22775bb039cb0e207f39f7cbd93c2db194
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 11 21:32:31 2007 +0100

    NV50: Clean up nv50_output.c a bit.
    
    - I did not make wrappers for the i2c stuff, since i do not know what that range does, besides i2c.

commit a0835f7c64cf5f62626332ccba21cfe436584275
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 11 21:17:40 2007 +0100

    NV50: cleanup of nv50_sor.c

commit f463a7f6213bede18917191546c8cd61cf4612e8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 11 20:51:01 2007 +0100

    randr12: Make sure we don't set 2 "special" bits in sel_clk.

commit 27cbf73bc572f435870decc2017cbf1c4f38264d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Nov 11 19:32:26 2007 +0100

    randr12: Overhaul vpll set code + misc fixes.
    
    - Hopefully the problematic G70's work again.

commit 78e88d1f4e2f058c487978c01e19a828271f3f0b
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Nov 9 03:17:12 2007 +0000

    vbios fptable v2 parsing (for BIT biosen). Not that I know how to index it.
    
    Plus some fptable v1 fixes, bmp structure length checks,
    and support for a weird bios version that may be in some gf2go

commit 15c771a6b3ecb9b36f9725c518141cf889aa953c
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Nov 9 01:19:04 2007 +0000

    G5 6600 DCB improvements, but I'm sure to be some bswaps short
    
    This will all become so much nicer when I can do leNN_to_cpu()...

commit 9408fcbbbbab80608c8923ab2b7757dfa76b9767
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 10 17:02:38 2007 +0100

    NV50: Last part of nv50_dac.c

commit 85b5e6bfc17c347a9976155a755637f7c8d9304f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 10 16:59:49 2007 +0100

    NV50: More cleanup (this time nv50_dac.c).

commit 23d9f09a4600abf5426cb6d069dc5d9aa876a771
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 10 16:32:51 2007 +0100

    NV50: That's the initial cleanup for nv50_display.c

commit 25cef08b183d6406ce065b2b3cd224dd1840525b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 10 16:24:32 2007 +0100

    NV50: Should have run make first ;-)

commit d5dfb82f7f39304eb39dd4b1c34a2a2801d90a25
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 10 16:23:48 2007 +0100

    NV50: Even more cleanup.

commit 391c498e676752ac6bf03b668a1cb00094c1a049
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 10 16:19:32 2007 +0100

    NV50: More cleanup, small commits to make bisecting easier.

commit 59788f9d4e6c264a6b666918989ad6b778026bd9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 10 16:05:42 2007 +0100

    NV50: Some initial cleanup.

commit 1a7d7ccb4c12f6a10aa5e8b41daee1aae52efa8a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 10 15:39:04 2007 +0100

    NV50: Another wrapper.

commit 3ca3170c8bbd758da81a1bc5b5a84cf3ca642c07
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 10 15:29:13 2007 +0100

    NV50: A new wrapper + a few functions renamed.
    
    - I'm trying to clean up the code a bit, but lack of the hardware prevents me from testing it.

commit 77dc99b2621523e20a956a8eaa01a100c992c458
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 10 00:35:04 2007 +0100

    randr12: This may break stuff for some g70 cards, if it does, then please scream.
    
    - I hope i've got most situations covered.
    - If there are issues getting the second head to work on nv4x cards, then please tell.
    - nv4x is geforce 6 and 7 series for those who do not know.

commit c169480b0bb177e8c5efb292d38c55554dcdfcdd
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 9 20:41:48 2007 +0100

    randr12: Disable load detect again, until we can identify it from a DVI monitor.

commit 7237a7014b426acc4857d32967e0f10974877819
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 9 20:40:46 2007 +0100

    randr12: Improve detection of DVI-D/DVI-A pairs (for naming).

commit a8125c458fa53544625da2071a69e3fd27d7c084
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Nov 9 19:27:37 2007 +0000

    randr12: Revert "randr12: lose ffs wrapper", it's wrong

commit d83cb471cfcc18973eb4a5f319bc17a06e0a883f
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Nov 9 19:02:00 2007 +0000

    randr12: lose ffs wrapper

commit dedf68e10f4b0cde6f9c49d60df737ed7b4148c0
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Oct 31 02:36:41 2007 +0100

    More nv30 exa cleaning up.

commit d3679e8a5c0ce54ee3ef4de15be5a1fcd353df8e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 9 18:44:37 2007 +0100

    randr12: Do not mess with ramdac register 580 until it's proven to be neccesary.
    
    - I cannot seem to find out what the conditions are to change this register, except that it's related to VCLK ratio DB1.

commit a49d51c638c2004641e58dc0061652553e9a6751
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 9 18:31:02 2007 +0100

    randr12: Fix vertical scaling.

commit 2e6f5e18231a327cac7de4a927435585d1eadcee
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Fri Nov 9 18:13:43 2007 +0100

    oops, trailing whitespace

commit 596f4e6a78900f3cbb3beb4c99da7606dc630179
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Fri Nov 9 18:11:25 2007 +0100

    Also disable nv40exa if nv30exa disabled

commit d9f80b9d5f4ae1c00e79b9e903c2fc0c23b37a13
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Fri Nov 9 18:10:53 2007 +0100

    Reading DFP tables need randr1.2

commit 50aaccb5e0d3b9a978701c55ebe6545a6f7b1456
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Nov 8 18:59:50 2007 +0000

    randr12: invert fpScaler to regain original meaning (see man page)

commit 3f6db3ac15b51a58353396fce2126a369b4cfd89
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Nov 8 20:30:28 2007 +0000

    randr12: Do scaling / native fixup in the fixup function
    
    Nuke the LVDS specific fixup code
    Then use adjusted_mode accordingly

commit 51a874a59d82678bbb790b708f9ba62985d99344
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 7 18:37:57 2007 +0000

    randr12: rename DIGITAL and PANEL to TMDS and LVDS
    
    Following on from earlier renaming, this is less confusing, at least to me.

commit 61c92f10e1182403fc6fc8a666ed3d8b14795481
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Nov 8 17:00:44 2007 +0000

    randr12: blank screen before we're ready to show it

commit da64328dd7be7f0e7ee1dd0dd774174fc126948b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Nov 8 20:11:25 2007 +0100

    randr12: Some outputs are only valid on secondary output.

commit fe3d49ccb24ff20fba79ee97cceba64850d9387f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Nov 8 19:20:41 2007 +0100

    randr12: Improve output naming scheme.

commit 42542b36d771142d38f72b3365da8b53e9d25c55
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Nov 8 19:13:03 2007 +0100

    randr12: Add ramdac assignment code to the lvds dpms function.

commit 2f1bf8138ba970ad18afe1ba9ee10228ea213926
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Nov 8 18:42:35 2007 +0100

    randr12: Misc fixes.

commit 8b733ab61e0b9eb375783e986de776eef5fd49ff
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Nov 9 03:29:21 2007 +1100

    get rid of ALLOCATE_LOCAL etc.

commit bfb78d2090ee5c189cf00e6af5107a756e864e98
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Nov 8 00:20:53 2007 +0100

    randr12: It seems the situation was a bit easier to handle, luckily.
    
    - I've tied ramdac and crtc number together.
    - Switching crtc's doesn't cause a problem anymore (even when crtc0 is not in use).

commit d56e6e498ed9acc35bfa540881243acf03981571
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Nov 7 22:25:40 2007 +0100

    randr12: Intermediate commit.

commit f13659a8c8e855dc0b871173ccfdd0b70236be71
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Wed Nov 7 23:03:54 2007 +0100

    NV10EXA: added support for R5G6B5 as source and destination (tested only with rendercheck)
    	 added A8 + A8 via ARGB + ARGB hack, disabled by default because it cannot work
    	 updated instrumentation to dump pixmap sizes and repeat flag

commit 3d671bf3b06e64b49254db666980be3a3b3652cc
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 7 15:08:48 2007 +0000

    randr12: remove some duplication and reduce mem leaks

commit cdbec606e4ec398d6bef87d635499100559e3a19
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 7 14:54:18 2007 +0000

    randr12: refactor ddc stuff for convenience

commit ed8473b228579024a4fdc9c2a9ecf4cb71135378
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Nov 7 14:33:50 2007 +0000

    randr12: micro-optimization on use of "or"

commit f6d0b446eda687bb55649599e1aedfa231feaaa9
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Nov 6 21:20:10 2007 +0000

    randr12: LVDS warning

commit 62f8fed79f1617ffd0289123045fda0a3c0e92b2
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Nov 6 01:29:33 2007 +0000

    randr12: Use NV_RAMDAC_PLL_SELECT_PLL_SOURCE_ALL for LVDS
    
    Using only VPLL seems to be broken for LVDS. Traces show consistent use of ALL.

commit 0b958dc66a5533a7db61b7b2f456df876e9905ff
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Nov 7 09:33:40 2007 +0100

    randr12: Also save flatpanel regs on analog monitors.

commit c8ac3f0c7cfd6eca85f332e11e280f715e80283e
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Nov 6 21:09:51 2007 +0000

    Various minor fixes
    
    Now that ramdac selection uses sensible numbers, it turns out writing to TMDS regs is a bad move on LVDS.
    Also, change FP_CONTROL handling a bit for LVDS (bit31 needs preserving)

commit d7be5bdc27fee0758df33feb3a331c9c79dd94e0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Nov 6 19:53:08 2007 +0000

    Start using OUTPUT_PANEL where appropriate

commit f1160ac702a251708f2385b78c1657f95c2916ab
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Thu Nov 1 00:24:13 2007 +0000

    Beautify DCB 1.2 weirdness, hopefully fixup G5 and use dcb_table more simply

commit 38829fa5cdac1469a6a71a092a42885ea048a1ba
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Tue Nov 6 19:41:47 2007 +0000

    Implement lvds_output_{get_modes, mode_valid, mode_fixup}

commit 29c578bfe9415aa86910cf6d5cd44787b4fdf44d
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Fri Oct 26 03:01:17 2007 +0100

    Reindentation, renaming, adding debug, and assume LVDS always connected

commit 7aeae6cdc99ab633361f107752ef1bfa3e0492e0
Author: Stuart Bennett <sb476@cam.ac.uk>
Date:   Wed Oct 31 17:29:16 2007 +0000

    LVDS VBIOS FP mode finding

commit cd806f92e29573ea968ab2fddb454eb1513e37dd
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Nov 7 00:16:33 2007 +0100

    randr12: Fix ugly alligment.

commit 88faf35179b9af8060c35a7a95e9a6baaae552be
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Nov 7 00:11:51 2007 +0100

    randr12: Improve hotplugging of outputs.

commit 4aa3acbd5410c8dda57a483cf7967258440888dc
Author: Peter Winters <peter@whoei.org>
Date:   Tue Nov 6 23:40:07 2007 +0100

    NV10 EXA: Implement a8 1x1 repeat

commit 524e555c468fbab32b515ecd2c1e9cccf6c48443
Author: Peter Winters <peter@whoei.org>
Date:   Tue Nov 6 23:29:03 2007 +0100

    NV10 EXA: setup viewport like nv40 exa

commit 2f2298f0ae3777c775b3ab81356adebf4f52ed77
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Nov 6 22:15:20 2007 +0100

    randr12: Readd crt load detect + misc changes + restrictions (see full log)
    
    - Crt load detect has been readded, but only for the primary output (the other gives false positives).
    - Misc changes to ramdac management.
    - Until i know how to trigger a full mode change, i cannot allow adding an output which requires ramdac0 during runtime.

commit a6244c25a5c7efc633c74f506ca121e10a5642c0
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Nov 6 16:11:43 2007 +0100

    randr12: Reasonably complete TMDS programming, see notes.
    
    - Please file a bug and make a mmio-trace when it fails for you.
    - I can now hotplug TMDS, so that makes both types hotpluggable on nv4x.
    - I have no clue what happens on pre-nv40 hardware, so please try.

commit 5f6912f083048f01a33582d45bc6b22f0ac27d4e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Nov 6 10:56:22 2007 +0100

    randr12: Associate VPLL's with ramdac instead of crtc.

commit 8241710c94f6df0bf683bc3c93f7ea1ca14d118c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Nov 6 10:34:56 2007 +0100

    randr12: Put TEST_CONTROL into neutral position.

commit 19533d8ba549965dedd9083330b217270efaa49b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 5 23:32:16 2007 +0100

    NV50: Don't hit pre-NV50 codepath.

commit 5ca10da0c7dd2fd689cc4369e37ed385a0c10d21
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 5 21:28:22 2007 +0100

    randr12: Remove incorrect (and hopefully redundant) output initialisation check.

commit fcacad59d9233a66111d1c434e14cc4b2a08961e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 5 21:18:13 2007 +0100

    randr12: Do not remove any bits from crtc register 580.

commit e58c6735c73cc3a94a7a139e235b1dff9220e507
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 5 20:30:41 2007 +0100

    randr12: Only use VPLL as timing source.

commit 1071aeef24b349bac08a2ac091733c23cad1cb44
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 5 20:04:26 2007 +0100

    randr12: Only enable crtc at the very last stage, should avoid mode setting "blinking".

commit 1ac7798bdec75d9336afd1cfbe7fa177f5fe1465
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Nov 5 10:03:15 2007 +0100

    randr12: Add a native mode for TMDS and make that preferred + some ddc related fixes.

commit bfb75679e504b335be0de4384830cc8129f92c1b
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Nov 5 11:44:58 2007 +1100

    Fix a thinko from commit 62294d9be8ec6f1159e3c2ad273649f937b7aa7e.

commit bf8a2dfa7f83956d100316ed7450669795ea47d2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 3 22:03:18 2007 +0100

    randr12; Forgot a small thing.

commit 19b0971d0c1d03896bfaee2b833194ef1e4d7566
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 3 21:54:48 2007 +0100

    randr12: A legitimate DPMS call could reset the ramdac and effectively disable the mouse.

commit a29839c718fd6bf3003081299017536dd9f8223e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Nov 3 10:00:06 2007 +0100

    randr12: Hopefully improve the native flatpanel mode finder.

commit bd20ff5b8c9467ca913c00d3ec946e7e975ad3d4
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 2 23:17:16 2007 +0100

    randr12: We cannot reset ramdacs during detect, there may not be a modesetting after it.

commit 7054de29c589a7be0a6b027f3067ae2c02e2fc45
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Nov 2 21:44:40 2007 +0100

    randr12: Futher refine crtc timings, hoping to solve the "pink line" issue.

commit 39ced4abb536993249e55a72eceeba26d577724c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Nov 1 17:54:26 2007 +0100

    randr12: Improved ramdac choosing, based on bios information (or value).

commit 28ba9ed765d9956b2f07c6a405fca675a71012db
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Nov 1 17:01:53 2007 +0100

    randr12: Remove redundant output setup + don't print full edid.

commit 609f7b9c2962ccf04861d2164a0ff12c58e84010
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Nov 1 13:00:45 2007 +0100

    randr12: Cursor fixes(probably only affects nv4x).

commit 6945dfdc5e6b2540432805e845cb8540dc00d326
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Nov 1 11:10:24 2007 +0100

    randr12: Improve analog monitor allignment + misc fixes.

commit 5bd8ba52788b3b3b8f91ba59c29e154e38482481
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Nov 1 18:35:33 2007 +1100

    nv40: what can I say? oops!

commit f59e596bcd90ef824cd41e0c37952e574d6914bb
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Nov 1 18:17:20 2007 +1100

    nv40: completely untested fix for composite on ppc
    
    Thanks go to ps3rsx guys for finding the issue.

commit 59c4fdb650ff2e6b6948d1bdd6bb22aa94195a32
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 31 22:59:54 2007 +0100

    randr12: Some misc cleanup to make malc0's patches work.

commit f165d4f2ca90916b1334cdc18d62b82ea71d9f62
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 31 21:30:36 2007 +0100

    randr12: The "easy" TMDS registers, please report regressions.

commit 860c4bdd38fd259ae51e32e4873a2aa8b1e6883e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 31 19:00:28 2007 +0100

    randr12: Misc register fixes.

commit d758e8f4c1a7d4effe1298a0a41d4e0b96496ab9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 31 13:22:29 2007 +0100

    randr12: Some changes to VCLK ratio handling.

commit 899559921b0e46db010fa1e771203c2edefb7ade
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 31 09:18:59 2007 +0100

    randr12: some blob copying

commit b5ecadb73335d934a8cb1c106983d219c9d8d399
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Oct 31 02:09:08 2007 +0100

    Fix bugs in nv30 exa (kde text seems back)

commit f7b553a87e7f67138e06e74877145a1f83e9d188
Author: Peter Winters <peter@whoei.org>
Date:   Tue Oct 30 23:04:28 2007 +0100

    NV10 EXA: implement repeat for 1x1 textures

commit bf7b0231db1f7e45cee60d7d2e04b1b006aec2b0
Author: Peter Winters <peter@whoei.org>
Date:   Sun Oct 28 23:52:22 2007 +0100

    NV10 EXA: Fix viewport setup

commit f8f9c8789b89a02886702c46c5feafec169ae78a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Oct 30 21:00:54 2007 +0100

    randr12: Flatpanel scaling is finally working, read full message.
    
    - The option FPScale is now obeyed and will cause scaling to happen in the monitor.
    - The default is scaling is using the GPU.
    - When the aspect ratio is very different(>0.10 diff), it will obey aspect ratio and create bands around it.

commit e73aa148d965abbf73392c6ffef3993dc26c31fd
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Oct 30 13:54:25 2007 +0100

    randr12: Some copyright stuff.

commit c1508e1448e3822e8b6bb2604c09a9d766a64a93
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Oct 30 13:44:44 2007 +0100

    randr12: Disable some panel scaling stuff, because it is broken.

commit 3bf8110b61ef854af803a45f0faf1eaffbbcfac9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Oct 30 11:44:58 2007 +0100

    randr12: Lots of misc fixes.
    
    - This does not fix the issue with -hsync, +vsync modelines (or the other way around) yet.
    - There are two PVIO ranges, i'm surprised noone noticed this.
    - Some misc fixes.

commit 894f9aacce3d685b811f8961275a9f225b964159
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Oct 30 01:49:38 2007 +0100

    Disable nv30 exa no big endian until we fix the endianness bugs related to the 3D engine.

commit 482cbcb9efdfbdd4bbe998c09f7d29033aeca09b
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Oct 30 01:37:45 2007 +0100

    Use the new header with license.

commit a9908dbb70df0d0abb586b9774efdc10adf4d74f
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Oct 29 23:00:14 2007 +0100

    More copyrights I remember...

commit 67e142394edcb553a40c6c8b0ef091bd4dad2bdd
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Oct 29 22:57:30 2007 +0100

    Add some copyrights... not all files are covered yet, but I did the ones I recalled.

commit f75e36a901fd47bbd9164242c408e9f8b0e03e2c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Oct 29 18:37:34 2007 +0100

    randr12: My suspicion was incorrect, i2c buses are swapped for all nv4x
    it seems.

commit e741ac76ac45e8ea959792810670abdf2afbc6bd
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Oct 29 13:40:30 2007 +0100

    randr12: Show NV_RAMDAC_FP_DEBUG_0 of both ramdac's when output is refused.

commit c53754162087a7b66d40b7c3982cdc5b6d160ea1
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Oct 29 13:34:20 2007 +0100

    randr12: Minor change, turning on bit 18 of NV_RAMDAC_SEL_CLK.

commit fef872bd999b430a41bdfae8d408f8dfed0010a2
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Oct 26 15:50:40 2007 +0200

    nv30 exa : add A8 dst (requires new drm), add some dst formats, handle 1x1 repeat, enable by default.

commit 1d7354cbb5875eb13ed88e6aaab69aff615f82b2
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Oct 26 04:37:51 2007 +0200

    Fix nv30 exa.

commit 2cd3d47713cf3eb0d36124902a2c66b689acba51
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Thu Oct 25 16:55:18 2007 +0200

    s/#define ABC ;/#define ABC do { ; } while(0);/

commit 228b91d3da445fc58bfe6b13e792bbdff3728301
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Thu Oct 25 16:40:34 2007 +0200

    NV10 EXA: implemented masking via register combiners and added (disabled by default) statistics displaying
    
    masking works for ARGB, XRGB (it's a nop), A8 - no component alpha for now, but it will come soon hopefully

commit 7d77ab0692126cea9248b7ee61b001e138b4e47c
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Thu Oct 25 10:52:59 2007 +0200

    NV10 EXA: fixed A8 as pointed out by p0g

commit cdb54271837564bb4a5afd2dc4cf7e7169138975
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Thu Oct 25 10:38:42 2007 +0200

    NV10 EXA: added support for A8 as source

commit 220acbe07e84015e489257a9b9dae8e8f1be8268
Author: Peter Winters <peter@whoei.org>
Date:   Thu Oct 25 10:03:39 2007 +0200

    NV10 EXA: use proper XRGB format and use correct RC setup

commit 6034387ea96816d34b627c306998342136ecb01b
Author: Peter Winters <peter@whoei.org>
Date:   Thu Oct 25 09:59:01 2007 +0200

    NV10 EXA: always use an even width for NPOT_SIZE

commit f7f17b789e89aadafa2734cba0f4464c5f317a68
Author: Jeremy Kolb <jkolb@brandeis.edu>
Date:   Wed Oct 24 19:34:49 2007 -0400

    nv30: Fix some corruption.  Give us some semblance of icons (still messed up though)

commit bafa34a7bd7a9136a95c8ced25c5b80556c78c0c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 24 20:28:46 2007 +0200

    Fix a few NV_IMAGE_BLIT offsets.

commit 09f4b66d35543037c4f50910d0265751dded66c0
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Wed Oct 24 10:40:17 2007 +0200

    NV10EXA : enabled by default for NV1x. Waiting for pq before doing the same for NV2x.

commit 6c978164a212ddf4f60f82cdc72b11ebbc96efbb
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Wed Oct 24 09:37:34 2007 +0200

    Xv: disabled YV12 overlay for NV20 chipsets that do not seem to have it

commit 9f48bd410f8cf9aa700e03db807cef2e7cc07e34
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 24 09:08:41 2007 +0200

    randr12: The last step to make lower flatpanel resolutions working.
    
    - Note: the previous randr12 commit also contained some fixes in this area.

commit 2bf8bbd1764979d194ff2dbac4a6529cbcbdbc1d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 24 00:00:59 2007 +0200

    randr12: Misc changes.

commit 5841664c82126058e582f215af2323cc80a6150d
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Tue Oct 23 22:53:46 2007 +0200

    x8r8g8b8 now seems to work (it passes rendercheck) with format 0x380

commit 27a713057f0fd2d3c8a77f5eff86393059b60511
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Tue Oct 23 22:53:21 2007 +0200

    Remove NV10 texture formats that are all wrong.

commit 78a0d5a42f96816889f1c9294f11c637dfcba486
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Tue Oct 23 19:12:19 2007 +0200

    NV10 EXA: A8R8G8B8 without mask works with rendercheck now

commit 7543e65cecab510f6bea8b6efc5cdf3cc9d261ae
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Oct 23 18:41:38 2007 +0200

    randr12: actually add scaling factor's
    
    - This was forgotten when i first added this from the haiku driver.

commit a11faa794c5dd24cd74d949006c8e86c6c3f0310
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Oct 23 16:22:56 2007 +0200

    randr12: Add a few debug statements that should explain why an output is refused.

commit 2d842c39bf210b4b8294a447ec9ac194ec3e2e47
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Oct 23 16:19:10 2007 +0200

    randr12: Check if output is needed before creating it.
    
    - This hopefully fixes a problem some NV30 people have.

commit 5c884a188296c9a026f110f272dff5d88d58c0b6
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Oct 23 15:47:49 2007 +0200

    Revert a G70 workaround, this may BREAK your setup.
    
    - Please report if you have issues, but be prepared to help out to find a real fix.

commit 0fb93b45378c9d0fbee9bb96bd60d7a995c667b9
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Mon Oct 22 19:02:17 2007 +0200

    added (disabled) NV10 EXA hooks

commit 78af60e798f5b91cc128cd2f84ddae7d0a1523cd
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Mon Oct 22 19:00:20 2007 +0200

    added NV10 EXA functions to proto header

commit cf053adacabaee887ecedaa9967b07b3185095b5
Author: Peter Winters <peter@whoei.org>
Date:   Mon Oct 22 17:04:23 2007 +0200

    Fix some blending stuff for NV10 EXA

commit b0605fbeef0765e39554a15ea9f871c19258f72c
Author: Peter Winters <peter@whoei.org>
Date:   Mon Oct 22 17:01:26 2007 +0200

    Add basic RC setup for NV10 EXA

commit 8dea36f6533c5fc35dcb3c24e2fe0c1d009b6693
Author: Peter Winters <peter@whoei.org>
Date:   Mon Oct 22 16:50:47 2007 +0200

    Fix NV10 EXA transform

commit b9f97583979d7dbbf0058de9f807a97812362c71
Author: Peter Winters <peter@whoei.org>
Date:   Mon Oct 22 16:48:53 2007 +0200

    Fix NV10 EXA list of supported formats

commit 3dc9778902d9412c469d79e3d437838a6c9da7a5
Author: Peter Winters <peter@whoei.org>
Date:   Mon Oct 22 16:44:08 2007 +0200

    Various NV10 EXA fixes

commit 391e2dd1216f598538524fdc52a14bfdd4451567
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Oct 22 22:48:13 2007 +1100

    Fix bad s/

commit 162edc70769b24b39f432cb79f5959eff363c564
Author: Pekka Paalanen <pq@iki.fi>
Date:   Sun Oct 21 19:55:41 2007 +0300

    Revert "EXA: now caching BLIT_OPERATION and RECT_OPERATION..."
    
    This reverts commit 6d8caf5e0dd915809152c52c2c56a39d76e2ed8c.
    
    Conflicts:
    
    	src/nv_exa.c
    
    The above mentioned commit broke EXA copy and solid operations on nv20
    after display mode change. Triggered by running freedroid in fullscreen.
    (Not freedroidRPG)

commit cc04b651348768dc214f59211ba396343aaa6a17
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Oct 20 20:30:02 2007 +0200

    Add back comment.

commit 6fd262027c74d5008e484bb5f09edbf5f657470b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Oct 20 00:26:02 2007 +0200

    randr12: Fix critical bug and minor change.
    
    - The previous code could allow the TMDS[0x4] register of both heads to be set to 0x88.
    - This caused problems and freaked out my monitor and scared me as well :-(
    - Until further notice, the usage of this swap bit is restricted to very specific situations.

commit 377f69172b4935372538d7bbf26852bf8a1fe1c4
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Oct 19 20:57:58 2007 +0200

    randr12: Some changes to crtc regs.

commit 85dac1041b38127d41832a6a322d01f87d70f28f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Oct 19 08:06:33 2007 +0200

    randr12: Some changes to output detection.
    
    - I'm aware that we still can't fully program modes.

commit 8320f4f61ca72ee0101c1d552ea3ef28e573d21d
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Oct 18 01:56:17 2007 +0200

    Remove xaa includes.

commit 86855f03945d3bad90da0b28311bece484cbfce7
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Oct 18 01:55:06 2007 +0200

    Handle -minline-all-stringops properly

commit 53ee9726eeda8cf844d32a9563c82b7549ba6c03
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Oct 17 23:28:50 2007 +1100

    re-align nv40exa after ring macro changes

commit a5c4786aaeadce6103fcc9b3a6f4e6f25a66730f
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Oct 17 23:22:05 2007 +1100

    Switch to *_RING instead of NVDma*

commit 0d1835d67e38ca12347a7965ac43fbfc29063b87
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Oct 17 16:29:01 2007 +1100

    Switch to header generated from XML + other cleanups.
    
    - Renamed object header to nouveau_class.h, so it's not confused with mmio
    - Removed usage of method defines in nv_dma.h
    - Removed 2D engine EXA composite hook, it was broken, useless and soon to
      be obsoleted by card-specific versions.
    - Use names in a few places that magic values were previously used.

commit b36fbf174849b04928efda2909c461b6c1688cdc
Author: Dave Airlie <airlied@optimus.(none)>
Date:   Tue Oct 16 09:28:58 2007 +1000

    nouveau: missing include

commit 8425d93f7f932281a1b9b420e676acba2a2b5ecd
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Oct 14 17:10:59 2007 +0200

    more changes to nv30 exa... displays the pictures at their correct postition and size but doesn't obey the blending parameters (i.e. no blending takes place).

commit 212a4cd8884ff9276f64bdd0a0115782d146e36a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Oct 13 23:02:27 2007 +0200

    randr12: Some fallback defaults for dual-dvi cards, please submit dumps when you can.

commit 6d8caf5e0dd915809152c52c2c56a39d76e2ed8c
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sat Oct 13 22:28:39 2007 +0200

    EXA: now caching BLIT_OPERATION and RECT_OPERATION (0x2FC) to limit the number of IRQs on NV04

commit ceaf8df424651e0f20d63f817864f3e8657f2c21
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Oct 13 21:45:50 2007 +0200

    randr12: Revert a small unnecesary change.

commit 7171acbe7f174dcbe8c28c7f1fcb7481f2fafd90
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Oct 13 21:33:07 2007 +0200

    randr12: Hopefully fix panel size detection and allow negative hsync/vsync polarities.

commit be08f09ad1ba6aeebf4491727052d246d5568fd2
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Oct 13 17:26:32 2007 +0200

    randr12: Some debug stuff.

commit 418e6117a25e51d5b0dbcd87c17f78f9b04fa588
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Oct 13 12:52:10 2007 +0200

    randr12: Remove a double reg and misc changes.

commit e30e21ed0ee8b1bd112780badc933dc4552a2e81
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Oct 12 19:49:32 2007 +0200

    randr12: Some misc changes.

commit 9425f7a3ea2d80f4df79239e1ca8000bd729c772
Author: Jeremy Kolb <jkolb@brandeis.edu>
Date:   Thu Oct 11 20:32:47 2007 -0400

    Remove division in NV30EXATransformCoord.  We want coords between 0 and texture width, height.

commit 879e653867552f6bb595160670c8325bcb5a0d3b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 10 21:40:13 2007 +0200

    randr12: Misc fix.

commit 99dd9da140a5750b7c4d6030a0e8e1f7fca44033
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 10 20:08:28 2007 +0200

    randr12: Fix switch mode function, so fullscreen apps don't screw up your screen by definition ;-)

commit 0c80565e2cb7fa5ff359f57cc3d7016a78a43ac2
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Oct 10 14:43:34 2007 +0200

    Oops.

commit 761ef4bd32f42fb77a3e48985fd6dda81aa081f5
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Oct 10 14:42:46 2007 +0200

    Try to do something for our desastrous UTS/DFS performance. My PCI card is really hurting.

commit 254f9b075034c86e5936954b52f499d573880039
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Oct 10 02:34:06 2007 +0200

    Still more work on nv30 exa... now starts but nothing works.

commit 79dc3ad2c89eef74596a4c8e5714c2c661f56fee
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Oct 10 00:48:46 2007 +0200

    Don't swap the registers from user space. This is very wrong, and the drm will handle that soon.

commit 2c08930f0b2bf06282976d6a357daf7f45405cdc
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Oct 10 00:48:06 2007 +0200

    Revert back to the other shaders. The terminator instruction doesn't seem to help, and breaks the A8 hack.

commit 90d2457125b059916f9b9dd5ddb7cec73a554c55
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Oct 9 04:38:29 2007 +0200

    Cleanup some nv30 exa issues, add debbuging info to the composite hook.

commit e184fc802c7f9103bbc8ee8c036cfe5a9ddd9513
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Oct 9 03:28:39 2007 +0200

    Some fixes to nv30_exa. Now goes through a couple of composite() calls without crashing.

commit 708f28dc8175375713cd9ae4d07b2cfcea3b106c
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Oct 9 03:28:11 2007 +0200

    Use terminators on the nv30/40 shaders.

commit 43d5f747103721b3e0ccf4fe73494729ed34986c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Oct 8 19:53:56 2007 +0200

    randr12: Small changes makes finding regressions easy ;-)

commit 62294d9be8ec6f1159e3c2ad273649f937b7aa7e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Oct 6 19:04:51 2007 +0200

    EXA: Starting from version 2.4 we can't use devPrivate.ptr anymore.

commit 721de8da8fccd6f7b6e5a3044ce82616cdb689e8
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Oct 5 23:50:18 2007 +0200

    some more work on nv30 exa...

commit 80bcbf493b6b2ad927c7a3826cc6e5fa46bca76e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Oct 5 22:29:07 2007 +0200

    randr12: Misc changes.

commit 63ad301baab5803329ba0f192f12c917b435594e
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Oct 5 17:20:05 2007 +0200

    mandatory oops commit.

commit 3773e0e5045a6c347bf26eff71e6bdd4c592cebc
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Oct 5 17:18:40 2007 +0200

    Split nv30 exa and nv40 exa.

commit 37900537c0f8b8dfa3dc80300d6809f1f4ac9423
Author: Jeremy Kolb <jkolb@brandeis.edu>
Date:   Thu Oct 4 23:15:38 2007 -0400

    NV30 texture changes. Commented out table that appears to work for nv35 at least.

commit 44eb015e88caba82c8d84fee4ea71768c9a6b2a3
Author: Jeremy Kolb <jkolb@brandeis.edu>
Date:   Thu Oct 4 20:37:35 2007 -0400

    Fix NV30 arch check.

commit 5a76e5a751cd66021565ab92b2fc3c61204c7d73
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Oct 4 23:46:43 2007 +0200

    fix nv30_exa for nv40.

commit d7b767fc951287a1c87965db3c236e05cc94d8f6
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Oct 4 21:49:33 2007 +0200

    NV50: Fix a minor mistake.

commit 926e887a4b374768648fe772b1b3d7730096e45f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 3 22:57:56 2007 +0200

    randr12: Some reindenting.

commit 7ee3f670077641e14a0ff024443805564d5be599
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Thu Oct 4 19:54:40 2007 +0200

    nv10exa: init link between tcl and image blit for >=nv11

commit 6510e75ada6fb921e417588d98afdc58b2c14972
Author: Jeremy Kolb <jkolb@brandeis.edu>
Date:   Wed Oct 3 23:34:23 2007 -0400

    nv30_exa: send down pitch correctly

commit b7fc7b63eec4a5e23879120284c882e19e095471
Author: Jeremy Kolb <jkolb@brandeis.edu>
Date:   Wed Oct 3 20:54:28 2007 -0400

    Fill in some regs.

commit 46facb7c29d2737f1cc414655de8e09ee0aea22f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 3 22:16:13 2007 +0200

    randr12: Actually borrow some timing stuff from Haiku correctly ;-) + new crtc reg

commit 9d6b3216ed519e89386480d04070b1c1e4702921
Author: Matthieu Castet <castet.matthieu@free.fr>
Date:   Wed Oct 3 21:21:41 2007 +0200

    abort on Init table command not found when parsing bios

commit b6351c0efa3629a448557fc7e597ba14fbf057fb
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 3 19:54:40 2007 +0200

    NV50: Fix small mistake.

commit f00ea962e549934965100dc6d2806709129995e8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Oct 3 19:03:38 2007 +0200

    randr12 + NV50: Misc changes.
    
    - Switched everything back to head variable instead of pcio.
    - Removed ugly C() macro for NV50.
    - Probably some other stuff too.
    - Please test NV5x users ;-)

commit 5d7f06c2a205004b78692b4dfad477ade3947fd5
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Oct 2 19:31:10 2007 +0200

    NV50: Some infrastructure and minor changes.

commit 7680648c9ddb81e2a1c6295431d7074366fb7b9a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Oct 2 16:55:07 2007 +0200

    NV50: The beginning of moving some code around.
    
    - Please contact me if something breaks, i don't have an NV5x card.

commit b812ecaef75216cc76557e6a3a080efa870d189f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Oct 2 10:35:37 2007 +0200

    NV30EXA: Minor code cleanup.

commit 5b974b3bed86d53ccf6915c46aeb310a2bba3519
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Oct 1 17:19:41 2007 +0200

    Remove those useless casts.

commit 734785c05357455a7ae7181fd7326f02e0bd0478
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Oct 1 02:01:30 2007 +0200

    Some work on nv10 exa.

commit 0cfcbcc9d64bfd47b765f4f2ff41d7ad467990bd
Author: Matthieu Castet <castet.matthieu@free.fr>
Date:   Sun Sep 30 22:41:15 2007 +0200

    enable bios PINS parsing on post nv10 cards

commit 9ac6d0e9d46abdf867fd06f7ca24b718a340bb74
Author: Pekka Paalanen <pq@iki.fi>
Date:   Sun Sep 30 23:09:33 2007 +0300

    nv20 inits nv10tcl.

commit c3439aebe000a3c6dd716bd4739ce01321bee26b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Sep 30 21:43:41 2007 +0200

    Fix detection of NV04 and NV05 when using pci-rework.

commit 9e070c09f68b0e3e41109360c455b3e2cc1dbb9c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Sep 30 19:37:53 2007 +0200

    randr12: Switch to proper cursor api + minor changes + small nv50 fix
    
    - Remove the ugly cursor hack.
    - A function name on nv50 was still g80, this caused an implicit decleration.

commit c7de03556a51009ce69b073d7ecfd01919d24c5f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Sep 30 12:40:50 2007 +0200

    NV30EXA: Fix rendering issues.
    
    - Full non-composite tests using rendercheck.
    - The full test suite of composite has been run (it takes ~15 hours).
    - A partial cacomposite has been run (a8, a8r8g8b8, x8r8g8b8).
    - All the rendering tests work fine, as does the cairo-knockout demo.
    - Thanks to doener for reporting this issue.

commit 0574dc5a8bd09216e41656c943c92a437bcf020b
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sat Sep 29 20:20:47 2007 +0200

    A little more work on nv10 exa.

commit aae155f149af522e1a83168ed4ec5b7b5a40bb73
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Sep 29 17:28:10 2007 +0200

    randr12: Some more CRTC regs.

commit 8b03086ee36ca9c3e77f9df9eb4a1805072d2103
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Sep 29 14:33:38 2007 +0200

    randr12: make crtc owner beheaviour consistent with blob + minor changes

commit c572315a974746224dba1213e956a1b6189f175d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 28 19:58:39 2007 +0200

    randr12: Minor changes and more debugging output.

commit db36a1df4ba3dddf3669f491bfe6461e4fd490b6
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 28 18:52:47 2007 +0200

    randr12: Some more debugging output and some other minor changes.

commit 2d21405c9c0bff36f47e28a5e4086dacae557d17
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 28 13:02:51 2007 +0200

    randr12: Preperation to allow differentation between crtc and pcio in the future.

commit f235cf896c1da098ff635d5a882561f16f5fb4f7
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Sep 27 18:21:25 2007 +0200

    Import nv10 exa code. Does not work yet.

commit 74a243d8e188432854c15849ad1ab6e893e48f0a
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Sep 26 09:04:43 2007 +0200

    randr12: Some registers were not constants, so changed it back with a note about the values i had seen.

commit a3c71495097f8d745110aad06c9f8e2f6f03baad
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Sep 25 22:05:36 2007 +0200

    randr12: Getting closer, doing a decent attempt at detecting the proper ramdac.
    
    - crtc detection may need to be added
    - When i boot up with both analog and dvi attached, my dvi is misprogrammed, maybe some sharing is happening somewhere?

commit 4a57ebb9c2098ce5d568a2da6e0640cdcc18d3f0
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Sep 25 21:06:03 2007 +0200

    randr12: detection changes, more to come later
    
    - Detection of crtc's (or a way to program them effectively) still has to be done/fixed.
    - It now detects if tmds controls is on another ramdac, for a non-dual dvi setup.
    - Disabled TMDS stuff for the moment, since it's incorrect somehow.
    - Dumps for single dvi, dual dvi, etc are appreciated.

commit 41df1ff6ce348dc6a38e34ce63887c66b0300c09
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Sep 25 16:22:38 2007 +0200

    randr12: Some reindenting.

commit 334a9b065c4973876b894eadf05ce86ca439e08f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Sep 25 16:17:03 2007 +0200

    randr12: simplification of the swapped i2c buses "workaround" for nv4x and some code reindenting

commit c40559dacd6fe20f35710111330dee37fb2b9a58
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Sep 23 01:16:55 2007 +0200

    randr12: A frail attempt at some TMDS programming, i have not figured out yet what switches DVI from one RAMDAC to the other.

commit 50bc4dbff6df80f5d80f731fe42b06768c429dc0
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Sep 23 00:57:18 2007 +0200

    randr12: Reindenting and minor changes.

commit 1a3303a5b6f261470c1c56f84f9b89af950a0b35
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Sep 22 22:21:37 2007 +0200

    randr12: Assign ramdac's in more sane way, otherwise two outputs may end up on the same ramdac.

commit 9b62853dfe1664f3624f6be8aa86f6ca15ca8392
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Sep 22 20:37:32 2007 +0200

    randr12: Add some TMDS register infrastructure, so i can try some stuff in the future.

commit a445cbcd71ee51d7680a6eb13cd037e06d59b0ba
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Sep 22 15:55:01 2007 +0200

    randr12: hardcoding a base value for debug_0 register.

commit f89a3217a18261424e212b355628ce5f5b8b9142
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 21 23:16:40 2007 +0200

    randr12: Some minor changes.

commit 5ea59f8f01dbbd4211aee1a0e46a6529cddc016c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 21 20:37:50 2007 +0200

    randr12: hardcode more stuff + actually use a few previous regs
    
    - I'm going to try and do full modesetting, before tackling the problems that dual monitor setups face (i tried, it wasn't pretty).

commit 0f66c725cb8806041faddf94cceb88009f7e9f06
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Sep 20 08:29:43 2007 +1000

    make distcheck pass

commit bf3cceeb9c72c16a1cf601c8bd0dedd8c676e3cd
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Sep 17 18:58:31 2007 +0200

    randr12: Add some CRTC regs which the blob sets.

commit e3346c17c1ead9619206a5921994b5de7ed72739
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Sep 17 18:22:53 2007 +0200

    randr12: Change the way CRTC register 59 is set.
    
    - Small change, i suspect the original author had a dfp on the second crtc.
    - Information taken from a mmio trace of a nv28.

commit 6c3aee9d68abdb9303cf03d9024f4f0deb5f1e3e
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Sep 17 00:01:22 2007 +1000

    Make use of exaGetPixmapOffset().

commit 4d9e5d451a516aac64c4b95a4478f252c0c9eafb
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Sep 16 23:54:14 2007 +1000

    Fix randr1.2 with driver-provided modes (ie. LVDS native mode)
    
    Fixes #12368

commit 5e58e74435da2071aab9f21386ac6dabdf3f8e7d
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Sep 16 19:44:42 2007 +1000

    NV30EXA: Support PICT_a8 dest surfaces
    
    Quick hack for now, shader handling will get a rework one day and clean all
    this up.

commit d6d3ddfafaece2d153942ec37e3a8c3127c7c3fa
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Sep 16 19:01:21 2007 +1000

    Bring G8x modesetting into sync with xf86-video-nv.

commit 53e35a1d42070fd683eb6d0f169ac3ce482a45b0
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Sep 16 17:27:22 2007 +1000

    Move G80 VBIOS download into nv_bios.c.

commit 02d5443d650e628256ebed1f331ad32b0f642a38
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Sep 14 21:13:26 2007 +0200

    Xv: NV04 overlay now has one "colorkey" attribute
    
    It is technically possible to add other attributes, by copypasting vidix code from mplayer, but it requires a bit of work especially on testing, so I am going
    to do it only if someone actually needs it.

commit 0fa042e5123066ca2d9f36ff05cf64d0f68289a8
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Sep 14 14:17:32 2007 +0200

    Xv: NV04 overlay now almost functionnal

commit a7ff07f4ab63c5a574e549326f022f84c2b9bab4
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Sep 14 12:27:45 2007 +0200

    Xv: quick imple of NV04 overlay

commit 77076a391647f6111f38b10192d78ea7560ca9e8
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Sep 12 13:10:37 2007 +0200

    Try to fix nv4/tnt1

commit e03fabf7e14599c1619673430ec3d81db90ffd1e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Sep 11 20:15:11 2007 +0200

    Restore PRAMDAC1 and PCRTC1 offsets, in proper format (0x2000/4) and move them to their proper place.

commit 564043d9c1c9b5023f1b69a79d80742338256b83
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Sep 10 21:14:24 2007 +0200

    Fix the memory adresses of the secondary crtc and ramdac + minor change.

commit 5672842381a0e8f605cd482563c5d9ea02118647
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Mon Sep 10 18:29:10 2007 +0200

    make randr 1.2 disableable for xorg server < 1.3

commit 2778d3a9041ec62462585f623f84b1ed05b4ebad
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Mon Sep 10 18:28:03 2007 +0200

    make randr 1.2 disableable for xorg server < 1.3

commit 9bb76f73f0e648fda79a9c84d6e78469752a4eac
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Sep 10 07:57:01 2007 +0200

    randr12: Apply the same pll restrictions to a two stage design.

commit b46bbab81cc9f2093406fa8b53f9ffaf6f7fd0fc
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Mon Sep 10 07:25:25 2007 +0200

    randr12: Some more pll timer restrictions from Haiku.

commit 77b424415d31428e113688ec27a405966d5080e6
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Sep 9 23:11:18 2007 +0200

    randr12: Some new pll clock restrictions.

commit a1bbfe17cc863497644b58a9206ae3876a654543
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Sep 9 22:50:19 2007 +0200

    Some reindenting.

commit dedb80d1237ebacf7531938d627328a20453d5d0
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Sep 9 22:12:38 2007 +0200

    randr12: Modify dcb table for nv40 to make it look more like older hardware. Remove i2c bus reverse.

commit 7aa96706ef428f1390d8e938d0bf26b8c046a67d
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Sep 9 20:40:20 2007 +0200

    Removed a check for > 1 active crtc's, which seems really odd, no regressions occured for me.
    
    - I cannot plug in both the vga and dvi connector of my monitor, so i cannot verify that.
    - The seperate monitor, on crtc0 and crtc1 work as they did (the afp being slightly shifted).
    - Also did a little reindenting.

commit 228cb177242be053595b959dedfdfbfa77b1c54f
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Sep 9 18:49:08 2007 +0200

    randr12: Fix a nasty regression from 6ba7e83f8cf2da84dd796ee59cb24c15bc36b746.
    
    - For non-flatpanels the dac was never initialized.

commit 0a56cb53d7e2a58ef044c9090f48fd46a2b251d9
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sun Sep 9 00:39:41 2007 +0200

    randr12: Some missing init.

commit 80bfb59a1f1c3968f8e116de611975df4acf5618
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Sep 8 23:58:39 2007 +0200

    Some much needed indenting and readability improvements.

commit 20aaacdd69c427f6c75b80f5f206b3187262f3a1
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Sep 8 21:00:45 2007 +0200

    Hopefully fix bridged chip detection, such as the 7800GS AGP.

commit b99549b5cb4f4cba2d60292994b2db483f8d4a8c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Sep 8 14:25:39 2007 +0200

    Remove list that is incorrect and no longer needed.

commit b104314a11d3cf3bbb23095ff5805c1d5d8d9775
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Sep 8 14:24:54 2007 +0200

    Fix previous commit, change the way Digital Flat Panels are programmed.
    
    - This is mostly taken from the Haiku driver.
    - It works for me, please report any issues you have.
    - Added scaling, for running 4:3 resolutions on widescreen for example (untested).

commit a867d6912456a5e15a965050bf784687e60634ee
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Sat Sep 8 00:46:20 2007 +0200

    Hopefully this will improve flatpanel beheaviour.
    
    - I looked at Haiku and copied as much as i could.
    - I removed the htiming and vtiming hack.
    - Let's hope this works.

commit 6ba7e83f8cf2da84dd796ee59cb24c15bc36b746
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 7 23:11:51 2007 +0200

    Some more indenting and such.

commit d8d835dfb61f437b3eaede0a6ec188835f6eb5ff
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 7 22:58:56 2007 +0200

    Removing a hack in the hopes of finding a better way and some minor changes.

commit dd7e568bd101ed34dcdd7d3b6d8169740499d593
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 7 22:27:18 2007 +0200

    Indenting and minor code style changes.

commit 8ed256e94dae884b723c172320b15b0d6ae00a1b
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Fri Sep 7 14:37:40 2007 +0200

    randr12: Fix Xv blitter, please see full changelog for other implications.
    
    - Removed the CRTCNumber variable, instead just store if crtc0 and crtc1 are active.
    - This coule break old style setups (picking the wrong monitor for example).
    - CRTCNumber option temporarily removed, because the piece of code surrounding it is ugly and needs a rework.

commit eb595b2e06ec33d5fe2af43bc7ad107f551d99c8
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Sep 6 23:26:04 2007 +0200

    randr-1.2: Only the NV4x have these busses swapped, revert for other architectures.
    
    - If this is also true for NV3x, then please contact me.

commit dd146a074fff575e18a41fd386e2a2ce5a1ec847
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Sep 6 22:55:16 2007 +0200

    Update to latest pciaccess api, this now requires libpciaccess 0.10.0.

commit 2f37d249605d6f0b80c290683ca35a9431b1078c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Sep 6 22:00:30 2007 +0200

    NV03 is dead.

commit 2b2c99f2581e14d3f1726bc503951b1fe7760c95
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Thu Sep 6 21:43:55 2007 +0200

    randr12: A prettier hack for DFP, that uses several known htiming and vtiming modes.
    
    - I'm fairly sure these modes are tied to resolution.
    - You are welcome to supply additional modes.
    - A final solution would be even better ;-)

commit ab7d37d61a01afea218321d336664896eaec5651
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Thu Sep 6 15:09:59 2007 +0200

    Xv: work around some overlay bandwidth problems - may break things though
    
    extended nv workaround from bug 4686 in nv_dac.c to NV1x and NV2x cards, as it fixed problems on someone's NV17.

commit f46bc9ad5558e9ecf6b174e24658e812811e94ce
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Sep 5 23:15:57 2007 +0200

    Workaround for flatpanels.
    
    - Remove the hardcoded values.
    - This should probably work for monitors whose mode is already set.

commit 1825031465fc614a2a972ea7a8b44ac32aed8ea3
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Sep 5 21:23:25 2007 +0200

    Fix minor issue.

commit c0eefaba3f3706eb62e172bc57ac2795bd16bd56
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Sep 5 21:22:05 2007 +0200

    Fix DPMS, patch by Bernhard Kaindl <bk@suse.de>.

commit d4dda6bb972003394dd3326f8042fa5b759fc063
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Sep 5 21:18:51 2007 +0200

    Reverse DDC1 and DDC2.
    
    - I need them reversed.
    - I also found this: http://www.mail-archive.com/git-commits-head@vger.kernel.org/msg12009.html
    - If you need them otherwise, then please consult and hopefully we can solve it.

commit da89d5a4e0263b8a89c549496d10ab43c7f1f230
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Sep 5 21:16:11 2007 +0200

    randr-1.2 clients have their DDC's initialized elsewhere.

commit 2b209d9b8907fad3bbaaf7297ff3c340f086bd24
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Sep 5 21:12:18 2007 +0200

    LockUnlock CRTC's when going back to X (EnterVT), patch by Bernhard Kaindl <bk@suse.de>.

commit ba7aa5a1525bb3fbc2ae7fbfce3e42a2e945626e
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Wed Sep 5 18:34:27 2007 +0200

    Xv: improved behavior with NoAccel by disabling blitter and overlay

commit 42fd07b25d9abece034e972d1413b31fe78eba4c
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Sep 5 11:58:19 2007 +1000

    Avoid segv.

commit e74d58cdef0a0ee561e54f3d7d8afdfac030e04a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Sep 5 11:53:48 2007 +1000

    Add back DCB table parsing from randr-1.2 branch.

commit 8a12758a6b7e4313e0269585b6f64eaffe54c74c
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Sep 5 11:51:35 2007 +1000

    Add LVDS panels when found in DCB.

commit b01fbbfa2b6be793dbd7695624699ed703ff4424
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Sep 5 11:34:14 2007 +1000

    Nuke "comparison is always false..." warning.

commit c53f495ec2994f013406d9738764ab124ed32061
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Sep 5 10:59:33 2007 +1000

    Fix pciid detect on non-8800 cards (they identify as NV8x, not NV5x)
    
    Actually, use 0x88000 to get pciid on all chipsets since NV40.  Evidence
    suggests that NV4x has both the 0x88xxx regs and 0x18xx regs.

commit 17d1a65296ae4fc524a31cd2fe4b9fe9484c0452
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Sep 5 10:53:32 2007 +1000

    Neither overlay or blit adaptor work on G8x.

commit 9ce1115cf26a7cf3212fdf446b83907f5795913a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Sep 5 10:51:02 2007 +1000

    Nuke riva_* files + bits of NV03 that got reincarnated.

commit 51e3855104ff7b68559d37e774cde306424399d8
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Sep 5 10:46:54 2007 +1000

    Nuke XAA.

commit a0cb03d32b0da3ad2b4e03515926a3d616f487bc
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Sep 4 23:04:59 2007 +0200

    There was some redundant arch checking code left, must have been missed after the randr merge.

commit 13aeb83d7e5fcb3f051f95faa48a2ef636d67260
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Sep 4 22:54:28 2007 +0200

    I unknowingly broke CRT's i think.

commit a57fe870e49b2e7a3a6caf17fea8c8c878b1024c
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Sep 4 22:17:52 2007 +0200

    Fix several problems.
    
    - Implement a temporary NVSetMode(), suggestion and code by: Bernhard Kaindl <bk@suse.de>.
     Note: I've left his comment intact, just a minor change.
    - Fix last commit, i forgot to store the last mode.
    - Move some header stuff around, which i created without knowing the true purpose of nv_proto.h ;-)

commit be468069b752a3a3c595f62eda40e90719496c90
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Sep 4 20:45:25 2007 +0200

    Fix DVI/Digital alligment with some (magic?) values discovered by Matthew Garrett <mjg59@srcf.ucam.org>.

commit 9b54aac1641c35ca3edb2d208d8a9a9c55737894
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Sep 4 20:20:02 2007 +0200

    Add suggestion/patch by Bernhard Kaindl <bk@suse.de> and fix NVRestore().
    
    - When a monitor comes out of DPMS sleep the old state is restored.
    - NVRestore() was not ported from randr-1.2 branch, meaning that going from X to console resulted in a unacceptable mode.

commit 186e3b551da6e37e0860d06e9265c3c58b763e27
Author: Maarten Maathuis <madman2003@gmail.com>
Date:   Tue Sep 4 18:39:44 2007 +0200

    Add pci-rework compatibility and remove the pci-id list.
    
    - Detection is now done by probing registers.
    - Nforce/Nforce2 have special "hacks", they have been converted, but are untested.
    - NV5x detection should work, but has seen no testing.

commit 6f860d6d7637f4eba49636d2bab11ac62da279cf
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Sep 4 11:38:39 2007 +1000

    Badness.

commit 54ca35e7379fdb375c0d7be2f8c3ad1513be2a59
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Sep 3 22:06:27 2007 +1000

    Hook up G8x accel code.

commit 8c6fd43f63e450acbfd8de563580db715e72f90b
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Sep 3 22:06:09 2007 +1000

    Fix G8x hwcursor

commit f6d0e2dde750436090f50f442e3e0f1aa226a7f3
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Sep 3 21:35:06 2007 +1000

    Fix up M2MF code for G8x.

commit fe8788da8cd5aca90bbe85e1c975b79ff02682ba
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Sep 3 21:30:16 2007 +1000

    Init grobjs we need on G8x.

commit f450a4d0ab9c199db0a99a5e78642a0d66ca2915
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Sep 3 21:14:59 2007 +1000

    Allocate some VRAM for G8x palette.

commit dfcfc9a8dac7f1fdf7b31ebdd2bca4c5f33313e0
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Sep 3 21:06:15 2007 +1000

    Don't pound PMC_ENABLE on startup, this is DRM's job.
    
    Fixes resetting parts of G8x that shouldn't be.

commit c8a32bab34ffe74a4a323de3885fae87bd916218
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Sep 3 21:05:08 2007 +1000

    Detect unknown G8x chips in NVProbe() + Force randr12 on G8x

commit 087fd31d6a5d6a835fc318549a12faa916cf5ed0
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 3 16:46:34 2007 +1000

    fix distcheck after randr-1.2 brought in

commit 423f95c02c5b018d6fc78f501ea8b546d73f33fb
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 3 16:42:32 2007 +1000

    merge in the nv50 code from the randr 1.2 branch

commit 39e8b6c7c0a159f7a06d786abc0f9c5c30ae6793
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 3 16:22:47 2007 +1000

    randr12: bring over cursor code

commit ffd87b9bf2712311e197063a7c4b65b7c06a5ebb
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 3 16:16:43 2007 +1000

    randr12: try and bring over most of the randr12 code into master
    
    This currently shouldn't break master, and randr-1.2 more than likely doesn't actually work

commit 708cb3f9d9b66030dd0bfc4beaa657fcdfded784
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Aug 31 21:42:51 2007 +0200

    Xv: now "powercycling" the overlay using PMC_ENABLE in order to workaround some lock up problems

commit 3a5095db9fd33d2feeb4bcfcb8453848998ce04b
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Aug 31 01:36:11 2007 +0200

    Cut remains of NV03 support.

commit 54a922dffaa1a4a7c29c2cf8d73449e6fe9058ed
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Fri Aug 31 01:35:52 2007 +0200

    Good ol' nv04 doesn't seem to support dithering type for SIFM.

commit b680a9652508e0d0e660fd924937870cd4ad3530
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Thu Aug 30 23:19:13 2007 +0200

    Xv: nv NV30 arbitration patch for DFPs - fixes (some?) bw problems

commit f29c9d3fc95f160ded64b911266a479ad0a2fc1a
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Aug 29 00:56:05 2007 +0200

    Silence more warnings.

commit 663bf3cbc881631e54e7d63932f59e1b4289979f
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Aug 29 00:20:19 2007 +0200

    Silence a warning.

commit 5937ace8e2376f0b38249e38d1f97a88f4aca99f
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Aug 28 11:18:54 2007 +0200

    Some small fixes.

commit 30d2b3f0dd4a9b6be5d3ad7a38993e5b84baf90a
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Aug 23 22:54:53 2007 +0200

    Oops I forgot to enable the nv35 object on nv35...

commit 761d25eb9afd4be34f00ff7eff44dac0c2f9d9a2
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Aug 23 22:39:34 2007 +0200

    Don't enable that non-working nv30 EXA just yet.

commit 7e7dec68969db5dfc15a96f6dbe78edbcd1ab5ab
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Thu Aug 23 22:33:58 2007 +0200

    Add nv30 exa code, doesn't work yet.

commit e1789ac879d474015c87c36847f0e2777486d6ad
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Aug 22 22:38:08 2007 +0200

    Update to the latest nouveau_reg.h file.

commit 4fc38aeb54da1cba9d5e231a5151e6429af0ea7e
Author: Matthieu Castet <castet.matthieu@free.fr>
Date:   Tue Aug 21 20:03:15 2007 +0200

    init SCALED_IMAGE_FROM_MEMORY_COLOR_CONVERSION to COLOR_CONVERSION_TYPE_DITHER.
    riva and blob init it.

commit c63b5a3740dfe3ff5c6b77412e3666a79137c120
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Tue Aug 21 14:55:07 2007 +0200

    Fixed blending in NVComposite by actually creating ContextBeta1 and 4 objects

commit 4454b3d0104c14890b9b5ead33823ffd0362315c
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Mon Aug 20 23:50:43 2007 +0200

    Workaround for NVComposite bug #11949
    
    Accepting only PictOpSrc now, PictOpOver causing crashes.

commit 450cf465bd850d70ba00711e7d85e1e8eaeff502
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Mon Aug 20 13:18:15 2007 +0200

    Xv: fixed wrong fix of big endian NV12 copy, as explained by Daniel Chassot
    
    No sleepless coding ever again. <- big lie

commit b8780f3d9a7e1bd596f19cbb4867908dd6be53db
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Mon Aug 20 00:46:00 2007 +0200

    Xv: patch from Daniel Chassot to do 32bit memory writes in NVCopyNV12ColorPlanes, with minor reworking of mine

commit 690b4b7adc02e7170451bd5bc6616bc03823d2e5
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sun Aug 19 21:04:00 2007 +0200

    Xv: this time a correct matching ? :)

commit 6b6505bc54fc29fc22d2be995f34b24ddb9dbaa0
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sun Aug 19 20:18:49 2007 +0200

    Xv: stupid build error. blah.

commit 28b66c26f85f7730ba9a54db3f778bfd5b24915d
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sun Aug 19 20:14:38 2007 +0200

    Xv: now catching all chips < NV17

commit 94ae23e2a1ebe9fe3f4bf2039ad3b2e5f0e3e55e
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sun Aug 19 19:50:57 2007 +0200

    Xv: disabled YV12 overlay on < NV17

commit 1f83dbfa6ef774276e0da3dc4f74cbabe55f76fa
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Aug 17 00:45:47 2007 +0200

    Xv: now only uploading the part of source image that is used to workaround bandwidth problems

commit ffa62dc9f573448c8a832324973513f7ba985b33
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Wed Aug 15 02:27:15 2007 +0200

    Cleaner DMA and CPU copy upload of color plane for overlay. Fixes a few bugs and is necessary for the bandwidth problem workaround.

commit 72c62c48faf2acffae1bc311051537f46972ae58
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Tue Aug 14 22:26:02 2007 +0200

    Can not setup dfp modes with xorg-server-1.1 also

commit 54eadd624282ae6d0493a3cb54afda7600c7e12b
Author: Patrice Mandin <pmandin@caramail.com>
Date:   Tue Aug 14 22:12:37 2007 +0200

    Make NV30 EXA disablable

commit da6522dbfcff10081ce2ad866ba4afdd18b413d7
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Tue Aug 14 15:01:58 2007 +0200

    Implemented CPU copy fallback for native YV12 overlay as well.

commit e417307bfc8610f010728d82bb80fced7d0d7aa7
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Tue Aug 14 14:47:44 2007 +0200

    Native YV12 overlay support, cleaner Xv code
    
    Added support for a native YV12 overlay for NV10+ cards.
    Cleaned up Xv code.
    CPU copy fallback does not do native YV12 yet.
    Bandwidth problem with YV12.

commit b3e4da61e8c846d8d3f01b015cb7155da4e266e9
Author: Carlos Martín Nieto <carlos@cmartin.tk>
Date:   Sat Aug 11 12:27:56 2007 +0200

    Don't dereference the uninitialised pNv->FB pointer.
    
    Opps, mea culpa. I accidentally commited a debug statement that
    dereferences an uninitialised pointer.

commit a7d29fd932fe14ca5b82cda64341704164fb7e09
Author: Carlos Martín Nieto <carlos@cmartin.tk>
Date:   Fri Aug 10 20:01:27 2007 +0200

    Move DRI's FB to the higher half of VRAM
    
    If we don't, DRM's push buffer takes the map away from us.
    
    This is just a workaround until that useless DRI mapping goes away.

commit f9e7849e8736d1477e867a3a1262f0f82baefbcb
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Aug 10 20:59:12 2007 +0200

    of course, we don't need Xv debug messages upstream

commit ee098308c6aca7615bc6ee597e9ca531520f4119
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Aug 10 19:28:22 2007 +0200

    "smart" overlay with composite, and a tentative fix of flickering when dropping frames
    
    added "smart overlay" when composite is enabled. not extensively tested
    now not changing the buffer when skipping frames - not sure it even has an impact.

commit 9cc11cbc9ce10b99f72d7c08584bf61d179cdbda
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Aug 9 01:46:46 2007 +1000

    Fix blit adaptor + NVWaitVBlank() (ie. replace old magic 0x400710 hack)

commit 22e965038bbc64c7b5118fc9a03ecf5f467d1665
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Aug 8 12:45:59 2007 +0200

    And of course, we don't really need these ErrorFs. Not any more than last time.

commit 1c5a3e271ca628c61fce0bcef24d0bda15d06d7e
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Aug 8 12:38:14 2007 +0200

    Oh, and of course we need a new object.

commit a9b44880924ee814f0bd4b0015ab152f2d0b9051
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Aug 8 12:37:31 2007 +0200

    Use IMAGE_FROM_CPU for smaller UTS. This is async and helps a lot with glyphs especially.

commit 9cb4c95a4fbf38fcb8249e765ff71b2e24912244
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Aug 8 11:48:48 2007 +1000

    Add forgotten prototype

commit 089ff874e0a798c1b2693b5ab01cfa04c939f758
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Aug 8 10:32:08 2007 +1000

    Timeouts got lost somewhere along the way..

commit 15a680a6d715f87910b07133e1b98e2d4be9a108
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Aug 7 23:42:09 2007 +0200

    Fix some overlooked hardcoded subchannels...

commit 3f0a52c44697787d84d4f2cf61872e13d630f62a
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Aug 6 23:30:04 2007 +0200

    Fix explicit usage of subchannels, and remove subchannel defines altogether.

commit 17b65f1c2be3e609d387066d72dd8f5f7e2a6d92
Author: Matthieu Castet <castet.matthieu@free.fr>
Date:   Mon Aug 6 19:55:52 2007 +0200

    make XAA work on nv17

commit bf5684ba05e50fe48cce1e634caf03725fa907e6
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Aug 6 18:27:19 2007 +0200

    oops remove the debugging ErrorFs.

commit 2eab8453d73b4e7fd6c2d772d595ca5e8fa8c975
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Aug 6 18:13:13 2007 +0200

    Fix UTS/DFS when gart is smaller than transfer size.

commit 71076f7947ec71b7a0f363c23f5a51ef09cdd9c0
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Aug 7 02:09:30 2007 +1000

    NVDmaSetObjectFromSubchannel doesn't exist anymore!

commit 4a6c2bd2bedcf9f67c3e498b1411ad58cd66199c
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Aug 6 17:29:41 2007 +0200

    Add subchannel handling code

commit c7b16f6fff96ffcff8049feed2a0a9ef6de4209f
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Aug 6 21:45:50 2007 +1000

    Adapt to drm 0.0.10

commit 59d073c9b01a8f61675b8d74f5c55f134ddfb8bf
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Mon Aug 6 01:37:17 2007 +0200

    Xv: waiting for last transfers to finish before freeing notifiers

commit 047aa7e0a6ecce59c9be8d36c51f082c0ddaafe8
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Aug 6 00:13:35 2007 +1000

    Clamp NV_MEMORY_TO_MEMORY_FORMAT_LINE_COUNT to 2047 lines.
    
    At least NV40 can't handle values larger than this.  Patch fixes hang
    when visiting opengl.org.

commit 68070ff7309c8b1cf149490dcf537892b0bf44bc
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Mon Jul 30 03:27:55 2007 +0200

    Xv now manages a pool of 6 notifiers for its double buffering. Also improved the memory allocation logic.

commit bceef7210e44dc643a5f7a5b5683d5c434a07565
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sun Jul 29 01:54:42 2007 +0200

    Xv: fixed bugs when displayed only part of the source image (tvtime with overscan)
    Xv: fixed bug with overlay behaving badly when window is partly out of screen
    Xv: clean up NVPutImage code

commit a434cc6dd38ffa658bacf5547ec0384ec5351e9c
Author: Dave Airlie <airlied@ppcg5.localdomain>
Date:   Sat Jul 28 16:34:49 2007 +1000

    exa: disable compositing on big endian machines
    
    This at least allows me to see what I'm typing for now :-)

commit 175c2b7f7b9e45924e1de7f7ea1130fda76d02fd
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Jul 27 19:50:48 2007 +0200

    no overlay with composite

commit 200c82634971b32bcc308b5e07c113048cf37aa4
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Jul 27 16:28:48 2007 +0200

    Xv: gotos are evil

commit 8544c0ce64780be1bb5f66550d9d6f1e3c87865c
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Jul 27 15:11:31 2007 +0200

    Removed comments in preparation for upstream push

commit 2c60f6e9fc5260eba5b7ddaf67085781f35bfc58
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Thu Jul 26 23:00:02 2007 +0200

    re-added CPU copy code as a second fallback option (first being to use X GARTScratch)

commit c4dfad770d380dacddd3be025e96f867047327cc
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Thu Jul 26 16:08:40 2007 +0200

    Completely removed notifier wait, when using double buffered stuff.
    I may have to re-add a wait in the future, but I'm not sure yet how to use two notifiers at a time.

commit 8ba6a9c7494ebd53a3fe775d4d9b402e918a6598
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Thu Jul 26 15:21:08 2007 +0200

    Preliminary implementation of "host-side double buffering" to improve performance of Xv

commit 4f4721f1b8a76a0bf9938e3c614ba7166d5f3dab
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Wed Jul 25 22:23:37 2007 +0200

    removed pointless sleep in notifier wait

commit 290e71edfbc6297c63989d5c21a67717b4ca5f76
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Jul 20 17:46:18 2007 +0200

    cleaner Xv code - fallback on CPU copy yet to be implemented

commit e760235a0596895b726220366c50d4e7c244006e
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Jul 20 01:33:49 2007 +0200

    Now using GART as the source for the blitter - preliminary implementation, gotta clean it up

commit a97181f95a1f5da6180b8a72f3ca307079b92079
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Fri Jul 20 01:22:11 2007 +0200

    now yielding in the wait for notifier for Xv only

commit 81cc744eb31343a509f9ca0d37993d462f162d80
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sun Jul 15 01:00:19 2007 +0200

    VERY EXPERIMENTAL now EXA waits for sync before its operations - this removed the text corruption and didn't affect performance here, please report.

commit 74ed14e1d27903f0647fe650da666cacb1e2e940
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Sun Jul 15 00:35:46 2007 +0200

    VERY EXPERIMENTAL moved the notifier wait at the beginning of NvPutImage

commit 590e385cb5e4f26532ec5ee380f2aaae1cd69894
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Thu Jul 12 03:19:21 2007 +0200

    new structure for PutImage, and DMA transfers

commit d4abe1fb011d414fda1871f052dda5b860f0820b
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Jul 17 13:09:34 2007 +1000

    Emit NOTIFY+NOP sequence after M2MF.

commit 36396aeaeabfd00c7014fa52c17261c3da8b6a82
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Fri Jul 13 15:28:56 2007 +1000

    Play "nuke the typedef"

commit 99e0fbc1a34f535abf41c6f4566901c326dfa4b5
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jul 12 10:47:53 2007 +1000

    Match drm 0.0.9 interface changes.

commit e88b20b392c6972088d88f52b2da83b82b821be5
Author: Arthur Huillet <arthur.huillet@free.fr>
Date:   Wed Jul 11 02:42:24 2007 +0200

    added support for PCI GART when no AGP is available - requires DRM interface version 8

commit dff1cce299df636813e8f85109f4556f520620c0
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jul 1 18:22:37 2007 +1000

    Always provide UTS, fallback to memcpy if no GART.

commit 2e0e7e3856573fbbcb5fe5c96cadcde4d33db68f
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jul 1 18:19:44 2007 +1000

    Always provide DFS, use memcpy fallback if no GART.

commit ba0d3fbba7c1a83ddc509414772199862a4a1d03
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Jun 30 15:27:07 2007 +1000

    Remove some unused cruft

commit 3e2677040937fda1cd6e6ea26c238049bd9f99ba
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sat Jun 30 04:26:48 2007 +1000

    No need to call exaMarkSync() in UTS/DFS.

commit e81c9a29e6d1c6573892df8601f0361c2b09c659
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Thu Jun 28 15:16:35 2007 +1000

    Bail if GlxSetVisualConfigs isn't found.

commit fce3edda42d10a9c3249c6eae4218a51a981493f
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Jun 25 12:45:31 2007 +1000

    Bump required xorg-server version to 1.3

commit 8f1c9af02651404f8b4800b150a86bb47062fd68
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Jun 25 12:44:12 2007 +1000

    Check PRAMIN for BIOS image if not found in PROM.

commit 824331e3fce36098e8dec31746204f7c13038abb
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jun 24 17:48:33 2007 +1000

    Implement NV40 EXA composite hooks with 3D engine.
    
    Named NV30EXA, but won't work on NV30 just yet.  This should change at some
    point in the future.
    
    Will likely break non-voodoo'd NV4X cards (if the latest drm changes didn't
    already break them).  Use EXANoComposite xorg.conf option to disable the hook
    if that's the case.

commit 2e2e95fc3b650ca633294bf4c11c9ba28f45b743
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jun 24 17:34:10 2007 +1000

    Slightly saner UploadToScreen implementation

commit 35806975047aa8c0dbc059709bb823f475ee7368
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jun 24 17:27:42 2007 +1000

    Wait on notifier instead of PGRAPH_STATUS
    
    When multiple channels are in use, PGRAPH_STATUS may report busy even if the
    ddx's channel is idle.

commit c39089b3d686eecef11db2b5a2d606ba1ca2dc0c
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jun 24 17:21:27 2007 +1000

    Match drm 0.0.7 interface changes

commit 45dccb99a541a0e1e7be7b4e5aab12c3d8d9f30d
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jun 24 16:47:36 2007 +1000

    Hide the allocator's use of physical addresses

commit d41cf4febd555cca1c65df7aa981be64a6ae4219
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Sun Jun 24 16:46:40 2007 +1000

    Pass pScrn instead of pNv in a few places

commit d59fbb4725602c409beee4ab96dca1eab5d73b2a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Jun 11 20:36:28 2007 +1000

    don't nuke user-specified CFLAGS

commit 7af7d95eb8826fa3fb9914a8c6ad4b6f4867095e
Author: Henry Zhao <henryz@localhost.localdomain>
Date:   Mon Apr 23 01:38:09 2007 +0200

    Import from nv : Need to inject a mode corresponding panel width/height for validation

commit 896fe62233f62d5e1f874ed0eba3a200fa5ef14b
Author: Richard Hughes <richard@hughsie.com>
Date:   Sun Apr 15 23:01:52 2007 +0200

    Fix make dist.

commit e0e90f427581929fd01c96f1958a1292982dee83
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 26 01:04:15 2007 +1000

    nouveau: rip out card init, everything except modesetting.

commit 23fdec37c580c3b5de263dfd48bd80fa9f21bc19
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 21 17:55:38 2007 +1100

    nouveau: bump for drm interface changes (v0.0.5)

commit 1fddcfe6680148ed2edd8017217734a1f812298c
Author: Matthieu Castet <castet.matthieu@free.fr>
Date:   Sun Mar 18 11:30:54 2007 +0100

    Fix "Fix NoAccel mode" commit : NVAccelCommonInit return a bool

commit 113c6837a6515d533bfa15daf49f6cd2c4c95ac4
Author: Matthieu Castet <castet.matthieu@free.fr>
Date:   Sun Mar 18 11:28:04 2007 +0100

    Fix NoAccel mode

commit d1b75251a3f225890f1e25b11038389d71b67611
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 7 21:41:22 2007 +1100

    Rip out nv30_exa.c, we have other means to play with the 3D engine now.

commit adb2df9a9c88bc9646b65a235aa36416c3064c9f
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 7 16:46:27 2007 +1100

    Xv: Make the blit adaptor play nice with EXA
    
    Previously the blit adaptor assumed that all drawing (ie. XAA) would occur to
    the screen pixmap, so it didn't bother touching surface offsets.  Now, with
    EXA this isn't true and the card complained about exceeding the colour buffer
    limits when attempting to play video.
    
    This patch kills 2 birds with one stone; instead of pointing the GPU back at
    the screen pixmap when playing video, we point it at the destination drawable.
    So, Xv will also hopefully play nicely with redirected windows now.

commit f28abbedfc7deeb90317dd24c7ec5dfe1ae94fdf
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 7 13:58:48 2007 +1100

    Only use Y32 for Solid().
    
    It's the only place the workaround is needed at this point, and in some places
    we need to use the "proper" ARGB format (Xv for instance).

commit 6441253d34d118befe8950781ba012fc58bb5158
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 7 04:33:44 2007 +1100

    Fail configure if xorg-server isn't at least version 1.1
    
    The minimum requirement has been 1.1 for a while now, but would only fail
    at compile time when compiling nv_exa.c.  This patch makes configure fail,
    and removes the remaining conditional support for older servers.
    
    Hopefully the configure.ac is ok, I suck at autofoo.

commit e568c2d8e82b1bcf25e495f4a82331803d954234
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Mar 7 04:22:24 2007 +1100

    reindent and move nv_video.c around a bit

commit a0a5586836eb87a8c21abb06f9b8afd64eec714a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Tue Mar 6 05:42:29 2007 +1100

    Use Y32 format instead of A8R8G8B8 for 32-bpp pixmaps
    
    fixes 32-bpp EXA solid-fills, previously alpha was forced to 0xff.

commit 2e9976c034b6c310b7ad0fc858250c5e54781a9e
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Mon Mar 5 14:45:04 2007 +1100

    move NVAccel* funcs into nv_accel_common.c

commit add6463b848fab274cb5cc190a78aeafc1389203
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Mar 4 22:40:48 2007 +0100

    Joint patch from Ben Skeggs and me that fixes some (all ?) composite issues.

commit 83868bd0a36520da49e40e2b8404e4652de39824
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Thu Mar 1 08:39:23 2007 +1100

    nouveau: avoid attempting an AGP-only alloc
    
    will fail on non-AGP cards, and leave nasty messages in Xorg.log...

commit da1dd87acb7061b4772c271dc3c9071a3b160e8a
Author: Ben Skeggs <skeggsb@gmail.com>
Date:   Wed Feb 28 15:30:52 2007 +1100

    match drm v4 interface changes
    
    context (gr/dma) object handling:
    	- remove use of flags/dmaobj when creating objects
    	- move object creation/setup into nv_accel_common.c
    	- NV04: make PGRAPH complain a bit more if we program the hardware
    		incorrectly.
    	- NV04/NV10: enable PGRAPH_DEBUG_3_CTX_METHODS
    		This bit seems to enable the use of SET_* methods.
    	- NV04/NV10/NV40: enable PGRAPH_DEBUG_3_IGNORE_PATCHVALID
    		Objects no longer get PATCH_CONFIG_VALID set in their context.
    		Not sure how to get this set other than to intercept the
    		PATCH_EXCEPTION error and enable the flag.  I opted for the
    		same method NVIDIA use, which makes PGRAPH ignore it.
    misc:
    	- use NV04_SCALED_IMAGE_FROM_MEMORY on all NV_ARCH_04 cards
    	- fix offScreenBase calculation (EXA)
    	- move mem alloc/free helpers into nv_mem.c

commit 7e5f90b264fdb3081250ff16748164998b6461a6
Author: Adam Jackson <ajax@benzedrine.nwnk.net>
Date:   Tue Feb 27 14:46:20 2007 -0500

    Typo fix.

commit c85da5d8b346e17e68da68e57d62c3f77029b680
Author: Damien Thebault <damien.thebault@laposte.net>
Date:   Wed Feb 14 00:35:50 2007 +0100

    Don't output the chipset list to the log file, silence some warnings.

commit f650cb126e042b44126df6a298e996726356ec5b
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Feb 14 00:29:52 2007 +0100

    Fix the workaround (or workaround the fix).

commit ac2784d38634bc6d8aec3a94d609b60cd49b21b6
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Jan 24 20:39:40 2007 +0100

    Make NV_DMA_DEBUG print the fifo position.

commit d54d441df4294bf4fed26635a738f4111087e06d
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Jan 24 19:13:05 2007 +0100

    Increase the fifo dump size.

commit b21dbb170aa49c83ef450c2ab8c34614277e7fbc
Author: B. Rathmann <koala_br@users.sourceforge.net>
Date:   Wed Jan 24 13:46:16 2007 +0100

    Fix the G70 issues.

commit e683979666a4c07590b7bade2f62cca33c19a3b2
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Fri Jan 19 15:40:22 2007 +1100

    bump drm patchlevel

commit feff7cb67ae61987146a21dad535702f3db2264c
Author: Jeremy Kolb <jkolb@brandeis.edu>
Date:   Thu Jan 18 21:28:51 2007 -0500

    Fill in some more nv30 magic values.  Not sure what they do yet but they don't hurt anything.
    
    Apply names to other registers.

commit 31462c30bb79e8245edee0cf57c46b889d2f259b
Author: Jeremy Kolb <jkolb@brandeis.edu>
Date:   Wed Jan 17 08:34:56 2007 -0500

    Fix PGRAPH_DEBUG* regs to match what's done on the nv35. Specifically change DEBUG_3 | 0x00de0000 for data/format/dma checking. This is consistent with other cards and dumps so it should be correct.

commit 4583312ba72047e6bc65bfc576a0bcf90e04b2de
Author: David Jeannot <djeannot24@gmail.com>
Date:   Tue Jan 16 00:03:56 2007 +0100

    Indent nv_bios.c properly.

commit 6246fba5a54dc7af9a8b16c5a14131180831562d
Author: Patrice Mandin <patrice@manoir.racoon.city>
Date:   Fri Jan 12 20:25:16 2007 +0100

    Add missing include for malloc/free

commit 37937980ec7b21c40539daee029886c4f4a0f0cd
Author: Jeremy Kolb <jkolb@brandeis.edu>
Date:   Fri Jan 12 00:26:20 2007 -0500

    NV30: Set DEBUG3 reg bit 1.  Turns on automatic hw context switching.

commit d5617e91ff13f9e19d9e5d421fd081f59dec685c
Author: jkolb@brandeis.edu <jkolb@brandeis.edu>
Date:   Thu Nov 2 20:23:36 2006 -0500

    Just a superficial cleaning up. Nothing exciting.

commit 1f6239de8d7618de6aee402eaf1d8552524a996e
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Tue Jan 2 15:08:36 2007 +1100

    NV4x changes to work with latest drm.

commit f9ba29a07581ede8c409b0eb8b549db3b446f490
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Dec 27 21:52:15 2006 +0100

    Output the driver date to the logs on startup.

commit 2f1d14fe1c03c32ad60776e0d0c2ae41a42ea4be
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Tue Dec 12 00:13:05 2006 +1100

    Remove final remaining PRAMIN access (NV04-specific), the drm handles it now

commit de7255d5420c64a2707f5e78a4157d93618e6c17
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Fri Dec 8 18:09:26 2006 +1100

    Provide some visuals with a stencil buffer, and actually call NVDRIInitVisualConfigs.

commit e64dcc59b607ae5ad7049c35fed6d6a300cd5f6e
Merge: 0f7957d 656dfcd
Author: Matthieu Castet <mat@mat-pc.(none)>
Date:   Wed Dec 6 22:09:23 2006 +0100

    Merge branch 'master' of git+ssh://matc@git.freedesktop.org/git/nouveau/xf86-video-nouveau/

commit 0f7957da9ce856ef0accc922ab368ac10171b5e6
Author: Matthieu Castet <mat@mat-pc.(none)>
Date:   Wed Dec 6 22:07:26 2006 +0100

    More pgraph regs

commit 656dfcd635551245b2f58835c5ea87474d3eb60d
Merge: ed307d5 224578b
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Dec 3 10:20:04 2006 +0100

    Merge branch 'master' of git+ssh://marcheu@git.freedesktop.org/git/nouveau/xf86-video-nouveau

commit ed307d559be72e06f64566574beb36200ebe47e2
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sun Dec 3 10:14:04 2006 +0100

    Introduce lock step versioning with the drm.
    Fix the MEM_ALLOC issue.

commit 224578b74645fe3624669dc3521fe6deb1cc4aae
Author: Matthieu Castet <mat@mat-pc.(none)>
Date:   Tue Nov 28 19:12:55 2006 +0100

    Don't alloc fifo if it is not needed.

commit 146eb74cb7d1da1da55247a04e7a969d98601e42
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Nov 27 00:03:11 2006 +0100

    Mandatory oops commit.

commit bdfa6776128f4bc7e2f3caa57296571acb9bd661
Author: Andrew Mitchell <ajmitch@ubuntu.com>
Date:   Sun Nov 26 23:59:06 2006 +0100

    Remove XF86DRI defines from the driver. It's already mandatory anyway.

commit 7ebc8c4327d0b50f60c4cd4423414d4cfbb8b7d8
Author: airlied <airlied@optimus.localdomain>
Date:   Fri Nov 17 16:23:38 2006 +1100

    add VGA CRTC registers from haiku

commit 7150a4357dff0a2e4468190e2fd228ed07d367f9
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 17 12:55:37 2006 +1100

    remove nvvga.h unused

commit 64a1c5bb90fd13ce1c191873a4f4afc2a9ede09b
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 17 12:51:11 2006 +1100

    find and version DRM earlier in startup sequence so it is loaded firstup

commit 659b5de8200d9022e7616f03b20a306fff2af0fe
Author: Matthieu Castet <castet.matthieu@free.fr>
Date:   Fri Nov 17 00:59:58 2006 +0100

    Cleanup of PVIDEO.

commit 370b83eb3347d14003f2878737d25de7dacaeec1
Author: Matthieu Castet <castet.matthieu@free.fr>
Date:   Wed Nov 15 22:10:27 2006 +0100

    Use objects from nouveau_reg.h.

commit 2ffeb45a953a2ff52abe6f78dacfb9c53f873dbb
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Wed Nov 15 01:22:18 2006 +1100

    Set SURFACE_FORMAT in NVExaPrepareCopy.  Fixes one of the many issues with xorg-server-1.2

commit 85bda095107558846fe6fb803b6df412213b27f4
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Wed Nov 15 00:47:04 2006 +1100

    nv_exa.c tab goodness

commit 8b733a25c30fb9e499d678c26b777d072d1ac187
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Tue Nov 14 08:31:21 2006 +1100

    Fix type. 0x84 is DEBUG_1

commit 030eb38dd1fe767807aab0447ed4fab4ec8c368a
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Tue Nov 14 03:09:05 2006 +1100

    Fill in front_offset/front_pitch

commit 589bb37ff37bb7d4775f5dca0301c5d97ea73b06
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sun Nov 12 16:04:32 2006 +1100

    Add NVDRIFinishScreenInit.

commit d0c09a1bd0e1c26cc591a3d8738b94b1efe576ec
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Nov 12 14:08:45 2006 +1100

    add some names to registers

commit 84928fd946b4f02d8a943226481304417475c4f9
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sun Nov 12 07:43:24 2006 +1100

    Import nouveau_dri.h from the 3D driver as nv_dri.h, and setup DRIInfo->devPrivate.

commit cdb9e3acf0aa5cdf6e5aa33fb499ea8e93f7f1f2
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sun Nov 12 07:33:53 2006 +1100

    Temporary workaround for DRI drmMap problem, not sure of what we actually need to do here yet.

commit d3babbfbed898921e1a167df08eef92d381d6aa0
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sun Nov 12 07:28:31 2006 +1100

    nv_dri.c still had some space-indented functions, not anymore :)

commit bad4e6c674ac4fdc0aebbbc6d36fc2854ee8f885
Merge: 1b14821 c096565
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Nov 6 03:14:07 2006 +0100

    Merge branch 'master' of git+ssh://marcheu@git.freedesktop.org/git/nouveau/xf86-video-nouveau

commit 1b14821ecd67a62a34a902e62c0b229bb9ed97ca
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Mon Nov 6 03:13:50 2006 +0100

    Added a DRI visual configs functions. It should work but I can't test it...

commit c096565a0f6e6c12255e57eaefb878904ce04971
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Mon Nov 6 11:54:19 2006 +1100

    Fix TEX0_IN_TEX1 fragprog.. I must've been asleep when I did that..

commit 47f32cfe6e2f513f86b7a8f02a8872c134e2327d
Author: Dave Airlie <airlied@ppcg5.localdomain>
Date:   Mon Nov 6 11:45:53 2006 +1100

    use pagesize to work out the sarea size

commit e6c4d40e247939f677e285db15a78ccc33b92b41
Author: Dave Airlie <airlied@ppcg5.localdomain>
Date:   Mon Nov 6 08:39:49 2006 +1100

    don't fail dri module load if loaded already

commit 4cc4a1f7ef559f1ce56706f16ee24a3b6879d28d
Merge: b95f8aa b4e4307
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Nov 5 18:00:29 2006 +1100

    Merge ssh://10.1.1.200/home/airlied/git/xf86-video-nouveau

commit b4e4307af982b50aff191983d209cb855a377f80
Author: Dave Airlie <airlied@ppcg5.localdomain>
Date:   Sun Nov 5 17:59:17 2006 +1100

    fix G5 endianness issue with panel size regs

commit b95f8aac9e6dcbf4d10a5e26bde6a0f3595608cb
Merge: ba71154 e6b1f68
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Nov 5 17:53:53 2006 +1100

    Merge branch 'master' of ssh://git.freedesktop.org/git/nouveau/xf86-video-nouveau

commit ba711545a0fd091c05b514f30c1e904370026499
Author: Dave Airlie <airlied@ppcg5.localdomain>
Date:   Sun Nov 5 17:51:10 2006 +1100

    set the PPC use BE MMIO

commit e6b1f687e3bf127d8dba1871d67eff9d83ac284e
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sat Nov 4 16:57:30 2006 +0100

    Remove the context object flags handling from the DDX since it's now in the DRM.

commit ead77e0ec1d0c62829fa973db3d62937b44781e5
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Sat Nov 4 04:47:57 2006 +0100

    Add the NV44A 3D object class.

commit 87463666ab23e047f355cfcd7016aa9c7cd8ad76
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Fri Nov 3 04:00:09 2006 +1100

    Use "do { blah; } while(0)" instead of just braces. (suggestion from megari on irc)

commit 68682238b36292409ce7f41ed90bd3be860e77f3
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Thu Nov 2 16:07:26 2006 +1100

    Install NV30_TCL EXA hooks if NV_ENABLE_3D is defined.
    
    Ok.. Firstly I don't recommend using this code, it is not ready for general
    usage.  We probably only want to keep the Composite hook, but the others are
    useful to test things with.
    
    1. You will most likely (read: definitely) need to start X with the binary
       driver before starting X with nouveau/NV30_TCL.. If you don't PGRAPH will
       yell at you and X will crash.
    2. Copy() is bad when the src and dest are the same, so scrolling and moving
       windows around will fall back to software rendering..
    3. Composite() is slightly better than the one in nv_exa.c, but it's buggy in
       a few cases and not complete yet.  Particularly, transforms are missing.
    4. There are some correctness problems that I haven't bothered to fix yet, so
       you'll probably see bits of windows left behind when moving them around..
    5. Don't be surprised if it's horribly broken :)

commit c371d90935d6baf2f1dd0073741637d14b506f59
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Thu Nov 2 15:57:47 2006 +1100

    Put braces around NVDmaSetObjectOnSubchannel...

commit b45aea22a8da69ad4a2493f7f33fa65186a83ba3
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Thu Nov 2 14:52:24 2006 +1100

    Merge >=NV30-specific EXA code.. hard-disabled pending testing on my C51, and a proper commit message..

commit e79b0befe92110c1cd2e0e1ae69fced1cd5acba3
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Thu Nov 2 01:29:34 2006 +1100

    Reformat NVExaInit

commit 6a77e5bf2e58b19df67c029ad7bffd92f8cf652f
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Thu Nov 2 01:18:14 2006 +1100

    First part of preparation for NV30_TCL EXA code merge.

commit 1d6e911ab5391277b403ef6f7b095203cfd19a53
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Thu Nov 2 00:38:53 2006 +1100

    Reindent nv_dma.c with tabs..

commit 06748f74f639242fd690a3dda7e685ae4fa1f95e
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Wed Oct 11 11:06:16 2006 +1100

    s/init/alloc/

commit a2d55603db8c01cc4b9f3404c282b1e4963a152c
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Wed Oct 11 00:39:36 2006 +0200

    Remove the PFIFO_REINIT hack, and enable the irq by default. This commit requires the matching drm commit, and will probably break stuff.

commit 78537b3342bbf1c16dc78f8f06cb3f989ce8f03f
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Thu Sep 14 12:56:28 2006 +1000

    It usually helps to wait on a notifier, and not on a NVAllocRec.. Oops.

commit 01dde28611238cf2d81b087b371cc67296d1b581
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Thu Sep 14 12:17:32 2006 +1000

    Allocate notifiers with NVAllocateMemory.
    Fix some warnings.
    Return success/fail for DMA and Context object creation.

commit 3d5c560f509646853cc863e35ed2412db39cd8a3
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Sep 5 07:39:10 2006 +0200

    Port some of the least intrusive nv03 code to the nouveau driver.

commit 6fb7a63bf5d4f046583f9d14862c16ec5979a318
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sun Sep 3 06:41:52 2006 +1000

    Config options for cmdbuf location/size.
    
    Will default to putting the cmdbuf in AGP (except for PowerPC) if an AGP card
    is detected.  Won't currently be detected because something is wrong DRM-size.
    
    If you have an AGP card you can manually specify 'FBLocation "AGP"' in
    xorg.conf to make it work.
    
    Needs an updated DRM to have any effect.

commit e49d561d2328eeac7691661e28955a882bba2192
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sun Sep 3 01:51:23 2006 +1000

    Copy+Paste a workaround for a NV40 hardware bug from NVShowHideCursor() into
    LoadStateExt().  This should fix the problem of the HW-cursor still being
    enabled when VT-switching back to a framebuffer console.

commit 69ace0c4388cb1a66ea74f627fe02fe89e7d35c0
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sat Sep 2 22:17:55 2006 +1000

    Kill off one of the M2MF objects, and use the engine's SET_OBJECT_{IN_OUT} to
    swap between AGP->VRAM and VRAM->AGP.

commit 72cf79b9e5dc0d97e933f540d063161129bbebf7
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sat Sep 2 21:59:26 2006 +1000

    Don't create objects that aren't needed.  This frees up a couple of subchannels
    for EXA, use one of them for MEMORY_TO_MEMORY_FORMAT.

commit 6a06d9022f3c0bc845f02091d83faf95f69f81bd
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sat Sep 2 18:15:15 2006 +1000

    Move code out of nv_xaa.c that doesn't belong there.

commit 46ac77d524dd183c6b50a7a0e77990514ff28840
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sat Sep 2 17:57:38 2006 +1000

    Add back some setup that went missing during PFB reg cleanup.
    Should fix corruption on NV40.

commit 03b86f08667a10c44420d60787fe9e17b5d20ab8
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Thu Aug 31 15:53:25 2006 +1000

    Rename module from nv_drv.so to nouveau_drv.so to allow both nv and nouveau
    to coexist.  Also disabled building of riva128.so, as we plan on merging it
    with the rest of the nv code.

commit 17c871a44987af04d1688798e2e7802a5f5ba522
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Wed Aug 30 06:24:23 2006 +1000

    clean up FB register names

commit 7d3c12424fd79daf831b7c28780586e8bd9c3574
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Wed Aug 30 04:23:43 2006 +1000

    add some names for the RAMDAC registers

commit 0e70296ce9f7a921c4b971919d12c262202d8d48
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Wed Aug 30 02:18:02 2006 +1000

    add some names for some of the CRTC registers - some names not very meaningful
    yet

commit 9a5e2c5be96eaced3aadd153fb2f9b1928173af7
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Wed Aug 30 01:48:07 2006 +1000

    remove select head registers PCIO and PDIO

commit dec0691db79b1ded2942c1cbfa97434fa8693f9b
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Wed Aug 30 01:13:05 2006 +1000

    remove unused pointers after macroisation

commit 9444b692607895572c8199a60d6968fbc374d51e
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Wed Aug 30 01:02:45 2006 +1000

    missed 2x PGRAPHs in XAA

commit f73cb8ef4f4fbb588bfe9ca767286153b2565a37
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Wed Aug 30 00:59:39 2006 +1000

    remove PCRTC via macros

commit 6d5b1765e10856a7dfa75c27ad96f547dc26b23a
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Wed Aug 30 00:48:23 2006 +1000

    remove PEXTDEV and PTIMER using macros

commit 6140bdfe6959cd0f6ce8e06d34b6e838d8cef046
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Wed Aug 30 00:43:07 2006 +1000

    remove PMC using macros

commit 28d9befa6308462a6bc1809b894ebe389873fd6a
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Wed Aug 30 01:26:58 2006 +1000

    Make EXA the default

commit fa9209f77df3d835ebad43dc82988c000398f650
Merge: ab2b550 2f7caf6
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Aug 29 13:42:49 2006 +0200

    Merge branch 'master' of ssh://marcheu@git.freedesktop.org/git/nouveau/xf86-video-nouveau

commit ab2b5509e82a646ac187b020c91234e33f81065d
Author: Stephane Marchesin <marchesin@icps.u-strasbg.fr>
Date:   Tue Aug 29 13:42:34 2006 +0200

    Make use of NV5_SCALED_IMAGE_FROM_MEMORY on NV05.

commit 9911eb726f99166968165710a9e2f540388cd42a
Author: Stephane Marchesin marchesin@icps.u-strasbg.fr <steph@tubular-brain.localdomain>
Date:   Tue Aug 29 03:18:27 2006 +0200

    Enable the composite hooks.
    
    After changing NV_SCALED_IMAGE_FROM_MEMORY for NV10_SCALED_IMAGE_FROM_MEMORY it seems the composite hook works.
    Also, add a more complete list of desktop pci ids.

commit 2f7caf6eb5eb6a3991720fc413bd20723473212f
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Tue Aug 29 08:13:59 2006 +1000

    remove PGRAPH direct accesses

commit 51f0b67d9064fffc6b357d2923188a030e85eace
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Tue Aug 29 07:51:49 2006 +1000

    remove PFB usage with macros

commit b50736d1583b960ab70f3e113294db8c2da69e31
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Mon Aug 28 17:07:06 2006 +1000

    Use NVAllocateMemory for AGP scratch buffer.

commit a5ddd8fcf4278c35d71605794d0d5711e7c0ebb7
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 28 16:41:20 2006 +1000

    remove legacy crap from nvreg.h add cursor reg defines

commit f035bc63c34bce49e1c2619f14ab98b4b1922beb
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 28 16:23:32 2006 +1000

    missed some vga routines

commit 0b45a9f725442d5bd784ee67b7473929993f6082
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 28 16:19:56 2006 +1000

    add RAMDAC register read/write

commit 24267d7e39383930c589bc80e2bbd4e5cf66ec2a
Merge: 349496c c0154e6
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Mon Aug 28 14:46:51 2006 +1000

    Merge branch 'master' of git+ssh://git.freedesktop.org/git/nouveau/xf86-video-nouveau

commit 349496c97fafed04806c01bd9d4386b0fcaa9fd2
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Mon Aug 28 14:45:42 2006 +1000

    More cleanups from DRM memory alloc changes.

commit c0154e615c091c7bb483fcfd07e216b21618d0f2
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 28 14:07:05 2006 +1000

    use nvReadVGA and nvWriteVGA in more places

commit e0f1479773c1a00ec69edbece98e5e2b66c0c2c9
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sun Aug 27 22:45:36 2006 +1000

    Fix ShadowFB for FB alloc changes, should fix RandR rotation also.

commit 0de4d0b8b79e2238f2c4b374b5012a25ae985502
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sun Aug 27 22:27:17 2006 +1000

    Slash UseFBDev and DGA support.

commit e49d08ff482755e9f95c4c3b3cf065e6f0d2bc23
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Aug 27 10:04:50 2006 +1000

    add some read/write NV VGA register wrappers

commit c64c55b3133221462980b934a308daf2cc0e473d
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Aug 27 09:56:36 2006 +1000

    remove all U0* types in favour of more standard CARD* types

commit 9c294b962379a955d2e8e2cb2c54f845fd4c5740
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sat Aug 26 00:43:21 2006 +1000

    Wow I suck tonight.. another oops.

commit b8411ae92b6833c9336f82ed86dc8755ca8b9dcc
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sat Aug 26 00:39:36 2006 +1000

    Whoa, how did that happen...

commit d458cdac152a49eec9acdfe5081f6d426e712bf2
Author: Ben Skeggs <darktama@iinet.net.au>
Date:   Sat Aug 26 00:33:47 2006 +1000

    Initial work in porting the DDX to use the DRM for memory allocations.
    This is enough to make it work, but there's still a *lot* of cleanups
    to do.

commit 83ae039b8f8ea08ae9436201014c7e1ba25a4839
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Aug 25 19:33:08 2006 +1000

    fixup compile for git

commit ea2bc33d32bf9abeb23b3fe8cb6c9d28ddccef01
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Aug 25 19:17:51 2006 +1000

    updated git tree from changes that got lost on way from CVS

commit 07b81112ba4678085a148e5ffaadd4684f74d64d
Author: marcheu <marcheu>
Date:   Thu Aug 24 21:00:42 2006 +0000

    Make NVInitAGP fail if there is no AGP area. Maybe that function shouldn't be called for PCI(-e) cards in the first place.

commit 109b5abed6c0c701a1fb84ec63ff8f5914eee8e3
Author: marcheu <marcheu>
Date:   Wed Aug 23 21:32:47 2006 +0000

    If you stare at nv_hw.c long enough, things start to make sense. I swear !

commit 80ba1cfec290dbb82c4a1042255a21b626512e84
Author: marcheu <marcheu>
Date:   Wed Aug 23 17:11:22 2006 +0000

    Comment out NVDmaKickoff() in NVResetGraphics(). NVResetGraphics is called twice on startup, and flushed to the card in between. Since NVResetGraphics resets the fifo pointer, this sometimes ends up in a situation where the CPU writes at the same place of the fifo (at the beggining) the GPU is currently reading from. Obviously this is bad.
    
    Also, add code to dump fifo in case of crashes.

commit 9b19daa55c7770a3e66b2374da0212c75ed21260
Author: marcheu <marcheu>
Date:   Tue Aug 22 01:16:18 2006 +0000

    Remove debug message.

commit b44b54e4c369c612a692eabb8662b3db97758a83
Author: marcheu <marcheu>
Date:   Mon Aug 21 13:19:06 2006 +0000

    Fill more fields in the DRIInfo struct.

commit aaf13d0e7cc5c76ee81b4234dc2c55bbedac1faa
Author: darktama_ <darktama_>
Date:   Sun Aug 20 15:11:06 2006 +0000

    Oops, this shouldn't be here still...

commit 00fd86dea8d2eaa561cc89a35046d15bcf92bb82
Author: darktama_ <darktama_>
Date:   Sun Aug 20 14:40:43 2006 +0000

    - Allocate notifiers with the DRM
    
    - Rename agpMemory and friends to agpScratch and friends

commit d5c68d3f83f84ca67ee9df269b778bbed50851a0
Author: darktama_ <darktama_>
Date:   Sun Aug 20 12:51:49 2006 +0000

    Alloc AGP through the DRM

commit 6d0924c272954f44b2a9b6b11be8c209dd67de8e
Author: marcheu <marcheu>
Date:   Sat Aug 19 16:04:56 2006 +0000

    Begginings of PINS parsing code I had laying around...

commit 59e2d852d6f10ba26a394ff7ea5d3e7b30f2be71
Author: darktama_ <darktama_>
Date:   Mon Jul 31 07:32:57 2006 +0000

    Need.To.Pay.More.Attention...

commit 9a314361fd004afe7129ae2d41f58ddd7fe6f56a
Author: darktama_ <darktama_>
Date:   Mon Jul 31 03:24:17 2006 +0000

    Updates for DRM changes, and a few cleanups

commit 11fbb14876e7873a863de16b01fb5778e841b4bd
Author: erikwaling <erikwaling>
Date:   Thu Jul 13 04:13:07 2006 +0000

    Added more opcodes and some TODOs.

commit dd54fea7562b8c9a6d26b645a03c9644c08090cc
Author: erikwaling <erikwaling>
Date:   Thu Jul 13 03:09:11 2006 +0000

    Changed INIT_MACRO to haiku-like implementation.

commit b7e68083f3bf6b0943b58cfed0b82de61eeaac33
Author: marcheu <marcheu>
Date:   Mon Jul 10 00:36:31 2006 +0000

    Add a check that bios writes fall within known areas. Use these areas to setup mappings as well. Add some debug support to the bios code.

commit fe2a1360d72385ad0f61f381a296820d02a60e79
Author: marcheu <marcheu>
Date:   Mon Jul 10 00:30:54 2006 +0000

    Use -Wall by default

commit ca38f1d9d61393915515e1042204b35aeac863ba
Author: darktama_ <darktama_>
Date:   Sat Jul 8 13:53:00 2006 +0000

    Remove FIFO and object handling out of the DDX. This commit makes the DDX dependant on the DRM to operate at all..

commit b9b880b83896defe06ce61c9aef2f5ae4eb4f37e
Author: lumag <lumag>
Date:   Mon Jun 12 20:21:11 2006 +0000

    Fix exa acceleration by filling versioning fields.

commit 0bbc0bcfe33c2625ea6175c3b052d231cc3b7c8f
Author: darktama_ <darktama_>
Date:   Sat Jun 10 18:34:14 2006 +0000

    Quick hack to make sure CRTC 0x44 contains it's original value when VT switching back to the console (also on server shutdown).
    
    Should fix the problem of one display having scrolling issues, and losing
        it's text-mode cursor.

commit 18e65f4e0604c744ea905319348c688141e14bbf
Author: marcheu <marcheu>
Date:   Thu Jun 8 01:10:01 2006 +0000

    Remove xf86ReadPciBIOS, use the bios from the reg aperture instead (that will probably work on more archs anyway)

commit 2f5fcd131dbea5cb9873cc8a4aad44ae1bcf1340
Author: darktama_ <darktama_>
Date:   Fri Jun 2 21:54:48 2006 +0000

    Remove some XFree86LOADER conditionals

commit 7889cc0241450aaa8e9dafc65f9f7976df3cd99b
Author: darktama_ <darktama_>
Date:   Sat Apr 22 02:26:53 2006 +0000

    Need to include nv_include.h before checking that XF86DRI is definied. XF86DRI lives in xorg-server.h - included from config.h

commit 3083263eb40f57e4c529473c5e9f935109a1719f
Author: marcheu <marcheu>
Date:   Fri Apr 21 22:15:59 2006 +0000

    Don't include config.h in all files but in the *_include.h files. That's what they're here for after all.

commit 864e2c6936a37005112a3c6f3f7db5a16100b96c
Author: darktama_ <darktama_>
Date:   Fri Apr 21 02:46:31 2006 +0000

    Include config.h in all source files

commit 74ff8fc182c6f728a1b5e8a0415c25b8b7a4af94
Author: marcheu <marcheu>
Date:   Thu Apr 20 18:54:12 2006 +0000

    Added a fixme about laptop chips

commit ad38154a7e075207d8f462ffb90489efe9cf01f1
Author: erikwaling <erikwaling>
Date:   Thu Apr 20 18:50:11 2006 +0000

    Ported nv_exa.c to work with EXA >=2.0.0

commit 7c25d338e0c79a288fa192d9a2d4ac6eb59996c1
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Aug 25 18:51:03 2006 +1000

    initial import of nouveau code

commit 98372d0f94a9d658a7257d2199ef37a2449b9961
Author: Adam Jackson <ajax@benzedrine.nwnk.net>
Date:   Fri Aug 11 16:02:28 2006 -0400

    Replace panel message + MODE_BAD with MODE_PANEL.

commit 43ec66396f805aba87017d193d97a03372c29909
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Fri Jun 30 12:54:44 2006 -0700

    Bump version to 1.2.0 for release.

commit 6265b77dc8878e36abd76b73e209a2d76d70ba22
Author: Mark Vojkovich <markv@xfree86.org>
Date:   Thu Jun 29 18:41:44 2006 -0700

    New chip support and new PCI IDs.

commit 5114639dff73c22845451acffed94f1da284a7df
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Mon Jun 19 09:32:11 2006 -0700

    Generate the ChangeLog from git history for dist.

commit 04d344dfcbb9928cf33943a880de333557e14be9
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Fri Jun 16 18:03:21 2006 -0700

    Delete the ChangeLog.  The git history is just as good.

commit eda3bac20dce2d5584ac07cc6b28a08ec55aa798
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Wed May 24 15:05:22 2006 -0700

    Derive the module version numbers from the package version.  This idea was
    lifted from Michel Dänzer's similar code in xf86-video-ati.
    
    Also, make the riva and nv driver versions match.

commit 1a40c4a79b79034d191496726a27af8b0805dba6
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Thu Apr 27 18:10:37 2006 -0700

    Add the libcwrapper back, conditionalized on the server version.

commit 425e30d58b7b62fff01fbb58585ee69b2df6fec1
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Thu Apr 27 10:32:10 2006 -0700

    Determine whether PutImage hooks take a DrawablePtr by server version.  Remove
    dependency on xorg-server >= 1.0.99.901.

commit c34a93265cb42168376ebdf0746b3ccded9f126c
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Tue Apr 25 14:38:43 2006 -0700

    Bump to 1.1.2 for new product names.

commit f70247ade9eac8fa6115889662abb8e678a182dc
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Tue Apr 25 14:29:44 2006 -0700

    Add names for Quadro FX 5500, 3500, 1500, 560, 550, and 350.

commit ca4c8af624e87e5c6a2927092a9c230ae0e60c0e
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Wed Apr 12 02:04:52 2006 -0700

    Add .gitignores.

commit fb3faeb6073cef5a6a1b094f3d3bf020ceba9db6
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sat Apr 8 01:38:33 2006 +0000

    Bump to 1.1.1 for Xv changes.

commit f793182898c4d844e9861a60a945f53ab7071adc
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Fri Apr 7 23:11:06 2006 +0000

    Add a DrawablePtr argument to the XV functions to pave the way for
        redirected video.

commit cb6b4073df7404822e2b553519c3a101f2ab0524
Author: Adam Jackson <ajax@nwnk.net>
Date:   Fri Apr 7 19:40:34 2006 +0000

    Unlibcwrap. Bump server version requirement. Bump to 1.1.0.

commit 3f140052f891a4dc674b82e438c9595e59b4676b
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Mon Mar 27 21:40:24 2006 +0000

    Bump version to 1.0.2.0 for release.

commit 84c007b426d321786f9aec1d9fda14b5baa35561
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Fri Mar 10 02:29:03 2006 +0000

    Coverity nos. 868 and 869: Free the result of xf86GetEntityInfo.

commit 61e237eec7193701ce1236e67ebdfe7465b5db8a
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Tue Jan 24 16:45:29 2006 +0000

    Fix typo in PCI ID (reported by Stefan Dirsch). Patch from Mark Vojkovich
        to XFree86 CVS on 2006-01-23.

commit 5064f8a903923ca4b819bdf345f8f4c9254bdf3b
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Mon Jan 23 00:04:41 2006 +0000

    New chip support from Mark Vojkovich's 2006-01-20 and 2006-01-21 XFree86
        CVS updates.

commit e8fd45625f2e09830136bde6bc70d51f25892450
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Mon Jan 2 01:54:19 2006 +0000

    Preliminary RandR rotation support. Bug #4708
        <https://bugs.freedesktop.org/show_bug.cgi?id=4708>

commit 5ec53e759c5233a26a6c80901b9f31b51153f756
Author: Kevin E Martin <kem@redhat.com>
Date:   Wed Dec 21 02:30:01 2005 +0000

    Update package version for X11R7 release.

commit b0c8ca8c03c8ad1648b4597f7825bac7531100a7
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Dec 19 16:25:54 2005 +0000

    Stub COPYING files

commit 4fd25919c2a217d355419efdfbf0fe148af6c146
Author: Kevin E Martin <kem@redhat.com>
Date:   Thu Dec 15 00:24:18 2005 +0000

    Update package version number for final X11R7 release candidate.

commit e4194bab2a790af10581ea2842717623db8998a2
Author: Kevin E Martin <kem@redhat.com>
Date:   Tue Dec 6 22:48:36 2005 +0000

    Change *man_SOURCES ==> *man_PRE to fix autotools warnings.

commit baf60566b505fdf4387ec25789584b3f6ad72ce8
Author: Kevin E Martin <kem@redhat.com>
Date:   Sat Dec 3 05:49:34 2005 +0000

    Update package version number for X11R7 RC3 release.

commit 4df200ea93b0a072f29057eeaf7a09e5a3a1dfe2
Author: Kevin E Martin <kem@redhat.com>
Date:   Fri Dec 2 02:16:09 2005 +0000

    Remove extraneous AC_MSG_RESULT.

commit d4d5d7325fab1ea81f71d1ffc1fbbcc2d2253a65
Author: Adam Jackson <ajax@nwnk.net>
Date:   Tue Nov 29 23:30:00 2005 +0000

    Only build dlloader modules by default.

commit d76f3f776bdab920d050542da45ec2871d4b84e6
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Mon Nov 28 22:04:10 2005 +0000

    Change *mandir targets to use new *_MAN_DIR variables set by xorg-macros.m4
        update to fix bug #5167 (Linux prefers *.1x man pages in man1 subdir)

commit d4e306b585f737b4c1287c520470425b0c11dc32
Author: Kevin E Martin <kem@redhat.com>
Date:   Wed Nov 9 21:15:19 2005 +0000

    Update package version number for X11R7 RC2 release.

commit dde6dd1c7f95f9dccabfd919ad4ced795fe3fbd1
Author: Kevin E Martin <kem@redhat.com>
Date:   Tue Nov 1 15:08:53 2005 +0000

    Update pkgcheck depedencies to work with separate build roots.

commit 92b1bfcc8fd0f34e636a1e9955d5236334f78cd3
Author: Kevin E Martin <kem@redhat.com>
Date:   Wed Oct 19 02:48:03 2005 +0000

    Update package version number for RC1 release.

commit eda1cbc29cb0b2193a5bfb0eb620c740d9aef7c6
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Tue Oct 18 00:01:53 2005 +0000

    Use @DRIVER_MAN_SUFFIX@ instead of $(DRIVER_MAN_SUFFIX) in macro
        substitutions to work better with BSD make

commit 6c58a05e405cbc87fbe0497123d9b82d2480bdd3
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Oct 17 22:57:34 2005 +0000

    More 1.7 braindamage: define EXTRA_DIST in terms of @DRIVER_NAME@ instead
        of indirectly

commit fc20886c28c465578e6bd3ef2d9fe62bd993382b
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Mon Oct 17 00:09:04 2005 +0000

    Use sed & cpp to substitute variables in driver man pages

commit 1e3c84f332b7b9a4b320b370b8b2ecafbbdd8f8a
Author: Søren Sandmann Pedersen <sandmann@daimi.au.dk>
Date:   Tue Oct 4 21:36:51 2005 +0000

    Link nvidida readme file into nvidia driver, Exclude duplicated neomagic
        readme

commit d8be62ab175a013f78d4944036da284ffad34d96
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Thu Sep 29 21:47:29 2005 +0000

    Add entries for GeForce Go 7800. (Change went into XFree86 on 2005-09-28).
    Don't hang if j is zero. This should never happen, but it's better to be
        safe than sorry.

commit e39eb8b8c1a79d04f90a195351c4eec3dba0d612
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Wed Sep 28 17:18:02 2005 +0000

    Bug #3333 <https://bugs.freedesktop.org/show_bug.cgi?id=3333> Patch #3417
        <https://bugs.freedesktop.org/attachment.cgi?id=3417>
    Fix a hang during screen-to-screen blits on certain GeForce 6xxx and Quadro
        FX 540 graphics cards.

commit dc5acc2e477edb85f468f8d46862ca138426cfd9
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Fri Sep 23 16:25:28 2005 +0000

    Bug #4558 <https://bugs.freedesktop.org/show_bug.cgi?id=4558> Patch #3551
        <https://bugs.freedesktop.org/attachment.cgi?id=3381>
    22-Sep-2005 nv driver update from Mark Vojkovich: Fix possible cause of
        some acceleration instability on some GeForce6xxx parts.

commit b0ea43a51d2a6983559eecdb7dbb73c5e585697c
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Sat Sep 17 01:37:18 2005 +0000

    Bugzilla #4480 <https://bugs.freedesktop.org/show_bug.cgi?id=4480> Patch
        #3305 <https://bugs.freedesktop.org/attachment.cgi?id=3305>
    13-Sep-2005 nv driver update from Mark Vojkovich:
    - Adds PCI ids for GeForce 6800 XT cards
    - Adds names for existing PCI ids for some GeForce 6xxx & 7xxx cards
    - Fix a potential problem with pixmap cache corruption on GeForce 6xxx and
        7xxx parts. (Mark Vojkovich, NVIDIA)

commit cdf20033e2cfc9e8634876dd42613f7719340a5a
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Sep 16 01:36:45 2005 +0000

    Put the riva_* files in the riva128.so subdriver, like monolithic.

commit 9b1b3184cd586f6f8bf65ebd6f3c1afb1ae64d64
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Thu Aug 18 09:03:47 2005 +0000

    Update autogen.sh to one that does objdir != srcdir.

commit 75a0deb6e9d1a5bc698ea67b338c56bc99c1b2c0
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Fri Aug 5 03:52:28 2005 +0000

    Bug #3987 <https://bugs.freedesktop.org/show_bug.cgi?id=3987> Patch #3264
        <https://bugs.freedesktop.org/attachment.cgi?id=3264> Workaround for
        512 Meg video cards (can only map 256 Meg of it). (Mark Vojkovich)

commit fb4033bd2662c199d7e4f0e3df7c4a0fb9870984
Author: Kevin E Martin <kem@redhat.com>
Date:   Fri Jul 29 21:22:44 2005 +0000

    Various changes preparing packages for RC0:
    - Verify and update package version numbers as needed
    - Implement versioning scheme
    - Change bug address to point to bugzilla bug entry form
    - Disable loadable i18n in libX11 by default (use --enable-loadable-i18n to
        reenable it)
    - Fix makedepend to use pkgconfig and pass distcheck
    - Update build script to build macros first
    - Update modular Xorg version

commit 6ea22f19210448605b9a18bf500c33168a77e77c
Author: Søren Sandmann Pedersen <sandmann@daimi.au.dk>
Date:   Tue Jul 26 18:40:29 2005 +0000

    Build system for nv

commit 74772a7dc49e34229497441fbbf2631bfb259b39
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Jul 11 02:29:58 2005 +0000

    Prep for modular builds by adding guarded #include "config.h" everywhere.

commit 80ac36ec4fbbd9a4aae1bde01fe6ebc1088fa8cb
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Sat Jul 9 16:51:58 2005 +0000

    Bug #3740 <https://bugs.freedesktop.org/show_bug.cgi?id=3740> Patch #3058
        <https://bugs.freedesktop.org/attachment.cgi?id=3058>
    08-Jul-2005 nv driver updates from Mark Vojkovich:
    Change some console restore code for NV11. Hopefully, we can more reliably
        restore the console for desktop systems using DVI. This may correct a
        recent regression on NV11.
    Also, new PCI IDs.
    Add new nVidia PCI ids to match nv_driver.c changes.

commit 6b75bc13462f1cfb735fe1de359ed9e45b5f4415
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Fri Jul 1 22:43:12 2005 +0000

    Change all misc.h and os.h references to <X11/foo.h>.

commit 270f5269a08da8ed0186e8a2223b673e0433a771
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Wed Jun 29 15:56:23 2005 +0000

    Bugzilla #3657 <https://bugs.freedesktop.org/show_bug.cgi?id=3657> Patch
        #2992 <https://bugs.freedesktop.org/attachment.cgi?id=2992>
        Experimental DPMS support for GeForce4 and later laptops. (Mark
        Vojkovich)

commit bf73c0716e9e4be0540d2ee7340bd5833831a434
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sun Jun 26 04:38:12 2005 +0000

    Bug #3628: Fix video driver submodule visibility.

commit 175766a44ceb0a5d4226e9088d8e3e6d73815b4f
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sat Jun 25 21:16:55 2005 +0000

    Bug #3626: _X_EXPORT tags for video and input drivers.

commit 8759399a3744f0eb1e0cdc83ed23aaaafb9be444
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Thu Apr 21 22:25:47 2005 +0000

    programs/Xserver/hw/xfree86/drivers/nv/nv_driver.c
    programs/Xserver/hw/xfree86/drivers/nv/nv_setup.c
    //bugs.freedesktop.org/show_bug.cgi?id=3095> Patch #2501
        <https://bugs.freedesktop.org/attachment.cgi?id=2501> nv DPMS panel
        fixes (Mark Vojkovich)

commit 2db214d7cf5336fbea36d83bc9b089f70a494614
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Wed Apr 20 12:25:29 2005 +0000

    Fix includes right throughout the Xserver tree:
    change "foo.h" to <X11/foo.h> for core headers, e.g. X.h, Xpoll.h;
    change "foo.h", "extensions/foo.h" and "X11/foo.h" to
        <X11/extensions/foo.h> for extension headers, e.g. Xv.h;
    change "foo.[ch]" to <X11/Xtrans/foo.[ch]> for Xtrans files.

commit 3fe983d254f1ffe3c285548013be677ed4a67137
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Mon Feb 14 03:37:20 2005 +0000

    Bugzilla #2533 (https://bugs.freedesktop.org/show_bug.cgi?id=2533) Feb. 3,
        2005 "nv" driver update from Mark Vojkovich (Mainly driver updates for
        nVidia cards with ((pNv->Chipset & 0xfff0) == 0x0090) )

commit 8c95fdc889b56a76497f5194bafd06edfc962387
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Wed Jan 26 01:36:04 2005 +0000

    Jan. 2005 nv chipset update from Mark Vojkovich Bug #2380
        <https://bugs.freedesktop.org/show_bug.cgi?id=2380> Patch #1752
        <https://bugs.freedesktop.org/attachment.cgi?id=1752>

commit 67c89797f62ea53b37927c64e0403e7e7c42de56
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Fri Dec 10 03:56:42 2004 +0000

    Bugzilla #1985 <https://bugs.freedesktop.org/show_bug.cgi?id=1985> sync to
        12/08/04 version of Nvidia driver from Mark Vojkovich, including these
        fixes since last sync: Fix some DAC/Graphics memory contention issues
        on newer NVIDIA chips (specifically, NV40). More PCI IDs. Also, I've
        had trouble getting some panels to work automagically so I expose an
        FPTweak option to let the user adjust a troublesome register.

commit 7c34d051168eba499beb20c40fd95703375f4c7b
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Wed Nov 10 02:53:44 2004 +0000

    (Bugzilla #1777) Import Mark Vojkovich's changes to NV driver since last
        sync with XFree86, including: Support for new NVIDIA chips. Egbert has
        a laptop that needs some DPMS ordering reversed. New chip support and
        workaround for Toshiba M30 laptop issue. PCI-Xpress chip support. DPMS
        support for DVI. Cursor changes for NV11 so that alpha blended cursors
        will work in conjunction with dithering (laptop panels). It previously
        did not. HW support for alpha blended stretch blits on NV5 and higher,
        though nothing is using them at this point. Add support for VBlank
        syncing the Xv Blit adaptor on hardware that supports it (NV11 and
        higher). Make console restoration a little more robust. We were making
        an assumption that failed on a newer laptop. Workaround for some NV31
        DVI artifacts.
    Also add nVidia license statement to nv man page to comply with requirement
        that it appear in "user documentation"

commit fcd6d7b57edb4e396189a0a2683bcf08974f3b59
Author: Egbert Eich <eich@suse.de>
Date:   Tue Oct 12 19:13:44 2004 +0000

    Set fbdev mode as the default mode on PPC (Olaf Hering).
    Added support for IBM space saver keyboard (Stefan Dirsch). Added support
        for Cherry CyMotion Master XPress (Marcus Schaefer).
    Change order of SetDisplayDevice(), HWRestore(), UnbindGART() and
        RestoreBIOSMemSize() to be exactly opposite to the Save procedure in
        EnterVT() (Matthias Hopf, Alan Hourihane).
    Fix text mode restauration by removing the assumption that the register
        which determines which head is programmed is set. to the active head by
        the BIOS (Mark Vojkovich).
    When I wrote the resource code 5 years ago I made some assumptions which
        turned out to be false: I've assumed that the bus number of the PCI
        hostbridge would be the PCI bus the bridge links to. This is not
        correct. Fixing this assumption is not easy. However I hope that the
        attached patch will make the system work regardless as it 'ignores'
        host bridges from which the target bus is not known. This should not
        matter at all as we really don't care about host bridges (unless we
        have bridge specific code which retrieves information about the
        bridge).
    Fixed server crash on reset when a structure allocated in PreInit() was
        freed on CloseScreen().
    Fixed ring buffer lock ups that happened because the structure that
        contained ringbuffer data was not zeroed after allocation.
    Fixed numerous warnings due to signed unsigned comparisons.
        programs/Xserver/hw/xfree86/drivers/nv/nv_driver.c:
        (NVBacklightEnable): Changed the order in which the sequencer registers
        and the backlight control registers are written. The sequencer control
        register need to be written first otherwise DPMS screen blanking
        produces vertical bars on a mobile device. lib/Xau/Imakefile: Build
        libXau static library PIC so it can be linked into toolkits that would
        like to wrap its functionality.

commit 65e13fc61141b36a74c7a0e696d274574641ba20
Author: Adam Jackson <ajax@nwnk.net>
Date:   Fri Sep 17 03:04:52 2004 +0000

    Bug #1192: Remove cfb support from drivers where its use is an option.
        Delete xf24_32bpp, as s3virge was the last user. Fix up some comments
        to refer to fb rather than cfb.

commit bbafc6d2fcb21671de3cfb4ff973409405162e7a
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Aug 16 09:13:14 2004 +0000

    Bug #1087: Make sure all the *Weak symbols are documented in the import
        list, so the loader knows not to complain about unresolved symbols when
        an optional module isn't loaded. This typically manifests as warnings
        about fbdevHW symbols when the user isn't using the framebuffer
        console.

commit 8b6de7d388b7ae5169b2e38ad1a40981bc406cfc
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sat Jul 31 01:21:19 2004 +0000

    Change several LoaderSymbol calls introduced by the bug #400 patch to
    *Weak() resolver functions.

commit f745157f15befebe01552b103c573ccb94b8f388
Author: Adam Jackson <ajax@nwnk.net>
Date:   Fri Jul 30 20:30:53 2004 +0000

    Bug #400 (partial): Driver fixes for the dlloader. When using dlloader, all
        framebuffer formats except cfb and the overlay modes should work, and
        r128 and radeon need to be loaded from the ati driver (both issues to
        be fixed soon). Tested on i740, s3virge, mach64, tdfx, vesa, and vga
        drivers. elfloader users shouldn't be affected.

commit b9a6776bc04eb19343882bddb371b705677cfc14
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jun 16 09:23:29 2004 +0000

    DRI XFree86-4_3_99_12-merge import

commit cbf040deb0ab24425468ed60b3f3edd322ec210f
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jun 16 09:23:29 2004 +0000

    Initial revision

commit 99a7f7ccce4e012bde57021cafcb132c3d599b96
Author: Egbert Eich <eich@suse.de>
Date:   Fri Apr 23 19:42:10 2004 +0000

    Merging XORG-CURRENT into trunk

commit 708bb2eb0db3808e3edf94a5f22b3e3f5bb6488d
Author: Egbert Eich <eich@suse.de>
Date:   Sun Mar 14 08:33:30 2004 +0000

    Importing vendor version xf86-4_4_99_1 on Sun Mar 14 00:26:39 PST 2004

commit fe564263d97e370817fc862e5c8ead09bfb70b58
Author: Egbert Eich <eich@suse.de>
Date:   Wed Mar 3 12:12:23 2004 +0000

    Importing vendor version xf86-4_4_0 on Wed Mar 3 04:09:24 PST 2004

commit 1a0be799ce4c479e39f8af86fcca3d192e83f455
Author: Egbert Eich <eich@suse.de>
Date:   Thu Feb 26 13:35:54 2004 +0000

    readding XFree86's cvs IDs

commit ee5c9ef51cea88a630ecc652512603c42b39a533
Author: Egbert Eich <eich@suse.de>
Date:   Thu Feb 26 09:23:23 2004 +0000

    Importing vendor version xf86-4_3_99_903 on Wed Feb 26 01:21:00 PST 2004

commit d176fa338d2d83bcf8d7ec68ff1aec205a258fec
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Mon Feb 23 20:35:04 2004 +0000

    Import most of XFree86 4.4RC3. This import excludes files which have the
        new license. If we want to, later we can import 4.4RC3 again and pick
        up the files that have the new license, but for now the vendor branch
        is "pure."

commit ea7a90e680a2e9259e471dd6677bcca12aeea79e
Author: Egbert Eich <eich@suse.de>
Date:   Thu Jan 29 08:08:36 2004 +0000

    Importing vendor version xf86-012804-2330 on Thu Jan 29 00:06:33 PST 2004

commit a6c83bd98c34aacdf7a6b82ea83d6ae775479502
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Fri Dec 19 20:55:14 2003 +0000

    XFree86 4.3.99.902 (RC 2)

commit 935c2adf58a10e6d3caa75823b4e7a0689555c49
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Tue Nov 25 19:28:38 2003 +0000

    XFree86 4.3.99.16 Bring the tree up to date for the Cygwin folks

commit d84248580d5b05bb47a2ccdce7badfc884efa6da
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Tue Nov 25 19:28:38 2003 +0000

    Initial revision

commit dd1a62caaaac6acc35584a2c8c525962d8574c95
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Fri Nov 14 16:48:55 2003 +0000

    XFree86 4.3.0.1

commit 2f223903fba2bdee1623f3442d7580c809b428cc
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Fri Nov 14 16:48:55 2003 +0000

    Initial revision

commit 542d57ea12b5461891a13a339e01ca9e1add124d
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Fri Nov 14 15:54:48 2003 +0000

    R6.6 is the Xorg base-line
